{"version":3,"file":"context-49bbb842.js","sources":["../../../node_modules/.pnpm/@babel+runtime@7.22.15/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase.js","../../../node_modules/.pnpm/@babel+runtime@7.22.15/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey.js","../src/-private/debug.ts","../src/-private/future.ts","../src/-private/context.ts"],"sourcesContent":["export default function _classPrivateFieldBase(receiver, privateKey) {\n  if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) {\n    throw new TypeError(\"attempted to use private field on non-instance\");\n  }\n  return receiver;\n}","var id = 0;\nexport default function _classPrivateFieldKey(name) {\n  return \"__private_\" + id++ + \"_\" + name;\n}","import { DEBUG } from '@ember-data/env';\n\nimport { Context } from './context';\nimport type { ImmutableHeaders, RequestInfo } from './types';\n\nconst BODY_TYPES = {\n  type: 'string',\n  klass: ['Blob', 'ArrayBuffer', 'TypedArray', 'DataView', 'FormData', 'URLSearchParams', 'ReadableStream'],\n};\nconst ValidKeys = new Map<string, string | string[] | typeof BODY_TYPES>([\n  ['records', 'array'],\n  ['data', 'json'],\n  ['body', BODY_TYPES],\n  ['disableTestWaiter', 'boolean'],\n  ['options', 'object'],\n  ['cacheOptions', 'object'],\n  ['op', 'string'],\n  ['store', 'object'],\n  ['url', 'string'],\n  ['cache', ['default', 'force-cache', 'no-cache', 'no-store', 'only-if-cached', 'reload']],\n  ['credentials', ['include', 'omit', 'same-origin']],\n  [\n    'destination',\n    [\n      '',\n      'object',\n      'audio',\n      'audioworklet',\n      'document',\n      'embed',\n      'font',\n      'frame',\n      'iframe',\n      'image',\n      'manifest',\n      'paintworklet',\n      'report',\n      'script',\n      'sharedworker',\n      'style',\n      'track',\n      'video',\n      'worker',\n      'xslt',\n    ],\n  ],\n  ['headers', 'headers'],\n  ['integrity', 'string'],\n  ['keepalive', 'boolean'],\n  ['method', ['GET', 'PUT', 'PATCH', 'DELETE', 'POST', 'OPTIONS']],\n  ['mode', ['same-origin', 'cors', 'navigate', 'no-cors']],\n  ['redirect', ['error', 'follow', 'manual']],\n  ['referrer', 'string'],\n  ['signal', 'AbortSignal'],\n  ['controller', 'AbortController'],\n  [\n    'referrerPolicy',\n    [\n      '',\n      'same-origin',\n      'no-referrer',\n      'no-referrer-when-downgrade',\n      'origin',\n      'origin-when-cross-origin',\n      'strict-origin',\n      'strict-origin-when-cross-origin',\n      'unsafe-url',\n    ],\n  ],\n]);\n\nconst IS_FROZEN = Symbol('FROZEN');\n\nfunction freezeHeaders(headers: Headers | ImmutableHeaders): ImmutableHeaders {\n  headers.delete =\n    headers.set =\n    headers.append =\n      () => {\n        throw new Error(`Cannot Mutate Immutatable Headers, use headers.clone to get a copy`);\n      };\n  (headers as ImmutableHeaders).clone = () => {\n    return new Headers([...headers.entries()]);\n  };\n  return headers as ImmutableHeaders;\n}\n\nexport function deepFreeze<T = unknown>(value: T): T {\n  if (value && value[IS_FROZEN]) {\n    return value;\n  }\n  const _type = typeof value;\n  switch (_type) {\n    case 'boolean':\n    case 'string':\n    case 'number':\n    case 'symbol':\n    case 'undefined':\n    case 'bigint':\n      return value;\n    case 'function':\n      throw new Error(`Cannot deep-freeze a function`);\n    case 'object': {\n      const _niceType = niceTypeOf(value);\n      switch (_niceType) {\n        case 'array': {\n          if (value[Symbol.for('Collection')]) {\n            return value;\n          }\n          const arr = (value as unknown[]).map(deepFreeze);\n          arr[IS_FROZEN] = true;\n          return Object.freeze(arr) as T;\n        }\n        case 'null':\n          return value;\n        case 'object':\n          Object.keys(value as object).forEach((key) => {\n            try {\n              (value as object)[key] = deepFreeze((value as object)[key]) as object;\n            } catch {\n              // continue\n            }\n          });\n          value[IS_FROZEN] = true;\n          return Object.freeze(value);\n        case 'headers':\n          return freezeHeaders(value as Headers) as T;\n        case 'Collection':\n        case 'Store':\n        case 'AbortSignal':\n          return value;\n        case 'date':\n        case 'map':\n        case 'set':\n        case 'error':\n        case 'stream':\n        default:\n          // eslint-disable-next-line no-console\n          // console.log(`Cannot deep-freeze ${_niceType}`);\n          return value;\n      }\n    }\n  }\n}\n\nfunction isMaybeContext(request: unknown) {\n  if (request && typeof request === 'object') {\n    const keys = Object.keys(request);\n    if (keys.length === 1 && keys[0] === 'request') {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction niceTypeOf(v: unknown) {\n  if (v === null) {\n    return 'null';\n  }\n  if (typeof v === 'string') {\n    return v ? 'non-empty-string' : 'empty-string';\n  }\n  if (!v) {\n    return typeof v;\n  }\n  if (Array.isArray(v)) {\n    return 'array';\n  }\n  if (v instanceof Date) {\n    return 'date';\n  }\n  if (v instanceof Map) {\n    return 'map';\n  }\n  if (v instanceof Set) {\n    return 'set';\n  }\n  if (v instanceof Error) {\n    return 'error';\n  }\n  if (v instanceof ReadableStream || v instanceof WritableStream || v instanceof TransformStream) {\n    return 'stream';\n  }\n  if (v instanceof Headers) {\n    return 'headers';\n  }\n  if (typeof v === 'object' && v.constructor && v.constructor.name !== 'Object') {\n    return v.constructor.name;\n  }\n  return typeof v;\n}\n\nfunction validateKey(key: string, value: unknown, errors: string[]) {\n  const schema = ValidKeys.get(key);\n  if (!schema && !IgnoredKeys.has(key)) {\n    errors.push(`InvalidKey: '${key}'`);\n    return;\n  }\n  if (schema) {\n    if (schema === BODY_TYPES) {\n      if (typeof value === 'string' || value instanceof ReadableStream) {\n        return;\n      }\n      let type = niceTypeOf(value);\n      if (schema.klass.includes(type)) {\n        return;\n      }\n      errors.push(\n        `InvalidValue: key 'body' should be a string or one of '${schema.klass.join(\"', '\")}', received ${\n          '<a value of type ' + niceTypeOf(value) + '>'\n        }`\n      );\n      return;\n    }\n    if (Array.isArray(schema)) {\n      if (!schema.includes(value as string)) {\n        errors.push(\n          `InvalidValue: key ${key} should be a one of '${schema.join(\"', '\")}', received ${\n            typeof value === 'string' ? value : '<a value of type ' + niceTypeOf(value) + '>'\n          }`\n        );\n      }\n      return;\n    } else if (schema === 'json') {\n      try {\n        JSON.stringify(value);\n      } catch (e) {\n        errors.push(\n          `InvalidValue: key ${key} should be a JSON serializable value, but failed to serialize with Error - ${\n            (e as Error).message\n          }`\n        );\n      }\n      return;\n    } else if (schema === 'headers') {\n      if (!(value instanceof Headers)) {\n        errors.push(`InvalidValue: key ${key} should be an instance of Headers, received ${niceTypeOf(value)}`);\n      }\n      return;\n    } else if (schema === 'record') {\n      const _type = typeof value;\n      // record must extend plain object or Object.create(null)\n      if (!value || _type !== 'object' || (value.constructor && value.constructor !== Object)) {\n        errors.push(\n          `InvalidValue: key ${key} should be a dictionary of string keys to string values, received ${niceTypeOf(\n            value\n          )}`\n        );\n        return;\n      }\n      const keys = Object.keys(value);\n      keys.forEach((k) => {\n        let v: unknown = value[k];\n        if (typeof k !== 'string') {\n          errors.push(`\\tThe key ${String(k)} on ${key} should be a string key`);\n        } else if (typeof v !== 'string') {\n          errors.push(`\\tThe value of ${key}.${k} should be a string not ${niceTypeOf(v)}`);\n        }\n      });\n      return;\n    } else if (schema === 'string') {\n      if (typeof value !== 'string' || value.length === 0) {\n        errors.push(\n          `InvalidValue: key ${key} should be a non-empty string, received ${\n            typeof value === 'string' ? \"''\" : typeof value\n          }`\n        );\n      }\n      return;\n    } else if (schema === 'object') {\n      if (!value || Array.isArray(value) || typeof value !== 'object') {\n        errors.push(`InvalidValue: key ${key} should be an object`);\n      }\n      return;\n    } else if (schema === 'boolean') {\n      if (typeof value !== 'boolean') {\n        errors.push(`InvalidValue: key ${key} should be a boolean, received ${typeof value}`);\n      }\n      return;\n    } else if (schema === 'array') {\n      if (!Array.isArray(value)) {\n        errors.push(`InvalidValue: key ${key} should be an array, received ${typeof value}`);\n      }\n      return;\n    }\n  }\n}\n\nconst IgnoredKeys = new Set<string>([]);\n\nexport function assertValidRequest(\n  request: RequestInfo | Context,\n  isTopLevel: boolean\n): asserts request is RequestInfo {\n  if (DEBUG) {\n    // handle basic shape\n    if (!request) {\n      throw new Error(\n        `Expected ${\n          isTopLevel ? 'RequestManager.request' : 'next'\n        }(<request>) to be called with a request, but none was provided.`\n      );\n    }\n    if (Array.isArray(request) || typeof request !== 'object') {\n      throw new Error(\n        `The \\`request\\` passed to \\`${\n          isTopLevel ? 'RequestManager.request' : 'next'\n        }(<request>)\\` should be an object, received \\`${niceTypeOf(request)}\\``\n      );\n    }\n    if (Object.keys(request).length === 0) {\n      throw new Error(\n        `The \\`request\\` passed to \\`${\n          isTopLevel ? 'RequestManager.request' : 'next'\n        }(<request>)\\` was empty (\\`{}\\`). Requests need at least one valid key.`\n      );\n    }\n\n    // handle accidentally passing context entirely\n    if (request instanceof Context) {\n      throw new Error(\n        `Expected a request passed to \\`${\n          isTopLevel ? 'RequestManager.request' : 'next'\n        }(<request>)\\` but received the previous handler's context instead`\n      );\n    }\n    // handle Object.assign({}, context);\n    if (isMaybeContext(request)) {\n      throw new Error(\n        `Expected a request passed to \\`${\n          isTopLevel ? 'RequestManager.request' : 'next'\n        }(<request>)\\` but received an object with a request key instead.`\n      );\n    }\n\n    // handle schema\n    const keys = Object.keys(request);\n    const validationErrors = [];\n    const isLegacyRequest: boolean = Boolean('op' in request && !request.url);\n    keys.forEach((key) => {\n      if (isLegacyRequest && key === 'data') {\n        return;\n      }\n      validateKey(key, request[key], validationErrors);\n    });\n    if (validationErrors.length) {\n      const error: Error & { errors: string[] } = new Error(\n        `Invalid Request passed to \\`${\n          isTopLevel ? 'RequestManager.request' : 'next'\n        }(<request>)\\`.\\n\\nThe following issues were found:\\n\\n\\t${validationErrors.join('\\n\\t')}`\n      ) as Error & { errors: string[] };\n      error.errors = validationErrors;\n      throw error;\n    }\n  }\n}\n","import { StructuredDocument } from '@ember-data/types/cache/document';\n\nimport type { ContextOwner } from './context';\nimport type { Deferred, DeferredFuture, Future } from './types';\n\nconst IS_FUTURE = Symbol('IS_FUTURE');\n\nexport function isFuture<T>(maybe: T | Future<T> | Promise<T>): maybe is Future<T> {\n  return maybe[IS_FUTURE] === true;\n}\n\nexport function createDeferred<T>(): Deferred<T> {\n  let resolve!: (v: T) => void;\n  let reject!: (v: unknown) => void;\n  let promise = new Promise<T>((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n  return { resolve, reject, promise };\n}\n\nexport function upgradePromise<T>(promise: Promise<StructuredDocument<T>>, future: Future<T>): Future<T> {\n  (promise as Future<T>)[IS_FUTURE] = true;\n  // eslint-disable-next-line @typescript-eslint/unbound-method\n  (promise as Future<T>).getStream = future.getStream;\n  // eslint-disable-next-line @typescript-eslint/unbound-method\n  (promise as Future<T>).abort = future.abort;\n  // eslint-disable-next-line @typescript-eslint/unbound-method\n  (promise as Future<T>).onFinalize = future.onFinalize;\n\n  return promise as Future<T>;\n}\n\nexport function createFuture<T>(owner: ContextOwner): DeferredFuture<T> {\n  const deferred = createDeferred<T>() as unknown as DeferredFuture<T>;\n  let { promise } = deferred;\n  let cbs: Array<() => void> | undefined;\n  promise = promise.finally(() => {\n    owner.resolveStream();\n    if (cbs) {\n      cbs.forEach((cb) => cb());\n    }\n  }) as Future<T>;\n  promise.onFinalize = (fn: () => void) => {\n    cbs = cbs || [];\n    cbs.push(fn);\n  };\n  promise[IS_FUTURE] = true;\n  promise.getStream = () => {\n    return owner.getStream();\n  };\n  promise.abort = (reason?: string) => {\n    owner.abort(enhanceReason(reason));\n  };\n  deferred.promise = promise;\n  return deferred;\n}\n\nfunction enhanceReason(reason?: string) {\n  return new DOMException(reason || 'The user aborted a request.', 'AbortError');\n}\n","import { DEBUG } from '@ember-data/env';\n\nimport { deepFreeze } from './debug';\nimport { createDeferred } from './future';\nimport type { Deferred, GodContext, ImmutableHeaders, ImmutableRequestInfo, RequestInfo, ResponseInfo } from './types';\n\nexport function cloneResponseProperties(response: Response): ResponseInfo {\n  const { headers, ok, redirected, status, statusText, type, url } = response;\n  (headers as ImmutableHeaders).clone = () => {\n    return new Headers(headers);\n  };\n  (headers as ImmutableHeaders).toJSON = () => {\n    return Array.from(headers);\n  };\n  return {\n    headers: headers as ImmutableHeaders,\n    ok,\n    redirected,\n    status,\n    statusText,\n    type,\n    url,\n  };\n}\n\nexport class ContextOwner {\n  hasSetStream = false;\n  hasSetResponse = false;\n  hasSubscribers = false;\n  stream: Deferred<ReadableStream | null> = createDeferred<ReadableStream | null>();\n  response: ResponseInfo | null = null;\n  declare request: ImmutableRequestInfo;\n  declare enhancedRequest: ImmutableRequestInfo;\n  nextCalled: number = 0;\n  declare god: GodContext;\n  declare controller: AbortController;\n  declare requestId: number;\n\n  constructor(request: RequestInfo, god: GodContext) {\n    this.requestId = god.id;\n    this.controller = request.controller || god.controller;\n    if (request.controller) {\n      if (request.controller !== god.controller) {\n        god.controller.signal.addEventListener('abort', () => {\n          this.controller.abort(god.controller.signal.reason);\n        });\n      }\n      delete request.controller;\n    }\n    let enhancedRequest: ImmutableRequestInfo = Object.assign(\n      { signal: this.controller.signal },\n      request\n    ) as ImmutableRequestInfo;\n    if (DEBUG) {\n      if (!request?.cacheOptions?.[Symbol.for('ember-data:skip-cache')]) {\n        request = deepFreeze(request) as ImmutableRequestInfo;\n        enhancedRequest = deepFreeze(enhancedRequest);\n      }\n    } else {\n      if (request.headers) {\n        (request.headers as ImmutableHeaders).clone = () => {\n          return new Headers([...request.headers!.entries()]);\n        };\n        (request.headers as ImmutableHeaders).toJSON = () => {\n          return [...request.headers!.entries()];\n        };\n      }\n    }\n    this.enhancedRequest = enhancedRequest;\n    this.request = request as ImmutableRequestInfo;\n    this.god = god;\n    this.stream.promise = this.stream.promise.then((stream: ReadableStream | null) => {\n      if (this.god.stream === stream && this.hasSubscribers) {\n        this.god.stream = null;\n      }\n      return stream;\n    });\n  }\n\n  getResponse(): ResponseInfo | null {\n    if (this.hasSetResponse) {\n      return this.response;\n    }\n    if (this.nextCalled === 1) {\n      return this.god.response;\n    }\n    return null;\n  }\n  getStream(): Promise<ReadableStream | null> {\n    this.hasSubscribers = true;\n    return this.stream.promise;\n  }\n  abort(reason: DOMException) {\n    this.controller.abort(reason);\n  }\n\n  setStream(stream: ReadableStream | Promise<ReadableStream | null> | null) {\n    if (!this.hasSetStream) {\n      this.hasSetStream = true;\n\n      if (!(stream instanceof Promise)) {\n        this.god.stream = stream;\n      }\n      // @ts-expect-error\n      this.stream.resolve(stream);\n    }\n  }\n\n  resolveStream() {\n    this.setStream(this.nextCalled === 1 ? this.god.stream : null);\n  }\n\n  setResponse(response: ResponseInfo | Response | null) {\n    if (this.hasSetResponse) {\n      if (DEBUG) {\n        throw new Error(`Cannot setResponse when a response has already been set`);\n      }\n      return;\n    }\n    this.hasSetResponse = true;\n    if (response instanceof Response) {\n      let responseData = cloneResponseProperties(response);\n\n      if (DEBUG) {\n        responseData = deepFreeze(responseData);\n      }\n      this.response = responseData;\n      this.god.response = responseData;\n    } else {\n      this.response = response;\n      this.god.response = response;\n    }\n  }\n}\n\nexport class Context {\n  #owner: ContextOwner;\n  declare request: ImmutableRequestInfo;\n  declare id: number;\n\n  constructor(owner: ContextOwner) {\n    this.id = owner.requestId;\n    this.#owner = owner;\n    this.request = owner.enhancedRequest;\n  }\n  setStream(stream: ReadableStream | Promise<ReadableStream | null>) {\n    this.#owner.setStream(stream);\n  }\n  setResponse(response: ResponseInfo | Response | null) {\n    this.#owner.setResponse(response);\n  }\n}\nexport type HandlerRequestContext = Context;\n"],"names":["BODY_TYPES","type","klass","ValidKeys","Map","IS_FROZEN","Symbol","freezeHeaders","headers","delete","set","append","Error","clone","Headers","entries","deepFreeze","value","_type","_niceType","niceTypeOf","for","arr","map","Object","freeze","keys","forEach","key","isMaybeContext","request","length","v","Array","isArray","Date","Set","ReadableStream","WritableStream","TransformStream","constructor","name","validateKey","errors","schema","get","IgnoredKeys","has","push","includes","join","JSON","stringify","e","message","k","String","assertValidRequest","isTopLevel","macroCondition","getOwnConfig","env","DEBUG","Context","validationErrors","isLegacyRequest","Boolean","url","error","IS_FUTURE","isFuture","maybe","createDeferred","resolve","reject","promise","Promise","res","rej","upgradePromise","future","getStream","abort","onFinalize","createFuture","owner","deferred","cbs","finally","resolveStream","cb","fn","reason","enhanceReason","DOMException","cloneResponseProperties","response","ok","redirected","status","statusText","toJSON","from","ContextOwner","god","hasSetStream","hasSetResponse","hasSubscribers","stream","nextCalled","requestId","id","controller","signal","addEventListener","enhancedRequest","assign","cacheOptions","then","getResponse","setStream","setResponse","Response","responseData","_owner","_classPrivateFieldLooseKey","defineProperty","writable","_classPrivateFieldLooseBase"],"mappings":"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","x_google_ignoreList":[0,1]}