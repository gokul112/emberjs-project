{"version":3,"file":"model-b638e17c.js","sources":["../src/-private/util.ts","../../../node_modules/.pnpm/@babel+runtime@7.22.15/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty.js","../../../node_modules/.pnpm/@babel+runtime@7.22.15/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor.js","../src/-private/errors.ts","../src/-private/many-array.ts","../src/-private/promise-proxy-base.js","../src/-private/promise-belongs-to.ts","../src/-private/promise-many-array.ts","../src/-private/debug/assert-polymorphic-type.js","../src/-private/references/belongs-to.ts","../src/-private/references/has-many.ts","../src/-private/legacy-relationships-support.ts","../src/-private/notify-changes.ts","../src/-private/record-state.ts","../src/-private/model.js"],"sourcesContent":["import { deprecate } from '@ember/debug';\nimport { dasherize } from '@ember/string';\n\nimport { DEPRECATE_NON_STRICT_TYPES } from '@ember-data/deprecations';\n\nexport type DecoratorPropertyDescriptor = (PropertyDescriptor & { initializer?: () => unknown }) | undefined;\n\nexport function isElementDescriptor(args: unknown[]): args is [object, string, DecoratorPropertyDescriptor] {\n  let [maybeTarget, maybeKey, maybeDesc] = args;\n\n  return (\n    // Ensure we have the right number of args\n    args.length === 3 &&\n    // Make sure the target is a class or object (prototype)\n    (typeof maybeTarget === 'function' || (typeof maybeTarget === 'object' && maybeTarget !== null)) &&\n    // Make sure the key is a string\n    typeof maybeKey === 'string' &&\n    // Make sure the descriptor is the right shape\n    ((typeof maybeDesc === 'object' &&\n      maybeDesc !== null &&\n      'enumerable' in maybeDesc &&\n      'configurable' in maybeDesc) ||\n      // TS compatibility\n      maybeDesc === undefined)\n  );\n}\n\ntype DataDecorator = (target: object, key: string, desc?: DecoratorPropertyDescriptor) => DecoratorPropertyDescriptor;\ntype DataDecoratorFactory = (...args: unknown[]) => DataDecorator;\n\nexport function computedMacroWithOptionalParams(fn: DataDecorator | DataDecoratorFactory) {\n  return (...maybeDesc: unknown[]) =>\n    isElementDescriptor(maybeDesc)\n      ? (fn as DataDecoratorFactory)()(...maybeDesc)\n      : fn(...(maybeDesc as [object, string, DecoratorPropertyDescriptor?]));\n}\n\nexport function normalizeModelName(type: string): string {\n  if (DEPRECATE_NON_STRICT_TYPES) {\n    const result = dasherize(type);\n\n    deprecate(\n      `The resource type '${type}' is not normalized. Update your application code to use '${result}' instead of '${type}'.`,\n      result === type,\n      {\n        id: 'ember-data:deprecate-non-strict-types',\n        until: '6.0',\n        for: 'ember-data',\n        since: {\n          available: '5.3',\n          enabled: '5.3',\n        },\n      }\n    );\n\n    return result;\n  }\n\n  return type;\n}\n","export default function _initializerDefineProperty(target, property, descriptor, context) {\n  if (!descriptor) return;\n  Object.defineProperty(target, property, {\n    enumerable: descriptor.enumerable,\n    configurable: descriptor.configurable,\n    writable: descriptor.writable,\n    value: descriptor.initializer ? descriptor.initializer.call(context) : void 0\n  });\n}","export default function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object.keys(descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n  if (desc.initializer === void 0) {\n    Object.defineProperty(target, property, desc);\n    desc = null;\n  }\n  return desc;\n}","import { A, type NativeArray } from '@ember/array';\nimport ArrayProxy from '@ember/array/proxy';\nimport { computed, get } from '@ember/object';\nimport { mapBy, not } from '@ember/object/computed';\n\nimport type RecordState from './record-state';\n\ntype ValidationError = {\n  attribute: string;\n  message: string;\n};\n/**\n  @module @ember-data/model\n*/\ninterface ArrayProxyWithCustomOverrides<T> extends Omit<ArrayProxy<T>, 'clear' | 'content'> {\n  // Omit causes `content` to be merged with the class def for ArrayProxy\n  // which then causes it to be seen as a property, disallowing defining it\n  // as an accessor. This restores our ability to define it as an accessor.\n  content: NativeArray<T>;\n  clear(): void;\n  _has(name: string): boolean;\n}\n\n// we force the type here to our own construct because mixin and extend patterns\n// lose generic signatures. We also do this because we need to Omit `clear` from\n// the type of ArrayProxy as we override it's signature.\nconst ArrayProxyWithCustomOverrides = ArrayProxy as unknown as new <T>() => ArrayProxyWithCustomOverrides<T>;\n\n/**\n  Holds validation errors for a given record, organized by attribute names.\n\n  This class is not directly instantiable.\n\n  Every `Model` has an `errors` property that is an instance of\n  `Errors`. This can be used to display validation error\n  messages returned from the server when a `record.save()` rejects.\n\n  For Example, if you had a `User` model that looked like this:\n\n  ```app/models/user.js\n  import Model, { attr } from '@ember-data/model';\n\n  export default class UserModel extends Model {\n    @attr('string') username;\n    @attr('string') email;\n  }\n  ```\n  And you attempted to save a record that did not validate on the backend:\n\n  ```javascript\n  let user = store.createRecord('user', {\n    username: 'tomster',\n    email: 'invalidEmail'\n  });\n  user.save();\n  ```\n\n  Your backend would be expected to return an error response that described\n  the problem, so that error messages can be generated on the app.\n\n  API responses will be translated into instances of `Errors` differently,\n  depending on the specific combination of adapter and serializer used. You\n  may want to check the documentation or the source code of the libraries\n  that you are using, to know how they expect errors to be communicated.\n\n  Errors can be displayed to the user by accessing their property name\n  to get an array of all the error objects for that property. Each\n  error object is a JavaScript object with two keys:\n\n  - `message` A string containing the error message from the backend\n  - `attribute` The name of the property associated with this error message\n\n  ```handlebars\n  <label>Username: <Input @value={{@model.username}} /> </label>\n  {{#each @model.errors.username as |error|}}\n    <div class=\"error\">\n      {{error.message}}\n    </div>\n  {{/each}}\n\n  <label>Email: <Input @value={{@model.email}} /> </label>\n  {{#each @model.errors.email as |error|}}\n    <div class=\"error\">\n      {{error.message}}\n    </div>\n  {{/each}}\n  ```\n\n  You can also access the special `messages` property on the error\n  object to get an array of all the error strings.\n\n  ```handlebars\n  {{#each @model.errors.messages as |message|}}\n    <div class=\"error\">\n      {{message}}\n    </div>\n  {{/each}}\n  ```\n\n  @class Errors\n  @public\n  @extends Ember.ArrayProxy\n */\nexport default class Errors extends ArrayProxyWithCustomOverrides<ValidationError> {\n  declare __record: { currentState: RecordState };\n  /**\n    @property errorsByAttributeName\n    @type {MapWithDefault}\n    @private\n  */\n  @computed()\n  get errorsByAttributeName(): Map<string, NativeArray<ValidationError>> {\n    return new Map();\n  }\n\n  /**\n    Returns errors for a given attribute\n\n    ```javascript\n    let user = store.createRecord('user', {\n      username: 'tomster',\n      email: 'invalidEmail'\n    });\n    user.save().catch(function(){\n      user.errors.errorsFor('email'); // returns:\n      // [{attribute: \"email\", message: \"Doesn't look like a valid email.\"}]\n    });\n    ```\n\n    @method errorsFor\n    @public\n    @param {String} attribute\n    @return {Array}\n  */\n  errorsFor(attribute: string): NativeArray<ValidationError> {\n    let map = this.errorsByAttributeName;\n\n    let errors = map.get(attribute);\n\n    if (errors === undefined) {\n      errors = A<ValidationError>();\n      map.set(attribute, errors);\n    }\n\n    // Errors may be a native array with extensions turned on. Since we access\n    // the array via a method, and not a computed or using `Ember.get`, it does\n    // not entangle properly with autotracking, so we entangle manually by\n    // getting the `[]` property.\n    get(errors, '[]');\n\n    return errors;\n  }\n\n  /**\n    An array containing all of the error messages for this\n    record. This is useful for displaying all errors to the user.\n\n    ```handlebars\n    {{#each @model.errors.messages as |message|}}\n      <div class=\"error\">\n        {{message}}\n      </div>\n    {{/each}}\n    ```\n\n    @property messages\n    @public\n    @type {Array}\n  */\n  @mapBy('content', 'message')\n  declare messages: string[];\n\n  /**\n    @property content\n    @type {Array}\n    @private\n  */\n  @computed()\n  get content(): NativeArray<ValidationError> {\n    return A();\n  }\n\n  /**\n    @method unknownProperty\n    @private\n  */\n  unknownProperty(attribute: string) {\n    let errors = this.errorsFor(attribute);\n    if (errors.length === 0) {\n      return undefined;\n    }\n    return errors;\n  }\n\n  /**\n    Total number of errors.\n\n    @property length\n    @type {Number}\n    @public\n    @readOnly\n  */\n\n  /**\n    `true` if we have no errors.\n\n    @property isEmpty\n    @type {Boolean}\n    @public\n    @readOnly\n  */\n  @not('length')\n  declare isEmpty: boolean;\n\n  /**\n   Manually adds errors to the record. This will trigger the `becameInvalid` event/ lifecycle method on\n    the record and transition the record into an `invalid` state.\n\n   Example\n   ```javascript\n    let errors = user.errors;\n\n    // add multiple errors\n    errors.add('password', [\n      'Must be at least 12 characters',\n      'Must contain at least one symbol',\n      'Cannot contain your name'\n    ]);\n\n    errors.errorsFor('password');\n    // =>\n    // [\n    //   { attribute: 'password', message: 'Must be at least 12 characters' },\n    //   { attribute: 'password', message: 'Must contain at least one symbol' },\n    //   { attribute: 'password', message: 'Cannot contain your name' },\n    // ]\n\n    // add a single error\n    errors.add('username', 'This field is required');\n\n    errors.errorsFor('username');\n    // =>\n    // [\n    //   { attribute: 'username', message: 'This field is required' },\n    // ]\n   ```\n    @method add\n    @public\n    @param {string} attribute - the property name of an attribute or relationship\n    @param {string[]|string} messages - an error message or array of error messages for the attribute\n   */\n  add(attribute: string, messages: string[] | string): void {\n    const errors = this._findOrCreateMessages(attribute, messages);\n    this.addObjects(errors);\n\n    this.errorsFor(attribute).addObjects(errors);\n    this.__record.currentState.notify('isValid');\n\n    this.notifyPropertyChange(attribute);\n  }\n\n  /**\n    @method _findOrCreateMessages\n    @private\n  */\n  _findOrCreateMessages(attribute: string, messages: string | string[]): ValidationError[] {\n    let errors = this.errorsFor(attribute);\n    let messagesArray = Array.isArray(messages) ? messages : [messages];\n    let _messages: ValidationError[] = new Array(messagesArray.length) as ValidationError[];\n\n    for (let i = 0; i < messagesArray.length; i++) {\n      let message = messagesArray[i];\n      let err = errors.findBy('message', message);\n      if (err) {\n        _messages[i] = err;\n      } else {\n        _messages[i] = {\n          attribute: attribute,\n          message,\n        };\n      }\n    }\n\n    return _messages;\n  }\n\n  /**\n   Manually removes all errors for a given member from the record.\n     This will transition the record into a `valid` state, and\n    triggers the `becameValid` event and lifecycle method.\n\n   Example:\n\n   ```javascript\n    let errors = user.errors;\n    errors.add('phone', ['error-1', 'error-2']);\n\n    errors.errorsFor('phone');\n    // =>\n    // [\n    //   { attribute: 'phone', message: 'error-1' },\n    //   { attribute: 'phone', message: 'error-2' },\n    // ]\n\n    errors.remove('phone');\n\n    errors.errorsFor('phone');\n    // => undefined\n   ```\n   @method remove\n    @public\n   @param {string} member - the property name of an attribute or relationship\n   */\n  remove(attribute: string) {\n    if (this.isEmpty) {\n      return;\n    }\n\n    let content = this.rejectBy('attribute', attribute);\n    this.content.setObjects(content);\n\n    // Although errorsByAttributeName.delete is technically enough to sync errors state, we also\n    // must mutate the array as well for autotracking\n    let errors = this.errorsFor(attribute);\n    for (let i = 0; i < errors.length; i++) {\n      if (errors[i].attribute === attribute) {\n        // .replace from Ember.NativeArray is necessary. JS splice will not work.\n        errors.replace(i, 1);\n      }\n    }\n    this.errorsByAttributeName.delete(attribute);\n\n    this.__record.currentState.notify('isValid');\n    this.notifyPropertyChange(attribute);\n    this.notifyPropertyChange('length');\n  }\n\n  /**\n   Manually clears all errors for the record.\n     This will transition the record into a `valid` state, and\n     will trigger the `becameValid` event and lifecycle method.\n\n  Example:\n\n   ```javascript\n   let errors = user.errors;\n   errors.add('username', ['error-a']);\n   errors.add('phone', ['error-1', 'error-2']);\n\n   errors.errorsFor('username');\n   // =>\n   // [\n   //   { attribute: 'username', message: 'error-a' },\n   // ]\n\n   errors.errorsFor('phone');\n   // =>\n   // [\n   //   { attribute: 'phone', message: 'error-1' },\n   //   { attribute: 'phone', message: 'error-2' },\n   // ]\n\n   errors.clear();\n\n   errors.errorsFor('username');\n   // => undefined\n\n   errors.errorsFor('phone');\n   // => undefined\n\n   errors.messages\n   // => []\n   ```\n   @method clear\n   @public\n   */\n  clear(): void {\n    if (this.isEmpty) {\n      return;\n    }\n\n    let errorsByAttributeName = this.errorsByAttributeName;\n    let attributes: string[] = [];\n\n    errorsByAttributeName.forEach(function (_, attribute) {\n      attributes.push(attribute);\n    });\n\n    errorsByAttributeName.clear();\n    attributes.forEach((attribute) => {\n      this.notifyPropertyChange(attribute);\n    });\n\n    this.__record.currentState.notify('isValid');\n    super.clear();\n  }\n\n  /**\n    Checks if there are error messages for the given attribute.\n\n    ```app/controllers/user/edit.js\n    import Controller from '@ember/controller';\n    import { action } from '@ember/object';\n\n    export default class UserEditController extends Controller {\n      @action\n      save(user) {\n        if (user.errors.has('email')) {\n          return alert('Please update your email before attempting to save.');\n        }\n        user.save();\n      }\n    }\n    ```\n\n    @method has\n    @public\n    @param {String} attribute\n    @return {Boolean} true if there some errors on given attribute\n  */\n  has(attribute: string): boolean {\n    return this.errorsFor(attribute).length > 0;\n  }\n}\n","/**\n  @module @ember-data/store\n*/\nimport { assert } from '@ember/debug';\n\nimport type Store from '@ember-data/store';\nimport {\n  IDENTIFIER_ARRAY_TAG,\n  MUTATE,\n  notifyArray,\n  RecordArray,\n  recordIdentifierFor,\n  SOURCE,\n} from '@ember-data/store/-private';\nimport { IdentifierArrayCreateOptions } from '@ember-data/store/-private/record-arrays/identifier-array';\nimport type { CreateRecordProperties } from '@ember-data/store/-private/store-service';\nimport type { Cache } from '@ember-data/types/q/cache';\nimport type { ModelSchema } from '@ember-data/types/q/ds-model';\nimport type { Links, PaginationLinks } from '@ember-data/types/q/ember-data-json-api';\nimport type { StableRecordIdentifier } from '@ember-data/types/q/identifier';\nimport type { RecordInstance } from '@ember-data/types/q/record-instance';\nimport type { FindOptions } from '@ember-data/types/q/store';\n\nimport { LegacySupport } from './legacy-relationships-support';\n\nexport interface ManyArrayCreateArgs {\n  identifiers: StableRecordIdentifier[];\n  type: string;\n  store: Store;\n  allowMutation: boolean;\n  manager: LegacySupport;\n\n  identifier: StableRecordIdentifier;\n  cache: Cache;\n  meta: Record<string, unknown> | null;\n  links: Links | PaginationLinks | null;\n  key: string;\n  isPolymorphic: boolean;\n  isAsync: boolean;\n  _inverseIsAsync: boolean;\n  isLoaded: boolean;\n}\n/**\n  A `ManyArray` is a `MutableArray` that represents the contents of a has-many\n  relationship.\n\n  The `ManyArray` is instantiated lazily the first time the relationship is\n  requested.\n\n  This class is not intended to be directly instantiated by consuming applications.\n\n  ### Inverses\n\n  Often, the relationships in Ember Data applications will have\n  an inverse. For example, imagine the following models are\n  defined:\n\n  ```app/models/post.js\n  import Model, { hasMany } from '@ember-data/model';\n\n  export default class PostModel extends Model {\n    @hasMany('comment') comments;\n  }\n  ```\n\n  ```app/models/comment.js\n  import Model, { belongsTo } from '@ember-data/model';\n\n  export default class CommentModel extends Model {\n    @belongsTo('post') post;\n  }\n  ```\n\n  If you created a new instance of `Post` and added\n  a `Comment` record to its `comments` has-many\n  relationship, you would expect the comment's `post`\n  property to be set to the post that contained\n  the has-many.\n\n  We call the record to which a relationship belongs-to the\n  relationship's _owner_.\n\n  @class ManyArray\n  @public\n*/\nexport default class RelatedCollection extends RecordArray {\n  declare isAsync: boolean;\n  /**\n    The loading state of this array\n\n    @property {Boolean} isLoaded\n    @public\n    */\n\n  declare isLoaded: boolean;\n  /**\n    `true` if the relationship is polymorphic, `false` otherwise.\n\n    @property {Boolean} isPolymorphic\n    @private\n    */\n  declare isPolymorphic: boolean;\n  declare _inverseIsAsync: boolean;\n  /**\n    Metadata associated with the request for async hasMany relationships.\n\n    Example\n\n    Given that the server returns the following JSON payload when fetching a\n    hasMany relationship:\n\n    ```js\n    {\n      \"comments\": [{\n        \"id\": 1,\n        \"comment\": \"This is the first comment\",\n      }, {\n    // ...\n      }],\n\n      \"meta\": {\n        \"page\": 1,\n        \"total\": 5\n      }\n    }\n    ```\n\n    You can then access the meta data via the `meta` property:\n\n    ```js\n    let comments = await post.comments;\n    let meta = comments.meta;\n\n    // meta.page => 1\n    // meta.total => 5\n    ```\n\n    @property {Object | null} meta\n    @public\n    */\n  declare meta: Record<string, unknown> | null;\n  /**\n     * Retrieve the links for this relationship\n     *\n     @property {Object | null} links\n     @public\n     */\n  declare links: Links | PaginationLinks | null;\n  declare identifier: StableRecordIdentifier;\n  declare cache: Cache;\n  // @ts-expect-error\n  declare _manager: LegacySupport;\n  declare store: Store;\n  declare key: string;\n  declare type: ModelSchema;\n\n  constructor(options: ManyArrayCreateArgs) {\n    super(options as unknown as IdentifierArrayCreateOptions);\n    this.isLoaded = options.isLoaded || false;\n    this.isAsync = options.isAsync || false;\n    this.isPolymorphic = options.isPolymorphic || false;\n    this.identifier = options.identifier;\n    this.key = options.key;\n  }\n\n  [MUTATE](prop: string, args: unknown[], result?: unknown) {\n    switch (prop) {\n      case 'length 0': {\n        this._manager.mutate({\n          op: 'replaceRelatedRecords',\n          record: this.identifier,\n          field: this.key,\n          value: [],\n        });\n        break;\n      }\n      case 'replace cell': {\n        const [index, prior, value] = args as [number, StableRecordIdentifier, StableRecordIdentifier];\n        this._manager.mutate({\n          op: 'replaceRelatedRecord',\n          record: this.identifier,\n          field: this.key,\n          value,\n          prior,\n          index,\n        });\n        break;\n      }\n      case 'push':\n        this._manager.mutate({\n          op: 'addToRelatedRecords',\n          record: this.identifier,\n          field: this.key,\n          value: extractIdentifiersFromRecords(args),\n        });\n        break;\n      case 'pop':\n        if (result) {\n          this._manager.mutate({\n            op: 'removeFromRelatedRecords',\n            record: this.identifier,\n            field: this.key,\n            value: recordIdentifierFor(result as RecordInstance),\n          });\n        }\n        break;\n\n      case 'unshift':\n        this._manager.mutate({\n          op: 'addToRelatedRecords',\n          record: this.identifier,\n          field: this.key,\n          value: extractIdentifiersFromRecords(args),\n          index: 0,\n        });\n        break;\n\n      case 'shift':\n        if (result) {\n          this._manager.mutate({\n            op: 'removeFromRelatedRecords',\n            record: this.identifier,\n            field: this.key,\n            value: recordIdentifierFor(result as RecordInstance),\n            index: 0,\n          });\n        }\n        break;\n\n      case 'sort':\n        this._manager.mutate({\n          op: 'sortRelatedRecords',\n          record: this.identifier,\n          field: this.key,\n          value: (result as RecordInstance[]).map(recordIdentifierFor),\n        });\n        break;\n\n      case 'splice': {\n        const [start, removeCount, ...adds] = args as [number, number, RecordInstance];\n        // detect a full replace\n        if (removeCount > 0 && adds.length === this[SOURCE].length) {\n          this._manager.mutate({\n            op: 'replaceRelatedRecords',\n            record: this.identifier,\n            field: this.key,\n            value: extractIdentifiersFromRecords(adds),\n          });\n          return;\n        }\n        if (removeCount > 0) {\n          this._manager.mutate({\n            op: 'removeFromRelatedRecords',\n            record: this.identifier,\n            field: this.key,\n            value: (result as RecordInstance[]).map(recordIdentifierFor),\n            index: start,\n          });\n        }\n        if (adds?.length) {\n          this._manager.mutate({\n            op: 'addToRelatedRecords',\n            record: this.identifier,\n            field: this.key,\n            value: extractIdentifiersFromRecords(adds),\n            index: start,\n          });\n        }\n\n        break;\n      }\n      default:\n        assert(`unable to convert ${prop} into a transaction that updates the cache state for this record array`);\n    }\n  }\n\n  notify() {\n    const tag = this[IDENTIFIER_ARRAY_TAG];\n    tag.shouldReset = true;\n    // @ts-expect-error\n    notifyArray(this);\n  }\n\n  /**\n    Reloads all of the records in the manyArray. If the manyArray\n    holds a relationship that was originally fetched using a links url\n    Ember Data will revisit the original links url to repopulate the\n    relationship.\n\n    If the manyArray holds the result of a `store.query()` reload will\n    re-run the original query.\n\n    Example\n\n    ```javascript\n    let user = store.peekRecord('user', '1')\n    await login(user);\n\n    let permissions = await user.permissions;\n    await permissions.reload();\n    ```\n\n    @method reload\n    @public\n  */\n  reload(options?: FindOptions) {\n    // TODO this is odd, we don't ask the store for anything else like this?\n    return this._manager.reloadHasMany(this.key, options);\n  }\n\n  /**\n    Saves all of the records in the `ManyArray`.\n\n    Example\n\n    ```javascript\n    let inbox = await store.findRecord('inbox', '1');\n    let messages = await inbox.messages;\n    messages.forEach((message) => {\n      message.isRead = true;\n    });\n    messages.save();\n    ```\n\n    @method save\n    @public\n    @return {PromiseArray} promise\n  */\n\n  /**\n    Create a child record within the owner\n\n    @method createRecord\n    @public\n    @param {Object} hash\n    @return {Model} record\n  */\n  createRecord(hash: CreateRecordProperties): RecordInstance {\n    const { store } = this;\n    assert(`Expected modelName to be set`, this.modelName);\n    const record = store.createRecord(this.modelName, hash);\n    this.push(record);\n\n    return record;\n  }\n\n  destroy() {\n    super.destroy(false);\n  }\n}\nRelatedCollection.prototype.isAsync = false;\nRelatedCollection.prototype.isPolymorphic = false;\nRelatedCollection.prototype.identifier = null as unknown as StableRecordIdentifier;\nRelatedCollection.prototype.cache = null as unknown as Cache;\nRelatedCollection.prototype._inverseIsAsync = false;\nRelatedCollection.prototype.key = '';\nRelatedCollection.prototype.DEPRECATED_CLASS_NAME = 'ManyArray';\n\ntype PromiseProxyRecord = { then(): void; content: RecordInstance | null | undefined };\n\nfunction assertRecordPassedToHasMany(record: RecordInstance | PromiseProxyRecord) {\n  assert(\n    `All elements of a hasMany relationship must be instances of Model, you passed $${typeof record}`,\n    (function () {\n      try {\n        recordIdentifierFor(record);\n        return true;\n      } catch {\n        return false;\n      }\n    })()\n  );\n}\n\nfunction extractIdentifiersFromRecords(records: RecordInstance[]): StableRecordIdentifier[] {\n  return records.map(extractIdentifierFromRecord);\n}\n\nfunction extractIdentifierFromRecord(recordOrPromiseRecord: PromiseProxyRecord | RecordInstance) {\n  assertRecordPassedToHasMany(recordOrPromiseRecord);\n  return recordIdentifierFor(recordOrPromiseRecord);\n}\n","import PromiseProxyMixin from '@ember/object/promise-proxy-mixin';\nimport ObjectProxy from '@ember/object/proxy';\n\nexport const PromiseObject = ObjectProxy.extend(PromiseProxyMixin);\n","import { assert } from '@ember/debug';\nimport { computed } from '@ember/object';\nimport type PromiseProxyMixin from '@ember/object/promise-proxy-mixin';\nimport type ObjectProxy from '@ember/object/proxy';\nimport { cached } from '@glimmer/tracking';\n\nimport type Store from '@ember-data/store';\nimport type { RecordInstance } from '@ember-data/types/q/record-instance';\n\nimport { LegacySupport } from './legacy-relationships-support';\nimport { PromiseObject } from './promise-proxy-base';\nimport type BelongsToReference from './references/belongs-to';\n\nexport interface BelongsToProxyMeta {\n  key: string;\n  store: Store;\n  legacySupport: LegacySupport;\n  modelName: string;\n}\nexport interface BelongsToProxyCreateArgs {\n  promise: Promise<RecordInstance | null>;\n  content?: RecordInstance | null;\n  _belongsToState: BelongsToProxyMeta;\n}\n\ninterface PromiseObjectType<T> extends PromiseProxyMixin<T | null>, ObjectProxy<T> {\n  // eslint-disable-next-line @typescript-eslint/no-misused-new\n  new <PT>(...args: unknown[]): PromiseObjectType<PT>;\n}\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\ndeclare class PromiseObjectType<T> {}\n\nconst Extended: PromiseObjectType<RecordInstance> = PromiseObject as unknown as PromiseObjectType<RecordInstance>;\n\n/**\n @module @ember-data/model\n */\n\n/**\n  A PromiseBelongsTo is a PromiseObject that also proxies certain method calls\n  to the underlying belongsTo model.\n  Right now we proxy:\n    * `reload()`\n  @class PromiseBelongsTo\n  @extends PromiseObject\n  @private\n*/\nclass PromiseBelongsTo extends Extended<RecordInstance> {\n  declare _belongsToState: BelongsToProxyMeta;\n\n  @cached\n  get id() {\n    const { key, legacySupport } = this._belongsToState;\n    const ref = legacySupport.referenceFor('belongsTo', key) as BelongsToReference;\n\n    return ref.id();\n  }\n\n  // we don't proxy meta because we would need to proxy it to the relationship state container\n  //  however, meta on relationships does not trigger change notifications.\n  //  if you need relationship meta, you should do `record.belongsTo(relationshipName).meta()`\n  @computed()\n  get meta() {\n    // eslint-disable-next-line no-constant-condition\n    if (1) {\n      assert(\n        'You attempted to access meta on the promise for the async belongsTo relationship ' +\n          `${this._belongsToState.modelName}:${this._belongsToState.key}'.` +\n          '\\nUse `record.belongsTo(relationshipName).meta()` instead.',\n        false\n      );\n    }\n    return;\n  }\n\n  async reload(options: Record<string, unknown>): Promise<this> {\n    assert('You are trying to reload an async belongsTo before it has been created', this.content !== undefined);\n    let { key, legacySupport } = this._belongsToState;\n    await legacySupport.reloadBelongsTo(key, options);\n    return this;\n  }\n}\n\nexport default PromiseBelongsTo;\n","import { assert } from '@ember/debug';\nimport { dependentKeyCompat } from '@ember/object/compat';\nimport { tracked } from '@glimmer/tracking';\nimport Ember from 'ember';\n\nimport { DEPRECATE_COMPUTED_CHAINS } from '@ember-data/deprecations';\nimport { DEBUG } from '@ember-data/env';\nimport { FindOptions } from '@ember-data/types/q/store';\n\nimport type ManyArray from './many-array';\n\nexport interface HasManyProxyCreateArgs {\n  promise: Promise<ManyArray>;\n  content?: ManyArray;\n}\n\n/**\n @module @ember-data/model\n */\n/**\n  This class is returned as the result of accessing an async hasMany relationship\n  on an instance of a Model extending from `@ember-data/model`.\n\n  A PromiseManyArray is an iterable proxy that allows templates to consume related\n  ManyArrays and update once their contents are no longer pending.\n\n  In your JS code you should resolve the promise first.\n\n  ```js\n  const comments = await post.comments;\n  ```\n\n  @class PromiseManyArray\n  @public\n*/\nexport default class PromiseManyArray {\n  declare promise: Promise<ManyArray> | null;\n  declare isDestroyed: boolean;\n\n  constructor(promise: Promise<ManyArray>, content?: ManyArray) {\n    this._update(promise, content);\n    this.isDestroyed = false;\n\n    if (DEBUG) {\n      const meta = Ember.meta(this);\n      meta.addMixin = (mixin: object) => {\n        assert(`Do not use A() on an EmberData PromiseManyArray`);\n      };\n    }\n  }\n\n  //---- Methods/Properties on ArrayProxy that we will keep as our API\n\n  @tracked content: any | null = null;\n\n  /**\n   * Retrieve the length of the content\n   * @property length\n   * @public\n   */\n  @dependentKeyCompat\n  get length(): number {\n    // shouldn't be needed, but ends up being needed\n    // for computed chains even in 4.x\n    if (DEPRECATE_COMPUTED_CHAINS) {\n      this['[]'];\n    }\n    return this.content ? this.content.length : 0;\n  }\n\n  // ember-source < 3.23 (e.g. 3.20 lts)\n  // requires that the tag `'[]'` be notified\n  // on the ArrayProxy in order for `{{#each}}`\n  // to recompute. We entangle the '[]' tag from\n  @dependentKeyCompat\n  get '[]'() {\n    if (DEPRECATE_COMPUTED_CHAINS) {\n      return this.content?.length && this.content;\n    }\n  }\n\n  /**\n   * Iterate the proxied content. Called by the glimmer iterator in #each\n   * We do not guarantee that forEach will always be available. This\n   * may eventually be made to use Symbol.Iterator once glimmer supports it.\n   *\n   * @method forEach\n   * @param cb\n   * @returns\n   * @private\n   */\n  forEach(cb) {\n    if (this.content && this.length) {\n      this.content.forEach(cb);\n    }\n  }\n\n  /**\n   * Reload the relationship\n   * @method reload\n   * @public\n   * @param options\n   * @returns\n   */\n  reload(options: FindOptions) {\n    assert('You are trying to reload an async manyArray before it has been created', this.content);\n    this.content.reload(options);\n    return this;\n  }\n\n  //----  Properties/Methods from the PromiseProxyMixin that we will keep as our API\n\n  /**\n   * Whether the loading promise is still pending\n   *\n   * @property {boolean} isPending\n   * @public\n   */\n  @tracked isPending: boolean = false;\n  /**\n   * Whether the loading promise rejected\n   *\n   * @property {boolean} isRejected\n   * @public\n   */\n  @tracked isRejected: boolean = false;\n  /**\n   * Whether the loading promise succeeded\n   *\n   * @property {boolean} isFulfilled\n   * @public\n   */\n  @tracked isFulfilled: boolean = false;\n  /**\n   * Whether the loading promise completed (resolved or rejected)\n   *\n   * @property {boolean} isSettled\n   * @public\n   */\n  @tracked isSettled: boolean = false;\n\n  /**\n   * chain this promise\n   *\n   * @method then\n   * @public\n   * @param success\n   * @param fail\n   * @returns Promise\n   */\n  then(s, f) {\n    return this.promise!.then(s, f);\n  }\n\n  /**\n   * catch errors thrown by this promise\n   * @method catch\n   * @public\n   * @param callback\n   * @returns Promise\n   */\n  catch(cb) {\n    return this.promise!.catch(cb);\n  }\n\n  /**\n   * run cleanup after this promise completes\n   *\n   * @method finally\n   * @public\n   * @param callback\n   * @returns Promise\n   */\n  finally(cb) {\n    return this.promise!.finally(cb);\n  }\n\n  //---- Methods on EmberObject that we should keep\n\n  destroy() {\n    this.isDestroyed = true;\n    this.content = null;\n    this.promise = null;\n  }\n\n  //---- Methods/Properties on ManyArray that we own and proxy to\n\n  /**\n   * Retrieve the links for this relationship\n   * @property links\n   * @public\n   */\n  @dependentKeyCompat\n  get links() {\n    return this.content ? this.content.links : undefined;\n  }\n\n  /**\n   * Retrieve the meta for this relationship\n   * @property meta\n   * @public\n   */\n  @dependentKeyCompat\n  get meta() {\n    return this.content ? this.content.meta : undefined;\n  }\n\n  //---- Our own stuff\n\n  _update(promise: Promise<ManyArray>, content?: ManyArray) {\n    if (content !== undefined) {\n      this.content = content;\n    }\n\n    this.promise = tapPromise(this, promise);\n  }\n\n  static create({ promise, content }: HasManyProxyCreateArgs): PromiseManyArray {\n    return new this(promise, content);\n  }\n}\n\nfunction tapPromise(proxy: PromiseManyArray, promise: Promise<ManyArray>) {\n  proxy.isPending = true;\n  proxy.isSettled = false;\n  proxy.isFulfilled = false;\n  proxy.isRejected = false;\n  return Promise.resolve(promise).then(\n    (content) => {\n      proxy.isPending = false;\n      proxy.isFulfilled = true;\n      proxy.isSettled = true;\n      proxy.content = content;\n      return content;\n    },\n    (error) => {\n      proxy.isPending = false;\n      proxy.isFulfilled = false;\n      proxy.isRejected = true;\n      proxy.isSettled = true;\n      throw error;\n    }\n  );\n}\n","import { assert } from '@ember/debug';\nimport { DEBUG } from '@ember-data/env';\n\n/*\n  Assert that `addedRecord` has a valid type so it can be added to the\n  relationship of the `record`.\n\n  The assert basically checks if the `addedRecord` can be added to the\n  relationship (specified via `relationshipMeta`) of the `record`.\n\n  This utility should only be used internally, as both record parameters must\n  be stable record identifiers and the `relationshipMeta` needs to be the meta\n  information about the relationship, retrieved via\n  `record.relationshipFor(key)`.\n*/\nlet assertPolymorphicType;\n\nif (DEBUG) {\n  assertPolymorphicType = function assertPolymorphicType(parentIdentifier, parentDefinition, addedIdentifier, store) {\n    if (parentDefinition.inverseIsImplicit) {\n      return;\n    }\n    if (parentDefinition.isPolymorphic) {\n      let meta = store.getSchemaDefinitionService().relationshipsDefinitionFor(addedIdentifier)[\n        parentDefinition.inverseKey\n      ];\n      assert(\n        `The schema for the relationship '${parentDefinition.inverseKey}' on '${addedIdentifier.type}' type does not implement '${parentDefinition.type}' and thus cannot be assigned to the '${parentDefinition.key}' relationship in '${parentIdentifier.type}'. The definition should specify 'as: \"${parentDefinition.type}\"' in options.`,\n        meta?.options.as === parentDefinition.type\n      );\n    }\n  };\n}\n\nexport { assertPolymorphicType };\n","import { dependentKeyCompat } from '@ember/object/compat';\nimport { cached, tracked } from '@glimmer/tracking';\n\nimport type { Object as JSONObject, Value as JSONValue } from 'json-typescript';\n\nimport { DEBUG } from '@ember-data/env';\nimport type { ResourceEdge } from '@ember-data/graph/-private/edges/resource';\nimport type { Graph } from '@ember-data/graph/-private/graph';\nimport type Store from '@ember-data/store';\nimport { recordIdentifierFor } from '@ember-data/store/-private';\nimport type { NotificationType } from '@ember-data/store/-private/managers/notification-manager';\nimport type {\n  LinkObject,\n  Links,\n  SingleResourceDocument,\n  SingleResourceRelationship,\n} from '@ember-data/types/q/ember-data-json-api';\nimport type { StableRecordIdentifier } from '@ember-data/types/q/identifier';\nimport type { RecordInstance } from '@ember-data/types/q/record-instance';\n\nimport { assertPolymorphicType } from '../debug/assert-polymorphic-type';\nimport { areAllInverseRecordsLoaded, LegacySupport } from '../legacy-relationships-support';\nimport { LEGACY_SUPPORT } from '../model';\n\n/**\n  @module @ember-data/model\n*/\n\ninterface ResourceIdentifier {\n  links?: {\n    related?: string | LinkObject;\n  };\n  meta?: JSONObject;\n}\n\nfunction isResourceIdentiferWithRelatedLinks(\n  value: SingleResourceRelationship | ResourceIdentifier | null\n): value is ResourceIdentifier & { links: { related: string | LinkObject | null } } {\n  return Boolean(value && value.links && value.links.related);\n}\n\n/**\n A `BelongsToReference` is a low-level API that allows users and\n addon authors to perform meta-operations on a belongs-to\n relationship.\n\n @class BelongsToReference\n @public\n */\nexport default class BelongsToReference {\n  declare key: string;\n  declare belongsToRelationship: ResourceEdge;\n  declare type: string;\n  declare ___identifier: StableRecordIdentifier;\n  declare store: Store;\n  declare graph: Graph;\n\n  // unsubscribe tokens given to us by the notification manager\n  declare ___token: object;\n  declare ___relatedToken: object | null;\n\n  @tracked _ref = 0;\n\n  constructor(\n    store: Store,\n    graph: Graph,\n    parentIdentifier: StableRecordIdentifier,\n    belongsToRelationship: ResourceEdge,\n    key: string\n  ) {\n    this.graph = graph;\n    this.key = key;\n    this.belongsToRelationship = belongsToRelationship;\n    this.type = belongsToRelationship.definition.type;\n    this.store = store;\n    this.___identifier = parentIdentifier;\n    this.___relatedToken = null;\n\n    this.___token = store.notifications.subscribe(\n      parentIdentifier,\n      (_: StableRecordIdentifier, bucket: NotificationType, notifiedKey?: string) => {\n        if (bucket === 'relationships' && notifiedKey === key) {\n          this._ref++;\n        }\n      }\n    );\n\n    // TODO inverse\n  }\n\n  destroy() {\n    // TODO @feature we need the notification manager often enough\n    // we should potentially just expose it fully public\n    this.store.notifications.unsubscribe(this.___token);\n    this.___token = null as unknown as object;\n    if (this.___relatedToken) {\n      this.store.notifications.unsubscribe(this.___relatedToken);\n      this.___relatedToken = null;\n    }\n  }\n\n  /**\n   * The identifier of the record that this reference refers to.\n   * `null` if no related record is known.\n   *\n   * @property {StableRecordIdentifier | null} identifier\n   * @public\n   */\n  @cached\n  @dependentKeyCompat\n  get identifier(): StableRecordIdentifier | null {\n    if (this.___relatedToken) {\n      this.store.notifications.unsubscribe(this.___relatedToken);\n      this.___relatedToken = null;\n    }\n\n    let resource = this._resource();\n    if (resource && resource.data) {\n      const identifier = this.store.identifierCache.getOrCreateRecordIdentifier(resource.data);\n      this.___relatedToken = this.store.notifications.subscribe(\n        identifier,\n        (_: StableRecordIdentifier, bucket: NotificationType, notifiedKey?: string) => {\n          if (bucket === 'identity' || (bucket === 'attributes' && notifiedKey === 'id')) {\n            this._ref++;\n          }\n        }\n      );\n\n      return identifier;\n    }\n\n    return null;\n  }\n\n  /**\n   The `id` of the record that this reference refers to. Together, the\n   `type()` and `id()` methods form a composite key for the identity\n   map. This can be used to access the id of an async relationship\n   without triggering a fetch that would normally happen if you\n   attempted to use `record.relationship.id`.\n\n   Example\n\n   ```javascript\n   // models/blog.js\n   import Model, { belongsTo } from '@ember-data/model';\n\n   export default class BlogModel extends Model {\n    @belongsTo('user', { async: true, inverse: null }) user;\n   }\n\n   let blog = store.push({\n      data: {\n        type: 'blog',\n        id: 1,\n        relationships: {\n          user: {\n            data: { type: 'user', id: 1 }\n          }\n        }\n      }\n    });\n   let userRef = blog.belongsTo('user');\n\n   // get the identifier of the reference\n   if (userRef.remoteType() === \"id\") {\n      let id = userRef.id();\n    }\n   ```\n\n   @method id\n   @public\n   @return {String} The id of the record in this belongsTo relationship.\n   */\n  id(): string | null {\n    return this.identifier?.id || null;\n  }\n\n  /**\n   The link Ember Data will use to fetch or reload this belongs-to\n   relationship. By default it uses only the \"related\" resource linkage.\n\n   Example\n\n   ```javascript\n   // models/blog.js\n   import Model, { belongsTo } from '@ember-data/model';\n   export default Model.extend({\n      user: belongsTo('user', { async: true, inverse: null })\n    });\n\n   let blog = store.push({\n      data: {\n        type: 'blog',\n        id: 1,\n        relationships: {\n          user: {\n            links: {\n              related: '/articles/1/author'\n            }\n          }\n        }\n      }\n    });\n   let userRef = blog.belongsTo('user');\n\n   // get the identifier of the reference\n   if (userRef.remoteType() === \"link\") {\n      let link = userRef.link();\n    }\n   ```\n\n   @method link\n   @public\n   @return {String} The link Ember Data will use to fetch or reload this belongs-to relationship.\n   */\n  link(): string | null {\n    let resource = this._resource();\n\n    if (isResourceIdentiferWithRelatedLinks(resource)) {\n      if (resource.links) {\n        let related = resource.links.related;\n        return !related || typeof related === 'string' ? related : related.href;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * any links that have been received for this relationship\n   *\n   * @method links\n   * @public\n   * @returns\n   */\n  links(): Links | null {\n    let resource = this._resource();\n\n    return resource && resource.links ? resource.links : null;\n  }\n\n  /**\n   The meta data for the belongs-to relationship.\n\n   Example\n\n   ```javascript\n   // models/blog.js\n   import Model, { belongsTo } from '@ember-data/model';\n   export default Model.extend({\n      user: belongsTo('user', { async: true, inverse: null })\n    });\n\n   let blog = store.push({\n      data: {\n        type: 'blog',\n        id: 1,\n        relationships: {\n          user: {\n            links: {\n              related: {\n                href: '/articles/1/author'\n              },\n            },\n            meta: {\n              lastUpdated: 1458014400000\n            }\n          }\n        }\n      }\n    });\n\n   let userRef = blog.belongsTo('user');\n\n   userRef.meta() // { lastUpdated: 1458014400000 }\n   ```\n\n   @method meta\n    @public\n   @return {Object} The meta information for the belongs-to relationship.\n   */\n  meta() {\n    let meta: Record<string, JSONValue> | null = null;\n    let resource = this._resource();\n    if (resource && resource.meta && typeof resource.meta === 'object') {\n      meta = resource.meta;\n    }\n    return meta;\n  }\n\n  _resource() {\n    this._ref; // subscribe\n    const cache = this.store.cache;\n    return cache.getRelationship(this.___identifier, this.key) as SingleResourceRelationship;\n  }\n\n  /**\n   This returns a string that represents how the reference will be\n   looked up when it is loaded. If the relationship has a link it will\n   use the \"link\" otherwise it defaults to \"id\".\n\n   Example\n\n   ```app/models/post.js\n   import Model, { hasMany } from '@ember-data/model';\n\n   export default class PostModel extends Model {\n     @hasMany('comment', { async: true, inverse: null }) comments;\n   }\n   ```\n\n   ```javascript\n   let post = store.push({\n     data: {\n       type: 'post',\n       id: 1,\n       relationships: {\n         comments: {\n           data: [{ type: 'comment', id: 1 }]\n         }\n       }\n     }\n   });\n\n   let commentsRef = post.hasMany('comments');\n\n   // get the identifier of the reference\n   if (commentsRef.remoteType() === \"ids\") {\n     let ids = commentsRef.ids();\n   } else if (commentsRef.remoteType() === \"link\") {\n     let link = commentsRef.link();\n   }\n   ```\n\n   @method remoteType\n   @public\n   @return {String} The name of the remote type. This should either be `link` or `id`\n   */\n  remoteType(): 'link' | 'id' {\n    let value = this._resource();\n    if (isResourceIdentiferWithRelatedLinks(value)) {\n      return 'link';\n    }\n    return 'id';\n  }\n\n  /**\n   `push` can be used to update the data in the relationship and Ember\n   Data will treat the new data as the canonical value of this\n   relationship on the backend.\n\n   Example\n\n   ```app/models/blog.js\n   import Model, { belongsTo } from '@ember-data/model';\n\n   export default class BlogModel extends Model {\n      @belongsTo('user', { async: true, inverse: null }) user;\n    }\n\n   let blog = store.push({\n      data: {\n        type: 'blog',\n        id: 1,\n        relationships: {\n          user: {\n            data: { type: 'user', id: 1 }\n          }\n        }\n      }\n    });\n   let userRef = blog.belongsTo('user');\n\n   // provide data for reference\n   userRef.push({\n      data: {\n        type: 'user',\n        id: 1,\n        attributes: {\n          username: \"@user\"\n        }\n      }\n    }).then(function(user) {\n      userRef.value() === user;\n    });\n   ```\n\n   @method push\n    @public\n   @param {Object} object a JSONAPI document object describing the new value of this relationship.\n   @return {Promise<record>} A promise that resolves with the new value in this belongs-to relationship.\n   */\n  push(data: SingleResourceDocument | Promise<SingleResourceDocument>): Promise<RecordInstance> {\n    let jsonApiDoc: SingleResourceDocument = data as SingleResourceDocument;\n    let record = this.store.push(jsonApiDoc);\n\n    if (DEBUG) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n      assertPolymorphicType(\n        this.belongsToRelationship.identifier,\n        this.belongsToRelationship.definition,\n        recordIdentifierFor(record),\n        this.store\n      );\n    }\n\n    const { identifier } = this.belongsToRelationship;\n    this.store._join(() => {\n      this.graph.push({\n        op: 'replaceRelatedRecord',\n        record: identifier,\n        field: this.key,\n        value: recordIdentifierFor(record),\n      });\n    });\n\n    return Promise.resolve(record);\n  }\n\n  /**\n   `value()` synchronously returns the current value of the belongs-to\n   relationship. Unlike `record.relationshipName`, calling\n   `value()` on a reference does not trigger a fetch if the async\n   relationship is not yet loaded. If the relationship is not loaded\n   it will always return `null`.\n\n   Example\n\n   ```javascript\n   // models/blog.js\n   import Model, { belongsTo } from '@ember-data/model';\n\n   export default class BlogModel extends Model {\n     @belongsTo('user', { async: true, inverse: null }) user;\n   }\n\n   let blog = store.push({\n      data: {\n        type: 'blog',\n        id: 1,\n        relationships: {\n          user: {\n            data: { type: 'user', id: 1 }\n          }\n        }\n      }\n    });\n   let userRef = blog.belongsTo('user');\n\n   userRef.value(); // null\n\n   // provide data for reference\n   userRef.push({\n      data: {\n        type: 'user',\n        id: 1,\n        attributes: {\n          username: \"@user\"\n        }\n      }\n    }).then(function(user) {\n      userRef.value(); // user\n    });\n   ```\n\n   @method value\n    @public\n   @return {Model} the record in this relationship\n   */\n  value(): RecordInstance | null {\n    let resource = this._resource();\n    return resource && resource.data ? this.store.peekRecord(resource.data) : null;\n  }\n\n  /**\n   Loads a record in a belongs-to relationship if it is not already\n   loaded. If the relationship is already loaded this method does not\n   trigger a new load.\n\n   Example\n\n   ```javascript\n   // models/blog.js\n   import Model, { belongsTo } from '@ember-data/model';\n\n   export default class BlogModel extends Model {\n     @belongsTo('user', { async: true, inverse: null }) user;\n   }\n\n   let blog = store.push({\n      data: {\n        type: 'blog',\n        id: 1,\n        relationships: {\n          user: {\n            data: { type: 'user', id: 1 }\n          }\n        }\n      }\n    });\n   let userRef = blog.belongsTo('user');\n\n   userRef.value(); // null\n\n   userRef.load().then(function(user) {\n      userRef.value() === user\n    });\n   ```\n\n   You may also pass in an options object whose properties will be\n   fed forward. This enables you to pass `adapterOptions` into the\n   request given to the adapter via the reference.\n\n   Example\n\n   ```javascript\n   userRef.load({ adapterOptions: { isPrivate: true } }).then(function(user) {\n     userRef.value() === user;\n   });\n   ```\n   ```app/adapters/user.js\n   import Adapter from '@ember-data/adapter';\n\n   export default class UserAdapter extends Adapter {\n     findRecord(store, type, id, snapshot) {\n       // In the adapter you will have access to adapterOptions.\n       let adapterOptions = snapshot.adapterOptions;\n     }\n   });\n   ```\n\n   @method load\n    @public\n   @param {Object} options the options to pass in.\n   @return {Promise} a promise that resolves with the record in this belongs-to relationship.\n   */\n  load(options?: Record<string, unknown>) {\n    const support: LegacySupport = (LEGACY_SUPPORT as Map<StableRecordIdentifier, LegacySupport>).get(\n      this.___identifier\n    )!;\n    const fetchSyncRel =\n      !this.belongsToRelationship.definition.isAsync && !areAllInverseRecordsLoaded(this.store, this._resource());\n    return fetchSyncRel\n      ? support.reloadBelongsTo(this.key, options).then(() => this.value())\n      : support.getBelongsTo(this.key, options);\n  }\n\n  /**\n   Triggers a reload of the value in this relationship. If the\n   remoteType is `\"link\"` Ember Data will use the relationship link to\n   reload the relationship. Otherwise it will reload the record by its\n   id.\n\n   Example\n\n   ```javascript\n   // models/blog.js\n   import Model, { belongsTo } from '@ember-data/model';\n\n   export default class BlogModel extends Model {\n     @belongsTo('user', { async: true, inverse: null }) user;\n   }\n\n   let blog = store.push({\n      data: {\n        type: 'blog',\n        id: 1,\n        relationships: {\n          user: {\n            data: { type: 'user', id: 1 }\n          }\n        }\n      }\n    });\n   let userRef = blog.belongsTo('user');\n\n   userRef.reload().then(function(user) {\n      userRef.value() === user\n    });\n   ```\n\n   You may also pass in an options object whose properties will be\n   fed forward. This enables you to pass `adapterOptions` into the\n   request given to the adapter via the reference. A full example\n   can be found in the `load` method.\n\n   Example\n\n   ```javascript\n   userRef.reload({ adapterOptions: { isPrivate: true } })\n   ```\n\n   @method reload\n    @public\n   @param {Object} options the options to pass in.\n   @return {Promise} a promise that resolves with the record in this belongs-to relationship after the reload has completed.\n   */\n  reload(options?: Record<string, unknown>) {\n    const support: LegacySupport = (LEGACY_SUPPORT as Map<StableRecordIdentifier, LegacySupport>).get(\n      this.___identifier\n    )!;\n    return support.reloadBelongsTo(this.key, options).then(() => this.value());\n  }\n}\n","import { dependentKeyCompat } from '@ember/object/compat';\nimport { cached, tracked } from '@glimmer/tracking';\n\nimport type { Object as JSONObject, Value as JSONValue } from 'json-typescript';\n\nimport { ManyArray } from 'ember-data/-private';\n\nimport { DEBUG } from '@ember-data/env';\nimport type { CollectionEdge } from '@ember-data/graph/-private/edges/collection';\nimport type { Graph } from '@ember-data/graph/-private/graph';\nimport type Store from '@ember-data/store';\nimport { recordIdentifierFor } from '@ember-data/store';\nimport type { NotificationType } from '@ember-data/store/-private/managers/notification-manager';\nimport { CollectionRelationship } from '@ember-data/types/cache/relationship';\nimport type {\n  CollectionResourceDocument,\n  CollectionResourceRelationship,\n  ExistingResourceObject,\n  LinkObject,\n  PaginationLinks,\n  SingleResourceDocument,\n} from '@ember-data/types/q/ember-data-json-api';\nimport type { StableRecordIdentifier } from '@ember-data/types/q/identifier';\nimport type { RecordInstance } from '@ember-data/types/q/record-instance';\nimport type { FindOptions } from '@ember-data/types/q/store';\n\nimport { assertPolymorphicType } from '../debug/assert-polymorphic-type';\nimport { areAllInverseRecordsLoaded, LegacySupport } from '../legacy-relationships-support';\nimport { LEGACY_SUPPORT } from '../model';\n\n/**\n  @module @ember-data/model\n*/\ninterface ResourceIdentifier {\n  links?: {\n    related?: string | LinkObject;\n  };\n  meta?: JSONObject;\n}\n\nfunction isResourceIdentiferWithRelatedLinks(\n  value: CollectionResourceRelationship | ResourceIdentifier | null\n): value is ResourceIdentifier & { links: { related: string | LinkObject | null } } {\n  return Boolean(value && value.links && value.links.related);\n}\n/**\n A `HasManyReference` is a low-level API that allows users and addon\n authors to perform meta-operations on a has-many relationship.\n\n @class HasManyReference\n @public\n @extends Reference\n */\nexport default class HasManyReference {\n  declare graph: Graph;\n  declare key: string;\n  declare hasManyRelationship: CollectionEdge;\n  declare type: string;\n  declare store: Store;\n\n  // unsubscribe tokens given to us by the notification manager\n  ___token!: object;\n  ___identifier: StableRecordIdentifier;\n  ___relatedTokenMap!: Map<StableRecordIdentifier, object>;\n\n  @tracked _ref = 0;\n\n  constructor(\n    store: Store,\n    graph: Graph,\n    parentIdentifier: StableRecordIdentifier,\n    hasManyRelationship: CollectionEdge,\n    key: string\n  ) {\n    this.graph = graph;\n    this.key = key;\n    this.hasManyRelationship = hasManyRelationship;\n    this.type = hasManyRelationship.definition.type;\n\n    this.store = store;\n    this.___identifier = parentIdentifier;\n    this.___token = store.notifications.subscribe(\n      parentIdentifier,\n      (_: StableRecordIdentifier, bucket: NotificationType, notifiedKey?: string) => {\n        if (bucket === 'relationships' && notifiedKey === key) {\n          this._ref++;\n        }\n      }\n    );\n    this.___relatedTokenMap = new Map();\n    // TODO inverse\n  }\n\n  destroy() {\n    this.store.notifications.unsubscribe(this.___token);\n    this.___relatedTokenMap.forEach((token) => {\n      this.store.notifications.unsubscribe(token);\n    });\n    this.___relatedTokenMap.clear();\n  }\n\n  /**\n   * An array of identifiers for the records that this reference refers to.\n   *\n   * @property {StableRecordIdentifier[]} identifiers\n   * @public\n   */\n  @cached\n  @dependentKeyCompat\n  get identifiers(): StableRecordIdentifier[] {\n    this._ref; // consume the tracked prop\n\n    let resource = this._resource();\n\n    let map = this.___relatedTokenMap;\n    this.___relatedTokenMap = new Map();\n\n    if (resource && resource.data) {\n      return resource.data.map((resourceIdentifier) => {\n        const identifier = this.store.identifierCache.getOrCreateRecordIdentifier(resourceIdentifier);\n        let token = map.get(identifier);\n\n        if (token) {\n          map.delete(identifier);\n        } else {\n          token = this.store.notifications.subscribe(\n            identifier,\n            (_: StableRecordIdentifier, bucket: NotificationType, notifiedKey?: string) => {\n              if (bucket === 'identity' || (bucket === 'attributes' && notifiedKey === 'id')) {\n                this._ref++;\n              }\n            }\n          );\n        }\n        this.___relatedTokenMap.set(identifier, token);\n\n        return identifier;\n      });\n    }\n\n    map.forEach((token) => {\n      this.store.notifications.unsubscribe(token);\n    });\n    map.clear();\n\n    return [];\n  }\n\n  _resource() {\n    const cache = this.store.cache;\n    return cache.getRelationship(this.___identifier, this.key) as CollectionResourceRelationship;\n  }\n\n  /**\n   This returns a string that represents how the reference will be\n   looked up when it is loaded. If the relationship has a link it will\n   use the \"link\" otherwise it defaults to \"id\".\n\n   Example\n\n   ```app/models/post.js\n   import Model, { hasMany } from '@ember-data/model';\n\n   export default class PostModel extends Model {\n     @hasMany('comment', { async: true, inverse: null }) comments;\n   }\n   ```\n\n   ```javascript\n   let post = store.push({\n     data: {\n       type: 'post',\n       id: 1,\n       relationships: {\n         comments: {\n           data: [{ type: 'comment', id: 1 }]\n         }\n       }\n     }\n   });\n\n   let commentsRef = post.hasMany('comments');\n\n   // get the identifier of the reference\n   if (commentsRef.remoteType() === \"ids\") {\n     let ids = commentsRef.ids();\n   } else if (commentsRef.remoteType() === \"link\") {\n     let link = commentsRef.link();\n   }\n   ```\n\n   @method remoteType\n   @public\n   @return {String} The name of the remote type. This should either be `link` or `ids`\n   */\n  remoteType(): 'link' | 'ids' {\n    let value = this._resource();\n    if (value && value.links && value.links.related) {\n      return 'link';\n    }\n\n    return 'ids';\n  }\n\n  /**\n   `ids()` returns an array of the record IDs in this relationship.\n\n   Example\n\n   ```app/models/post.js\n   import Model, { hasMany } from '@ember-data/model';\n\n   export default class PostModel extends Model {\n     @hasMany('comment', { async: true, inverse: null }) comments;\n   }\n   ```\n\n   ```javascript\n   let post = store.push({\n     data: {\n       type: 'post',\n       id: 1,\n       relationships: {\n         comments: {\n           data: [{ type: 'comment', id: 1 }]\n         }\n       }\n     }\n   });\n\n   let commentsRef = post.hasMany('comments');\n\n   commentsRef.ids(); // ['1']\n   ```\n\n   @method ids\n    @public\n   @return {Array} The ids in this has-many relationship\n   */\n  ids(): Array<string | null> {\n    return this.identifiers.map((identifier) => identifier.id);\n  }\n\n  /**\n   The link Ember Data will use to fetch or reload this belongs-to\n   relationship. By default it uses only the \"related\" resource linkage.\n\n   Example\n\n   ```javascript\n   // models/blog.js\n   import Model, { belongsTo } from '@ember-data/model';\n   export default Model.extend({\n      user: belongsTo('user', { async: true, inverse: null })\n    });\n\n   let blog = store.push({\n      data: {\n        type: 'blog',\n        id: 1,\n        relationships: {\n          user: {\n            links: {\n              related: '/articles/1/author'\n            }\n          }\n        }\n      }\n    });\n   let userRef = blog.belongsTo('user');\n\n   // get the identifier of the reference\n   if (userRef.remoteType() === \"link\") {\n      let link = userRef.link();\n    }\n   ```\n\n   @method link\n   @public\n   @return {String} The link Ember Data will use to fetch or reload this belongs-to relationship.\n   */\n  link(): string | null {\n    let resource = this._resource();\n\n    if (isResourceIdentiferWithRelatedLinks(resource)) {\n      if (resource.links) {\n        let related = resource.links.related;\n        return !related || typeof related === 'string' ? related : related.href;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * any links that have been received for this relationship\n   *\n   * @method links\n   * @public\n   * @returns\n   */\n  links(): PaginationLinks | null {\n    let resource = this._resource();\n\n    return resource && resource.links ? resource.links : null;\n  }\n\n  /**\n   The meta data for the has-many relationship.\n\n   Example\n\n   ```javascript\n   // models/blog.js\n   import Model, { hasMany } from '@ember-data/model';\n   export default Model.extend({\n      users: hasMany('user', { async: true, inverse: null })\n    });\n\n   let blog = store.push({\n      data: {\n        type: 'blog',\n        id: 1,\n        relationships: {\n          users: {\n            links: {\n              related: {\n                href: '/articles/1/authors'\n              },\n            },\n            meta: {\n              lastUpdated: 1458014400000\n            }\n          }\n        }\n      }\n    });\n\n   let usersRef = blog.hasMany('user');\n\n   usersRef.meta() // { lastUpdated: 1458014400000 }\n   ```\n\n  @method meta\n  @public\n  @return {Object} The meta information for the belongs-to relationship.\n  */\n  meta() {\n    let meta: Record<string, JSONValue> | null = null;\n    let resource = this._resource();\n    if (resource && resource.meta && typeof resource.meta === 'object') {\n      meta = resource.meta;\n    }\n    return meta;\n  }\n\n  /**\n   `push` can be used to update the data in the relationship and Ember\n   Data will treat the new data as the canonical value of this\n   relationship on the backend.\n\n   Example\n\n   ```app/models/post.js\n   import Model, { hasMany } from '@ember-data/model';\n\n   export default class PostModel extends Model {\n     @hasMany('comment', { async: true, inverse: null }) comments;\n   }\n   ```\n\n   ```\n   let post = store.push({\n     data: {\n       type: 'post',\n       id: 1,\n       relationships: {\n         comments: {\n           data: [{ type: 'comment', id: 1 }]\n         }\n       }\n     }\n   });\n\n   let commentsRef = post.hasMany('comments');\n\n   commentsRef.ids(); // ['1']\n\n   commentsRef.push([\n   [{ type: 'comment', id: 2 }],\n   [{ type: 'comment', id: 3 }],\n   ])\n\n   commentsRef.ids(); // ['2', '3']\n   ```\n\n   @method push\n    @public\n   @param {Array|Promise} objectOrPromise a promise that resolves to a JSONAPI document object describing the new value of this relationship.\n   @return {ManyArray}\n   */\n  async push(\n    objectOrPromise: ExistingResourceObject[] | CollectionResourceDocument | { data: SingleResourceDocument[] }\n  ): Promise<ManyArray> {\n    let payload = objectOrPromise;\n    let array: Array<ExistingResourceObject | SingleResourceDocument>;\n\n    if (!Array.isArray(payload) && typeof payload === 'object' && Array.isArray(payload.data)) {\n      array = payload.data;\n    } else {\n      array = payload as ExistingResourceObject[];\n    }\n\n    const { store } = this;\n\n    let identifiers = array.map((obj) => {\n      let record: RecordInstance;\n      if ('data' in obj) {\n        // TODO deprecate pushing non-valid JSON:API here\n        record = store.push(obj);\n      } else {\n        record = store.push({ data: obj });\n      }\n\n      if (DEBUG) {\n        let relationshipMeta = this.hasManyRelationship.definition;\n        let identifier = this.hasManyRelationship.identifier;\n\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n        assertPolymorphicType(identifier, relationshipMeta, recordIdentifierFor(record), store);\n      }\n      return recordIdentifierFor(record);\n    });\n\n    const { identifier } = this.hasManyRelationship;\n    store._join(() => {\n      this.graph.push({\n        op: 'replaceRelatedRecords',\n        record: identifier,\n        field: this.key,\n        value: identifiers,\n      });\n    });\n\n    return this.load();\n  }\n\n  _isLoaded() {\n    let hasRelationshipDataProperty = this.hasManyRelationship.state.hasReceivedData;\n    if (!hasRelationshipDataProperty) {\n      return false;\n    }\n\n    const relationship = this.graph.getData(this.hasManyRelationship.identifier, this.key) as CollectionRelationship;\n\n    return relationship.data?.every((identifier) => {\n      return this.store._instanceCache.recordIsLoaded(identifier, true) === true;\n    });\n  }\n\n  /**\n   `value()` synchronously returns the current value of the has-many\n   relationship. Unlike `record.relationshipName`, calling\n   `value()` on a reference does not trigger a fetch if the async\n   relationship is not yet loaded. If the relationship is not loaded\n   it will always return `null`.\n\n   Example\n\n   ```app/models/post.js\n   import Model, { hasMany } from '@ember-data/model';\n\n   export default class PostModel extends Model {\n     @hasMany('comment', { async: true, inverse: null }) comments;\n   }\n   ```\n\n   ```javascript\n   let post = store.push({\n     data: {\n       type: 'post',\n       id: 1,\n       relationships: {\n         comments: {\n           data: [{ type: 'comment', id: 1 }]\n         }\n       }\n     }\n   });\n\n   let commentsRef = post.hasMany('comments');\n\n   post.comments.then(function(comments) {\n     commentsRef.value() === comments\n   })\n   ```\n\n   @method value\n    @public\n   @return {ManyArray}\n   */\n  value() {\n    const support: LegacySupport = (LEGACY_SUPPORT as Map<StableRecordIdentifier, LegacySupport>).get(\n      this.___identifier\n    )!;\n\n    const loaded = this._isLoaded();\n\n    if (!loaded) {\n      // subscribe to changes\n      // for when we are not loaded yet\n      this._ref;\n      return null;\n    }\n\n    return support.getManyArray(this.key);\n  }\n\n  /**\n   Loads the relationship if it is not already loaded.  If the\n   relationship is already loaded this method does not trigger a new\n   load. This causes a request to the specified\n   relationship link or reloads all items currently in the relationship.\n\n   Example\n\n   ```app/models/post.js\n   import Model, { hasMany } from '@ember-data/model';\n\n   export default class PostModel extends Model {\n     @hasMany('comment', { async: true, inverse: null }) comments;\n   }\n   ```\n\n   ```javascript\n   let post = store.push({\n     data: {\n       type: 'post',\n       id: 1,\n       relationships: {\n         comments: {\n           data: [{ type: 'comment', id: 1 }]\n         }\n       }\n     }\n   });\n\n   let commentsRef = post.hasMany('comments');\n\n   commentsRef.load().then(function(comments) {\n     //...\n   });\n   ```\n\n   You may also pass in an options object whose properties will be\n   fed forward. This enables you to pass `adapterOptions` into the\n   request given to the adapter via the reference.\n\n   Example\n\n   ```javascript\n   commentsRef.load({ adapterOptions: { isPrivate: true } })\n     .then(function(comments) {\n       //...\n     });\n   ```\n\n   ```app/adapters/comment.js\n   export default ApplicationAdapter.extend({\n     findMany(store, type, id, snapshots) {\n       // In the adapter you will have access to adapterOptions.\n       let adapterOptions = snapshots[0].adapterOptions;\n     }\n   });\n   ```\n\n   @method load\n    @public\n   @param {Object} options the options to pass in.\n   @return {Promise} a promise that resolves with the ManyArray in\n   this has-many relationship.\n   */\n  async load(options?: FindOptions): Promise<ManyArray> {\n    const support: LegacySupport = (LEGACY_SUPPORT as Map<StableRecordIdentifier, LegacySupport>).get(\n      this.___identifier\n    )!;\n    const fetchSyncRel =\n      !this.hasManyRelationship.definition.isAsync && !areAllInverseRecordsLoaded(this.store, this._resource());\n    return fetchSyncRel\n      ? (support.reloadHasMany(this.key, options) as Promise<ManyArray>)\n      : (support.getHasMany(this.key, options) as Promise<ManyArray> | ManyArray); // this cast is necessary because typescript does not work properly with custom thenables;\n  }\n\n  /**\n   Reloads this has-many relationship. This causes a request to the specified\n   relationship link or reloads all items currently in the relationship.\n\n   Example\n\n   ```app/models/post.js\n   import Model, { hasMany } from '@ember-data/model';\n\n   export default class PostModel extends Model {\n     @hasMany('comment', { async: true, inverse: null }) comments;\n   }\n   ```\n\n   ```javascript\n   let post = store.push({\n     data: {\n       type: 'post',\n       id: 1,\n       relationships: {\n         comments: {\n           data: [{ type: 'comment', id: 1 }]\n         }\n       }\n     }\n   });\n\n   let commentsRef = post.hasMany('comments');\n\n   commentsRef.reload().then(function(comments) {\n     //...\n   });\n   ```\n\n   You may also pass in an options object whose properties will be\n   fed forward. This enables you to pass `adapterOptions` into the\n   request given to the adapter via the reference. A full example\n   can be found in the `load` method.\n\n   Example\n\n   ```javascript\n   commentsRef.reload({ adapterOptions: { isPrivate: true } })\n   ```\n\n   @method reload\n    @public\n   @param {Object} options the options to pass in.\n   @return {Promise} a promise that resolves with the ManyArray in this has-many relationship.\n   */\n  reload(options?: FindOptions) {\n    const support: LegacySupport = (LEGACY_SUPPORT as Map<StableRecordIdentifier, LegacySupport>).get(\n      this.___identifier\n    )!;\n    return support.reloadHasMany(this.key, options);\n  }\n}\n","import { assert } from '@ember/debug';\n\nimport { importSync } from '@embroider/macros';\n\nimport { DEBUG } from '@ember-data/env';\nimport type { UpgradedMeta } from '@ember-data/graph/-private/-edge-definition';\nimport type { LocalRelationshipOperation } from '@ember-data/graph/-private/-operations';\nimport type { CollectionEdge } from '@ember-data/graph/-private/edges/collection';\nimport type { ResourceEdge } from '@ember-data/graph/-private/edges/resource';\nimport type { Graph, GraphEdge } from '@ember-data/graph/-private/graph';\nimport { HAS_JSON_API_PACKAGE } from '@ember-data/packages';\nimport type Store from '@ember-data/store';\nimport {\n  fastPush,\n  isStableIdentifier,\n  peekCache,\n  recordIdentifierFor,\n  SOURCE,\n  storeFor,\n} from '@ember-data/store/-private';\nimport { CollectionRelationship } from '@ember-data/types/cache/relationship';\nimport type { Cache } from '@ember-data/types/q/cache';\nimport { CollectionResourceRelationship, SingleResourceRelationship } from '@ember-data/types/q/ember-data-json-api';\nimport type { StableRecordIdentifier } from '@ember-data/types/q/identifier';\nimport type { JsonApiRelationship } from '@ember-data/types/q/record-data-json-api';\nimport type { RecordInstance } from '@ember-data/types/q/record-instance';\nimport type { FindOptions } from '@ember-data/types/q/store';\n\nimport RelatedCollection from './many-array';\nimport type Model from './model';\nimport type { BelongsToProxyCreateArgs, BelongsToProxyMeta } from './promise-belongs-to';\nimport PromiseBelongsTo from './promise-belongs-to';\nimport type { HasManyProxyCreateArgs } from './promise-many-array';\nimport PromiseManyArray from './promise-many-array';\nimport BelongsToReference from './references/belongs-to';\nimport HasManyReference from './references/has-many';\n\ntype PromiseBelongsToFactory = { create(args: BelongsToProxyCreateArgs): PromiseBelongsTo };\n\nexport class LegacySupport {\n  declare record: Model;\n  declare store: Store;\n  declare graph: Graph;\n  declare cache: Cache;\n  declare references: Record<string, BelongsToReference | HasManyReference>;\n  declare identifier: StableRecordIdentifier;\n  declare _manyArrayCache: Record<string, RelatedCollection>;\n  declare _relationshipPromisesCache: Record<string, Promise<RelatedCollection | RecordInstance>>;\n  declare _relationshipProxyCache: Record<string, PromiseManyArray | PromiseBelongsTo>;\n  declare _pending: Record<string, Promise<StableRecordIdentifier | null> | undefined>;\n\n  declare isDestroying: boolean;\n  declare isDestroyed: boolean;\n\n  constructor(record: Model) {\n    this.record = record;\n    this.store = storeFor(record)!;\n    this.identifier = recordIdentifierFor(record);\n    this.cache = peekCache(record);\n\n    if (HAS_JSON_API_PACKAGE) {\n      const graphFor = (importSync('@ember-data/graph/-private') as typeof import('@ember-data/graph/-private'))\n        .graphFor;\n\n      this.graph = graphFor(this.store);\n    }\n\n    this._manyArrayCache = Object.create(null) as Record<string, RelatedCollection>;\n    this._relationshipPromisesCache = Object.create(null) as Record<\n      string,\n      Promise<RelatedCollection | RecordInstance>\n    >;\n    this._relationshipProxyCache = Object.create(null) as Record<string, PromiseManyArray | PromiseBelongsTo>;\n    this._pending = Object.create(null) as Record<string, Promise<StableRecordIdentifier | null>>;\n    this.references = Object.create(null) as Record<string, BelongsToReference>;\n  }\n\n  _syncArray(array: RelatedCollection) {\n    // It’s possible the parent side of the relationship may have been destroyed by this point\n    if (this.isDestroyed || this.isDestroying) {\n      return;\n    }\n    const currentState = array[SOURCE];\n    const identifier = this.identifier;\n\n    let [identifiers, jsonApi] = this._getCurrentState(identifier, array.key);\n\n    if (jsonApi.meta) {\n      array.meta = jsonApi.meta;\n    }\n\n    if (jsonApi.links) {\n      array.links = jsonApi.links;\n    }\n\n    currentState.length = 0;\n    fastPush(currentState, identifiers);\n  }\n\n  mutate(mutation: LocalRelationshipOperation): void {\n    this.cache.mutate(mutation);\n  }\n\n  _findBelongsTo(\n    key: string,\n    resource: SingleResourceRelationship,\n    relationship: ResourceEdge,\n    options?: FindOptions\n  ): Promise<RecordInstance | null> {\n    // TODO @runspired follow up if parent isNew then we should not be attempting load here\n    // TODO @runspired follow up on whether this should be in the relationship requests cache\n    return this._findBelongsToByJsonApiResource(resource, this.identifier, relationship, options).then(\n      (identifier: StableRecordIdentifier | null) =>\n        handleCompletedRelationshipRequest(this, key, relationship, identifier),\n      (e: Error) => handleCompletedRelationshipRequest(this, key, relationship, null, e)\n    );\n  }\n\n  reloadBelongsTo(key: string, options?: FindOptions): Promise<RecordInstance | null> {\n    let loadingPromise = this._relationshipPromisesCache[key] as Promise<RecordInstance | null> | undefined;\n    if (loadingPromise) {\n      return loadingPromise;\n    }\n\n    const relationship = this.graph.get(this.identifier, key);\n    assert(`Expected ${key} to be a belongs-to relationship`, isBelongsTo(relationship));\n\n    let resource = this.cache.getRelationship(this.identifier, key) as SingleResourceRelationship;\n    relationship.state.hasFailedLoadAttempt = false;\n    relationship.state.shouldForceReload = true;\n    let promise = this._findBelongsTo(key, resource, relationship, options);\n    if (this._relationshipProxyCache[key]) {\n      // @ts-expect-error\n      return this._updatePromiseProxyFor('belongsTo', key, { promise });\n    }\n    return promise;\n  }\n\n  getBelongsTo(key: string, options?: FindOptions): PromiseBelongsTo | RecordInstance | null {\n    const { identifier, cache } = this;\n    let resource = cache.getRelationship(this.identifier, key) as SingleResourceRelationship;\n    let relatedIdentifier = resource && resource.data ? resource.data : null;\n    assert(`Expected a stable identifier`, !relatedIdentifier || isStableIdentifier(relatedIdentifier));\n\n    const store = this.store;\n    const relationship = this.graph.get(this.identifier, key);\n    assert(`Expected ${key} to be a belongs-to relationship`, isBelongsTo(relationship));\n\n    let isAsync = relationship.definition.isAsync;\n    let _belongsToState: BelongsToProxyMeta = {\n      key,\n      store,\n      legacySupport: this,\n      modelName: relationship.definition.type,\n    };\n\n    if (isAsync) {\n      if (relationship.state.hasFailedLoadAttempt) {\n        return this._relationshipProxyCache[key] as PromiseBelongsTo;\n      }\n\n      let promise = this._findBelongsTo(key, resource, relationship, options);\n      const isLoaded = relatedIdentifier && store._instanceCache.recordIsLoaded(relatedIdentifier);\n\n      return this._updatePromiseProxyFor('belongsTo', key, {\n        promise,\n        content: isLoaded ? store._instanceCache.getRecord(relatedIdentifier!) : null,\n        _belongsToState,\n      });\n    } else {\n      if (relatedIdentifier === null) {\n        return null;\n      } else {\n        let toReturn = store._instanceCache.getRecord(relatedIdentifier);\n        assert(\n          `You looked up the '${key}' relationship on a '${identifier.type}' with id ${\n            identifier.id || 'null'\n          } but some of the associated records were not loaded. Either make sure they are all loaded together with the parent record, or specify that the relationship is async (\\`belongsTo(<type>, { async: true, inverse: <inverse> })\\`)`,\n          toReturn === null || store._instanceCache.recordIsLoaded(relatedIdentifier, true)\n        );\n        return toReturn;\n      }\n    }\n  }\n\n  setDirtyBelongsTo(key: string, value: RecordInstance | null) {\n    return this.cache.mutate(\n      {\n        op: 'replaceRelatedRecord',\n        record: this.identifier,\n        field: key,\n        value: extractIdentifierFromRecord(value),\n      },\n      // @ts-expect-error\n      true\n    );\n  }\n\n  _getCurrentState(\n    identifier: StableRecordIdentifier,\n    field: string\n  ): [StableRecordIdentifier[], CollectionResourceRelationship] {\n    let jsonApi = this.cache.getRelationship(identifier, field) as CollectionResourceRelationship;\n    const cache = this.store._instanceCache;\n    let identifiers: StableRecordIdentifier[] = [];\n    if (jsonApi.data) {\n      for (let i = 0; i < jsonApi.data.length; i++) {\n        const relatedIdentifier = jsonApi.data[i];\n        assert(`Expected a stable identifier`, isStableIdentifier(relatedIdentifier));\n        if (cache.recordIsLoaded(relatedIdentifier, true)) {\n          identifiers.push(relatedIdentifier);\n        }\n      }\n    }\n\n    return [identifiers, jsonApi];\n  }\n\n  getManyArray(key: string, definition?: UpgradedMeta): RelatedCollection {\n    if (HAS_JSON_API_PACKAGE) {\n      let manyArray: RelatedCollection | undefined = this._manyArrayCache[key];\n      if (!definition) {\n        definition = this.graph.get(this.identifier, key).definition;\n      }\n\n      if (!manyArray) {\n        const [identifiers, doc] = this._getCurrentState(this.identifier, key);\n\n        manyArray = new RelatedCollection({\n          store: this.store,\n          type: definition.type,\n          identifier: this.identifier,\n          cache: this.cache,\n          identifiers,\n          key,\n          meta: doc.meta || null,\n          links: doc.links || null,\n          isPolymorphic: definition.isPolymorphic,\n          isAsync: definition.isAsync,\n          _inverseIsAsync: definition.inverseIsAsync,\n          manager: this,\n          isLoaded: !definition.isAsync,\n          allowMutation: true,\n        });\n        this._manyArrayCache[key] = manyArray;\n      }\n\n      return manyArray;\n    }\n    assert('hasMany only works with the @ember-data/json-api package');\n  }\n\n  fetchAsyncHasMany(\n    key: string,\n    relationship: CollectionEdge,\n    manyArray: RelatedCollection,\n    options?: FindOptions\n  ): Promise<RelatedCollection> {\n    if (HAS_JSON_API_PACKAGE) {\n      let loadingPromise = this._relationshipPromisesCache[key] as Promise<RelatedCollection> | undefined;\n      if (loadingPromise) {\n        return loadingPromise;\n      }\n\n      const jsonApi = this.cache.getRelationship(this.identifier, key) as CollectionResourceRelationship;\n      const promise = this._findHasManyByJsonApiResource(jsonApi, this.identifier, relationship, options);\n\n      if (!promise) {\n        manyArray.isLoaded = true;\n        return Promise.resolve(manyArray);\n      }\n\n      loadingPromise = promise.then(\n        () => handleCompletedRelationshipRequest(this, key, relationship, manyArray),\n        (e: Error) => handleCompletedRelationshipRequest(this, key, relationship, manyArray, e)\n      );\n      this._relationshipPromisesCache[key] = loadingPromise;\n      return loadingPromise;\n    }\n    assert('hasMany only works with the @ember-data/json-api package');\n  }\n\n  reloadHasMany(key: string, options?: FindOptions) {\n    if (HAS_JSON_API_PACKAGE) {\n      let loadingPromise = this._relationshipPromisesCache[key];\n      if (loadingPromise) {\n        return loadingPromise;\n      }\n      const relationship = this.graph.get(this.identifier, key) as CollectionEdge;\n      const { definition, state } = relationship;\n\n      state.hasFailedLoadAttempt = false;\n      state.shouldForceReload = true;\n      let manyArray = this.getManyArray(key, definition);\n      let promise = this.fetchAsyncHasMany(key, relationship, manyArray, options);\n\n      if (this._relationshipProxyCache[key]) {\n        return this._updatePromiseProxyFor('hasMany', key, { promise });\n      }\n\n      return promise;\n    }\n    assert(`hasMany only works with the @ember-data/json-api package`);\n  }\n\n  getHasMany(key: string, options?: FindOptions): PromiseManyArray | RelatedCollection {\n    if (HAS_JSON_API_PACKAGE) {\n      const relationship = this.graph.get(this.identifier, key) as CollectionEdge;\n      const { definition, state } = relationship;\n      let manyArray = this.getManyArray(key, definition);\n\n      if (definition.isAsync) {\n        if (state.hasFailedLoadAttempt) {\n          return this._relationshipProxyCache[key] as PromiseManyArray;\n        }\n\n        let promise = this.fetchAsyncHasMany(key, relationship, manyArray, options);\n\n        return this._updatePromiseProxyFor('hasMany', key, { promise, content: manyArray });\n      } else {\n        assert(\n          `You looked up the '${key}' relationship on a '${this.identifier.type}' with id ${\n            this.identifier.id || 'null'\n          } but some of the associated records were not loaded. Either make sure they are all loaded together with the parent record, or specify that the relationship is async ('hasMany(<type>, { async: true, inverse: <inverse> })')`,\n          !anyUnloaded(this.store, relationship)\n        );\n\n        return manyArray;\n      }\n    }\n    assert(`hasMany only works with the @ember-data/json-api package`);\n  }\n\n  _updatePromiseProxyFor(kind: 'hasMany', key: string, args: HasManyProxyCreateArgs): PromiseManyArray;\n  _updatePromiseProxyFor(kind: 'belongsTo', key: string, args: BelongsToProxyCreateArgs): PromiseBelongsTo;\n  _updatePromiseProxyFor(\n    kind: 'belongsTo',\n    key: string,\n    args: { promise: Promise<RecordInstance | null> }\n  ): PromiseBelongsTo;\n  _updatePromiseProxyFor(\n    kind: 'hasMany' | 'belongsTo',\n    key: string,\n    args: BelongsToProxyCreateArgs | HasManyProxyCreateArgs | { promise: Promise<RecordInstance | null> }\n  ): PromiseBelongsTo | PromiseManyArray {\n    let promiseProxy = this._relationshipProxyCache[key];\n    if (kind === 'hasMany') {\n      const { promise, content } = args as HasManyProxyCreateArgs;\n      if (promiseProxy) {\n        assert(`Expected a PromiseManyArray`, '_update' in promiseProxy);\n        promiseProxy._update(promise, content);\n      } else {\n        promiseProxy = this._relationshipProxyCache[key] = new PromiseManyArray(promise, content);\n      }\n      return promiseProxy;\n    }\n    if (promiseProxy) {\n      const { promise, content } = args as BelongsToProxyCreateArgs;\n      assert(`Expected a PromiseBelongsTo`, '_belongsToState' in promiseProxy);\n\n      if (content !== undefined) {\n        promiseProxy.set('content', content);\n      }\n      void promiseProxy.set('promise', promise);\n    } else {\n      promiseProxy = (PromiseBelongsTo as unknown as PromiseBelongsToFactory).create(args as BelongsToProxyCreateArgs);\n      this._relationshipProxyCache[key] = promiseProxy;\n    }\n\n    return promiseProxy;\n  }\n\n  referenceFor(kind: string | null, name: string) {\n    let reference = this.references[name];\n\n    if (!reference) {\n      if (!HAS_JSON_API_PACKAGE) {\n        // TODO @runspired while this feels odd, it is not a regression in capability because we do\n        // not today support references pulling from RecordDatas other than our own\n        // because of the intimate API access involved. This is something we will need to redesign.\n        assert(`snapshot.belongsTo only supported for @ember-data/json-api`);\n      }\n      const { graph, identifier } = this;\n      const relationship = graph.get(identifier, name);\n\n      if (DEBUG) {\n        if (kind) {\n          let modelName = identifier.type;\n          let actualRelationshipKind = relationship.definition.kind;\n          assert(\n            `You tried to get the '${name}' relationship on a '${modelName}' via record.${kind}('${name}'), but the relationship is of kind '${actualRelationshipKind}'. Use record.${actualRelationshipKind}('${name}') instead.`,\n            actualRelationshipKind === kind\n          );\n        }\n      }\n\n      let relationshipKind = relationship.definition.kind;\n\n      if (relationshipKind === 'belongsTo') {\n        reference = new BelongsToReference(this.store, graph, identifier, relationship as ResourceEdge, name);\n      } else if (relationshipKind === 'hasMany') {\n        reference = new HasManyReference(this.store, graph, identifier, relationship as CollectionEdge, name);\n      }\n\n      this.references[name] = reference;\n    }\n\n    return reference;\n  }\n\n  _findHasManyByJsonApiResource(\n    resource: CollectionResourceRelationship,\n    parentIdentifier: StableRecordIdentifier,\n    relationship: CollectionEdge,\n    options: FindOptions = {}\n  ): Promise<void | unknown[]> | void {\n    if (HAS_JSON_API_PACKAGE) {\n      if (!resource) {\n        return;\n      }\n      const { definition, state } = relationship;\n      const adapter = this.store.adapterFor(definition.type);\n      const { isStale, hasDematerializedInverse, hasReceivedData, isEmpty, shouldForceReload } = state;\n      const allInverseRecordsAreLoaded = areAllInverseRecordsLoaded(this.store, resource);\n      const identifiers = resource.data;\n      const shouldFindViaLink =\n        resource.links &&\n        resource.links.related &&\n        (typeof adapter.findHasMany === 'function' || typeof identifiers === 'undefined') &&\n        (shouldForceReload || hasDematerializedInverse || isStale || (!allInverseRecordsAreLoaded && !isEmpty));\n\n      const relationshipMeta = this.store\n        .getSchemaDefinitionService()\n        .relationshipsDefinitionFor({ type: definition.inverseType })[definition.key];\n\n      const request = {\n        useLink: shouldFindViaLink,\n        field: relationshipMeta,\n        links: resource.links,\n        meta: resource.meta,\n        options,\n        record: parentIdentifier,\n      };\n\n      // fetch via link\n      if (shouldFindViaLink) {\n        assert(`Expected collection to be an array`, !identifiers || Array.isArray(identifiers));\n        assert(`Expected stable identifiers`, !identifiers || identifiers.every(isStableIdentifier));\n\n        return this.store.request({\n          op: 'findHasMany',\n          records: identifiers || [],\n          data: request,\n          cacheOptions: { [Symbol.for('ember-data:skip-cache')]: true },\n        }) as unknown as Promise<void>;\n      }\n\n      const preferLocalCache = hasReceivedData && !isEmpty;\n      const hasLocalPartialData =\n        hasDematerializedInverse || (isEmpty && Array.isArray(identifiers) && identifiers.length > 0);\n      const attemptLocalCache = !shouldForceReload && !isStale && (preferLocalCache || hasLocalPartialData);\n\n      if (attemptLocalCache && allInverseRecordsAreLoaded) {\n        return;\n      }\n\n      const hasData = hasReceivedData && !isEmpty;\n      if (attemptLocalCache || hasData || hasLocalPartialData) {\n        assert(`Expected collection to be an array`, Array.isArray(identifiers));\n        assert(`Expected stable identifiers`, identifiers.every(isStableIdentifier));\n\n        options.reload = options.reload || !attemptLocalCache || undefined;\n        return this.store.request({\n          op: 'findHasMany',\n          records: identifiers,\n          data: request,\n          cacheOptions: { [Symbol.for('ember-data:skip-cache')]: true },\n        }) as unknown as Promise<void>;\n      }\n\n      // we were explicitly told we have no data and no links.\n      //   TODO if the relationshipIsStale, should we hit the adapter anyway?\n      return;\n    }\n    assert(`hasMany only works with the @ember-data/json-api package`);\n  }\n\n  _findBelongsToByJsonApiResource(\n    resource: SingleResourceRelationship,\n    parentIdentifier: StableRecordIdentifier,\n    relationship: ResourceEdge,\n    options: FindOptions = {}\n  ): Promise<StableRecordIdentifier | null> {\n    if (!resource) {\n      return Promise.resolve(null);\n    }\n    const key = relationship.definition.key;\n\n    // interleaved promises mean that we MUST cache this here\n    // in order to prevent infinite re-render if the request\n    // fails.\n    if (this._pending[key]) {\n      return this._pending[key]!;\n    }\n\n    const identifier = resource.data ? resource.data : null;\n    assert(`Expected a stable identifier`, !identifier || isStableIdentifier(identifier));\n\n    let { isStale, hasDematerializedInverse, hasReceivedData, isEmpty, shouldForceReload } = relationship.state;\n\n    const allInverseRecordsAreLoaded = areAllInverseRecordsLoaded(this.store, resource);\n    const shouldFindViaLink =\n      resource.links?.related &&\n      (shouldForceReload || hasDematerializedInverse || isStale || (!allInverseRecordsAreLoaded && !isEmpty));\n\n    const relationshipMeta = this.store.getSchemaDefinitionService().relationshipsDefinitionFor(this.identifier)[\n      relationship.definition.key\n    ];\n    assert(`Attempted to access a belongsTo relationship but no definition exists for it`, relationshipMeta);\n    const request = {\n      useLink: shouldFindViaLink,\n      field: relationshipMeta,\n      links: resource.links,\n      meta: resource.meta,\n      options,\n      record: parentIdentifier,\n    };\n\n    // fetch via link\n    if (shouldFindViaLink) {\n      const future = this.store.request<StableRecordIdentifier | null>({\n        op: 'findBelongsTo',\n        records: identifier ? [identifier] : [],\n        data: request,\n        cacheOptions: { [Symbol.for('ember-data:skip-cache')]: true },\n      });\n      this._pending[key] = future\n        .then((doc) => doc.content)\n        .finally(() => {\n          this._pending[key] = undefined;\n        });\n      return this._pending[key]!;\n    }\n\n    const preferLocalCache = hasReceivedData && allInverseRecordsAreLoaded && !isEmpty;\n    const hasLocalPartialData = hasDematerializedInverse || (isEmpty && resource.data);\n    // null is explicit empty, undefined is \"we don't know anything\"\n    const localDataIsEmpty = !identifier;\n    const attemptLocalCache = !shouldForceReload && !isStale && (preferLocalCache || hasLocalPartialData);\n\n    // we dont need to fetch and are empty\n    if (attemptLocalCache && localDataIsEmpty) {\n      return Promise.resolve(null);\n    }\n\n    // we dont need to fetch because we are local state\n    const resourceIsLocal = identifier?.id === null;\n    if ((attemptLocalCache && allInverseRecordsAreLoaded) || resourceIsLocal) {\n      return Promise.resolve(identifier);\n    }\n\n    // we may need to fetch\n    if (identifier) {\n      assert(`Cannot fetch belongs-to relationship with no information`, identifier);\n      options.reload = options.reload || !attemptLocalCache || undefined;\n\n      this._pending[key] = this.store\n        .request<StableRecordIdentifier | null>({\n          op: 'findBelongsTo',\n          records: [identifier],\n          data: request,\n          cacheOptions: { [Symbol.for('ember-data:skip-cache')]: true },\n        })\n        .then((doc) => doc.content)\n        .finally(() => {\n          this._pending[key] = undefined;\n        });\n      return this._pending[key]!;\n    }\n\n    // we were explicitly told we have no data and no links.\n    //   TODO if the relationshipIsStale, should we hit the adapter anyway?\n    return Promise.resolve(null);\n  }\n\n  destroy() {\n    this.isDestroying = true;\n\n    let cache: Record<string, { destroy(): void }> = this._manyArrayCache;\n    this._manyArrayCache = Object.create(null);\n    Object.keys(cache).forEach((key) => {\n      cache[key]!.destroy();\n    });\n\n    cache = this._relationshipProxyCache;\n    this._relationshipProxyCache = Object.create(null);\n    Object.keys(cache).forEach((key) => {\n      const proxy = cache[key]!;\n      if (proxy.destroy) {\n        proxy.destroy();\n      }\n    });\n\n    cache = this.references;\n    this.references = Object.create(null);\n    Object.keys(cache).forEach((key) => {\n      cache[key]!.destroy();\n    });\n    this.isDestroyed = true;\n  }\n}\n\nfunction handleCompletedRelationshipRequest(\n  recordExt: LegacySupport,\n  key: string,\n  relationship: ResourceEdge,\n  value: StableRecordIdentifier | null\n): RecordInstance | null;\nfunction handleCompletedRelationshipRequest(\n  recordExt: LegacySupport,\n  key: string,\n  relationship: CollectionEdge,\n  value: RelatedCollection\n): RelatedCollection;\nfunction handleCompletedRelationshipRequest(\n  recordExt: LegacySupport,\n  key: string,\n  relationship: ResourceEdge,\n  value: null,\n  error: Error\n): never;\nfunction handleCompletedRelationshipRequest(\n  recordExt: LegacySupport,\n  key: string,\n  relationship: CollectionEdge,\n  value: RelatedCollection,\n  error: Error\n): never;\nfunction handleCompletedRelationshipRequest(\n  recordExt: LegacySupport,\n  key: string,\n  relationship: ResourceEdge | CollectionEdge,\n  value: RelatedCollection | StableRecordIdentifier | null,\n  error?: Error\n): RelatedCollection | RecordInstance | null {\n  delete recordExt._relationshipPromisesCache[key];\n  relationship.state.shouldForceReload = false;\n  const isHasMany = relationship.definition.kind === 'hasMany';\n\n  if (isHasMany) {\n    // we don't notify the record property here to avoid refetch\n    // only the many array\n    (value as RelatedCollection).notify();\n  }\n\n  if (error) {\n    relationship.state.hasFailedLoadAttempt = true;\n    let proxy = recordExt._relationshipProxyCache[key];\n    // belongsTo relationships are sometimes unloaded\n    // when a load fails, in this case we need\n    // to make sure that we aren't proxying\n    // to destroyed content\n    // for the sync belongsTo reload case there will be no proxy\n    // for the async reload case there will be no proxy if the ui\n    // has never been accessed\n    if (proxy && !isHasMany) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      if (proxy.content && proxy.content.isDestroying) {\n        (proxy as PromiseBelongsTo).set('content', null);\n      }\n      recordExt.store.notifications._flush();\n    }\n\n    throw error;\n  }\n\n  if (isHasMany) {\n    (value as RelatedCollection).isLoaded = true;\n  } else {\n    recordExt.store.notifications._flush();\n  }\n\n  relationship.state.hasFailedLoadAttempt = false;\n  // only set to not stale if no error is thrown\n  relationship.state.isStale = false;\n\n  return isHasMany || !value\n    ? (value as RelatedCollection | null)\n    : recordExt.store.peekRecord(value as StableRecordIdentifier);\n}\n\ntype PromiseProxyRecord = { then(): void; content: RecordInstance | null | undefined };\n\nfunction extractIdentifierFromRecord(record: PromiseProxyRecord | RecordInstance | null) {\n  if (!record) {\n    return null;\n  }\n\n  return recordIdentifierFor(record);\n}\n\nfunction anyUnloaded(store: Store, relationship: CollectionEdge) {\n  const graph = store._graph!;\n  const relationshipData = graph.getData(\n    relationship.identifier,\n    relationship.definition.key\n  ) as CollectionRelationship;\n  const state = relationshipData.data;\n  const cache = store._instanceCache;\n  const unloaded = state?.find((s) => {\n    let isLoaded = cache.recordIsLoaded(s, true);\n    return !isLoaded;\n  });\n\n  return unloaded || false;\n}\n\nexport function areAllInverseRecordsLoaded(store: Store, resource: JsonApiRelationship): boolean {\n  const instanceCache = store._instanceCache;\n  const identifiers = resource.data;\n\n  if (Array.isArray(identifiers)) {\n    assert(`Expected stable identifiers`, identifiers.every(isStableIdentifier));\n    // treat as collection\n    // check for unloaded records\n    return identifiers.every((identifier: StableRecordIdentifier) => instanceCache.recordIsLoaded(identifier));\n  }\n\n  // treat as single resource\n  if (!identifiers) return true;\n\n  assert(`Expected stable identifiers`, isStableIdentifier(identifiers));\n  return instanceCache.recordIsLoaded(identifiers);\n}\n\nfunction isBelongsTo(relationship: GraphEdge): relationship is ResourceEdge {\n  return relationship.definition.kind === 'belongsTo';\n}\n","import { cacheFor } from '@ember/object/internals';\n\nimport type Store from '@ember-data/store';\nimport type { NotificationType } from '@ember-data/store/-private/managers/notification-manager';\nimport type { StableRecordIdentifier } from '@ember-data/types/q/identifier';\n\nimport type Model from './model';\nimport { LEGACY_SUPPORT } from './model';\n\nexport default function notifyChanges(\n  identifier: StableRecordIdentifier,\n  value: NotificationType,\n  key: string | undefined,\n  record: Model,\n  store: Store\n) {\n  if (value === 'attributes') {\n    if (key) {\n      notifyAttribute(store, identifier, key, record);\n    } else {\n      record.eachAttribute((name) => {\n        notifyAttribute(store, identifier, name, record);\n      });\n    }\n  } else if (value === 'relationships') {\n    if (key) {\n      let meta = record.constructor.relationshipsByName.get(key);\n      notifyRelationship(identifier, key, record, meta);\n    } else {\n      record.eachRelationship((name, meta) => {\n        notifyRelationship(identifier, name, record, meta);\n      });\n    }\n  } else if (value === 'identity') {\n    record.notifyPropertyChange('id');\n  }\n}\n\nfunction notifyRelationship(identifier: StableRecordIdentifier, key: string, record: Model, meta) {\n  if (meta.kind === 'belongsTo') {\n    record.notifyPropertyChange(key);\n  } else if (meta.kind === 'hasMany') {\n    let support = LEGACY_SUPPORT.get(identifier);\n    let manyArray = support && support._manyArrayCache[key];\n    let hasPromise = support && support._relationshipPromisesCache[key];\n\n    if (manyArray && hasPromise) {\n      // do nothing, we will notify the ManyArray directly\n      // once the fetch has completed.\n      return;\n    }\n\n    if (manyArray) {\n      manyArray.notify();\n\n      //We need to notifyPropertyChange in the adding case because we need to make sure\n      //we fetch the newly added record in case it is unloaded\n      //TODO(Igor): Consider whether we could do this only if the record state is unloaded\n      if (!meta.options || meta.options.async || meta.options.async === undefined) {\n        record.notifyPropertyChange(key);\n      }\n    }\n  }\n}\n\nfunction notifyAttribute(store: Store, identifier: StableRecordIdentifier, key: string, record: Model) {\n  let currentValue = cacheFor(record, key);\n  const cache = store.cache;\n  if (currentValue !== cache.getAttr(identifier, key)) {\n    record.notifyPropertyChange(key);\n  }\n}\n","import { assert } from '@ember/debug';\nimport { dependentKeyCompat } from '@ember/object/compat';\nimport { cached, tracked } from '@glimmer/tracking';\n\nimport { DEBUG } from '@ember-data/env';\nimport type Store from '@ember-data/store';\nimport { storeFor } from '@ember-data/store';\nimport { recordIdentifierFor } from '@ember-data/store/-private';\nimport type { NotificationType } from '@ember-data/store/-private/managers/notification-manager';\nimport type RequestStateService from '@ember-data/store/-private/network/request-cache';\nimport { addToTransaction, subscribe } from '@ember-data/tracking/-private';\nimport type { Cache } from '@ember-data/types/q/cache';\nimport type { StableRecordIdentifier } from '@ember-data/types/q/identifier';\n\nimport type Model from './model';\n\nconst SOURCE_POINTER_REGEXP = /^\\/?data\\/(attributes|relationships)\\/(.*)/;\nconst SOURCE_POINTER_PRIMARY_REGEXP = /^\\/?data/;\nconst PRIMARY_ATTRIBUTE_KEY = 'base';\nfunction isInvalidError(error) {\n  return error && error.isAdapterError === true && error.code === 'InvalidError';\n}\n\n/**\n * Tag provides a cache for a getter\n * that recomputes only when a specific\n * tracked property that it manages is dirtied.\n *\n * This allows us to bust the cache for a value\n * that otherwise doesn't access anything tracked\n * as well as control the timing of that notification.\n *\n * @internal\n */\nclass Tag {\n  declare rev: number;\n  declare isDirty: boolean;\n  declare value: any;\n  declare t: boolean;\n  declare _debug_base: string;\n  declare _debug_prop: string;\n\n  constructor() {\n    if (DEBUG) {\n      const [base, prop] = arguments as unknown as [string, string];\n      this._debug_base = base;\n      this._debug_prop = prop;\n    }\n    this.rev = 1;\n    this.isDirty = true;\n    this.value = undefined;\n    /*\n     * whether this was part of a transaction when mutated\n     */\n    this.t = false;\n  }\n  @tracked ref = null;\n\n  notify() {\n    this.isDirty = true;\n    addToTransaction(this);\n    this.rev++;\n  }\n  consume(v) {\n    this.isDirty = false;\n    this.value = v; // set cached value\n  }\n}\n\nconst Tags = new WeakMap();\nfunction getTag(record, key) {\n  let tags = Tags.get(record);\n  if (!tags) {\n    tags = Object.create(null);\n    Tags.set(record, tags);\n  }\n  // @ts-expect-error\n  return (tags[key] = tags[key] || (DEBUG ? new Tag(record.constructor.modelName, key) : new Tag()));\n}\n\nexport function peekTag(record, key) {\n  let tags = Tags.get(record);\n  return tags && tags[key];\n}\n\n/**\n * A decorattor that caches a getter while\n * providing the ability to bust that cache\n * when we so choose in a way that notifies\n * glimmer's tracking system.\n *\n * @internal\n */\nexport function tagged(_target, key, desc) {\n  const getter = desc.get;\n  const setter = desc.set;\n  desc.get = function () {\n    let tag = getTag(this, key);\n    subscribe(tag);\n\n    if (tag.isDirty) {\n      tag.consume(getter.call(this));\n    }\n\n    return tag.value;\n  };\n  desc.set = function (v) {\n    getTag(this, key); // ensure tag is setup in case we want to use it.\n    // probably notify here but not yet.\n    setter.call(this, v);\n  };\n  dependentKeyCompat(desc);\n  return desc;\n}\n\n/**\nHistorically EmberData managed a state machine\nfor each record, the localState for which\nwas reflected onto Model.\n\nThis implements the flags and stateName for backwards compat\nwith the state tree that used to be possible (listed below).\n\nstateName and dirtyType are candidates for deprecation.\n\nroot\n  empty\n    deleted    // hidden from stateName\n    preloaded  // hidden from stateName\n\n  loading\n     empty     // hidden from stateName\n     preloaded // hidden from stateName\n\n  loaded\n    saved\n    updated\n      uncommitted\n      invalid\n      inFlight\n    created\n      uncommitted\n      invalid\n      inFlight\n\n  deleted\n    saved\n      new      // hidden from stateName\n    uncommitted\n    invalid\n    inFlight\n\n  @internal\n*/\nexport default class RecordState {\n  declare store: Store;\n  declare identifier: StableRecordIdentifier;\n  declare record: Model;\n  declare rs: RequestStateService;\n\n  declare pendingCount: number;\n  declare fulfilledCount: number;\n  declare rejectedCount: number;\n  declare cache: Cache;\n  declare _errorRequests: any[];\n  declare _lastError: any;\n  declare handler: object;\n\n  constructor(record: Model) {\n    const store = storeFor(record)!;\n    const identity = recordIdentifierFor(record);\n\n    this.identifier = identity;\n    this.record = record;\n    this.cache = store.cache;\n\n    this.pendingCount = 0;\n    this.fulfilledCount = 0;\n    this.rejectedCount = 0;\n    this._errorRequests = [];\n    this._lastError = null;\n\n    let requests = store.getRequestStateService();\n    let notifications = store.notifications;\n\n    const handleRequest = (req) => {\n      if (req.type === 'mutation') {\n        switch (req.state) {\n          case 'pending':\n            this.isSaving = true;\n            break;\n          case 'rejected':\n            this.isSaving = false;\n            this._lastError = req;\n            if (!(req.response && isInvalidError(req.response.data))) {\n              this._errorRequests.push(req);\n            }\n\n            notifyErrorsStateChanged(this);\n            break;\n          case 'fulfilled':\n            this._errorRequests = [];\n            this._lastError = null;\n            this.isSaving = false;\n            this.notify('isDirty');\n            notifyErrorsStateChanged(this);\n            break;\n        }\n      } else {\n        switch (req.state) {\n          case 'pending':\n            this.pendingCount++;\n            this.notify('isLoading');\n            break;\n          case 'rejected':\n            this.pendingCount--;\n            this._lastError = req;\n            if (!(req.response && isInvalidError(req.response.data))) {\n              this._errorRequests.push(req);\n            }\n            this.notify('isLoading');\n            notifyErrorsStateChanged(this);\n            break;\n          case 'fulfilled':\n            this.pendingCount--;\n            this.fulfilledCount++;\n            this.notify('isLoading');\n            this.notify('isDirty');\n            notifyErrorsStateChanged(this);\n            this._errorRequests = [];\n            this._lastError = null;\n            break;\n        }\n      }\n    };\n\n    requests.subscribeForRecord(identity, handleRequest);\n\n    // we instantiate lazily\n    // so we grab anything we don't have yet\n    if (!DEBUG) {\n      const lastRequest = requests.getLastRequestForRecord(identity);\n      if (lastRequest) {\n        handleRequest(lastRequest);\n      }\n    }\n\n    this.handler = notifications.subscribe(\n      identity,\n      (identifier: StableRecordIdentifier, type: NotificationType, key?: string) => {\n        switch (type) {\n          case 'state':\n            this.notify('isSaved');\n            this.notify('isNew');\n            this.notify('isDeleted');\n            this.notify('isDirty');\n            break;\n          case 'attributes':\n            this.notify('isEmpty');\n            this.notify('isDirty');\n            break;\n          case 'errors':\n            this.updateInvalidErrors(this.record.errors);\n            this.notify('isValid');\n            break;\n        }\n      }\n    );\n  }\n\n  destroy() {\n    storeFor(this.record)!.notifications.unsubscribe(this.handler);\n  }\n\n  notify(key) {\n    getTag(this, key).notify();\n  }\n\n  updateInvalidErrors(errors) {\n    assert(\n      `Expected the Cache instance for ${this.identifier.lid}  to implement getErrors(identifier)`,\n      typeof this.cache.getErrors === 'function'\n    );\n    let jsonApiErrors = this.cache.getErrors(this.identifier);\n\n    errors.clear();\n\n    for (let i = 0; i < jsonApiErrors.length; i++) {\n      let error = jsonApiErrors[i];\n\n      if (error.source && error.source.pointer) {\n        let keyMatch = error.source.pointer.match(SOURCE_POINTER_REGEXP);\n        let key: string | undefined;\n\n        if (keyMatch) {\n          key = keyMatch[2];\n        } else if (error.source.pointer.search(SOURCE_POINTER_PRIMARY_REGEXP) !== -1) {\n          key = PRIMARY_ATTRIBUTE_KEY;\n        }\n\n        if (key) {\n          let errMsg = error.detail || error.title;\n          errors.add(key, errMsg);\n        }\n      }\n    }\n  }\n\n  cleanErrorRequests() {\n    this.notify('isValid');\n    this.notify('isError');\n    this.notify('adapterError');\n    this._errorRequests = [];\n    this._lastError = null;\n  }\n\n  @tracked isSaving = false;\n\n  @tagged\n  get isLoading() {\n    return !this.isLoaded && this.pendingCount > 0 && this.fulfilledCount === 0;\n  }\n\n  @tagged\n  get isLoaded() {\n    if (this.isNew) {\n      return true;\n    }\n    return this.fulfilledCount > 0 || !this.isEmpty;\n  }\n\n  @tagged\n  get isSaved() {\n    let rd = this.cache;\n    if (this.isDeleted) {\n      assert(`Expected Cache to implement isDeletionCommitted()`, rd.isDeletionCommitted);\n      return rd.isDeletionCommitted(this.identifier);\n    }\n    if (this.isNew || this.isEmpty || !this.isValid || this.isDirty || this.isLoading) {\n      return false;\n    }\n    return true;\n  }\n\n  @tagged\n  get isEmpty() {\n    let rd = this.cache;\n    // TODO this is not actually an RFC'd concept. Determine the\n    // correct heuristic to replace this with.\n    assert(`Expected Cache to implement isEmpty()`, rd.isEmpty);\n    return !this.isNew && rd.isEmpty(this.identifier);\n  }\n\n  @tagged\n  get isNew() {\n    let rd = this.cache;\n    assert(`Expected Cache to implement isNew()`, rd.isNew);\n    return rd.isNew(this.identifier);\n  }\n\n  @tagged\n  get isDeleted() {\n    let rd = this.cache;\n    assert(`Expected Cache to implement isDeleted()`, rd.isDeleted);\n    return rd.isDeleted(this.identifier);\n  }\n\n  @tagged\n  get isValid() {\n    return this.record.errors.length === 0;\n  }\n\n  @tagged\n  get isDirty() {\n    let rd = this.cache;\n    if (this.isEmpty || rd.isDeletionCommitted(this.identifier) || (this.isDeleted && this.isNew)) {\n      return false;\n    }\n    return this.isDeleted || this.isNew || rd.hasChangedAttrs(this.identifier);\n  }\n\n  @tagged\n  get isError() {\n    let errorReq = this._errorRequests[this._errorRequests.length - 1];\n    if (!errorReq) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  @tagged\n  get adapterError() {\n    let request = this._lastError;\n    if (!request) {\n      return null;\n    }\n    return request.state === 'rejected' && request.response.data;\n  }\n\n  @cached\n  get isPreloaded() {\n    return !this.isEmpty && this.isLoading;\n  }\n\n  @cached\n  get stateName() {\n    // we might be empty while loading so check this first\n    if (this.isLoading) {\n      return 'root.loading';\n\n      // got nothing yet or were unloaded\n    } else if (this.isEmpty) {\n      return 'root.empty';\n\n      // deleted substates\n    } else if (this.isDeleted) {\n      if (this.isSaving) {\n        return 'root.deleted.inFlight';\n      } else if (this.isSaved) {\n        // TODO ensure isSaved isn't true from previous requests\n        return 'root.deleted.saved';\n      } else if (!this.isValid) {\n        return 'root.deleted.invalid';\n      } else {\n        return 'root.deleted.uncommitted';\n      }\n\n      // loaded.created substates\n    } else if (this.isNew) {\n      if (this.isSaving) {\n        return 'root.loaded.created.inFlight';\n      } else if (!this.isValid) {\n        return 'root.loaded.created.invalid';\n      }\n      return 'root.loaded.created.uncommitted';\n\n      // loaded.updated substates\n    } else if (this.isSaving) {\n      return 'root.loaded.updated.inFlight';\n    } else if (!this.isValid) {\n      return 'root.loaded.updated.invalid';\n    } else if (this.isDirty) {\n      return 'root.loaded.updated.uncommitted';\n\n      // if nothing remains, we are loaded saved!\n    } else {\n      return 'root.loaded.saved';\n    }\n  }\n\n  @cached\n  get dirtyType() {\n    // we might be empty while loading so check this first\n    if (this.isLoading || this.isEmpty) {\n      return '';\n\n      // deleted substates\n    } else if (this.isDirty && this.isDeleted) {\n      return 'deleted';\n\n      // loaded.created substates\n    } else if (this.isNew) {\n      return 'created';\n\n      // loaded.updated substates\n    } else if (this.isSaving || !this.isValid || this.isDirty) {\n      return 'updated';\n\n      // if nothing remains, we are loaded saved!\n    } else {\n      return '';\n    }\n  }\n}\n\nfunction notifyErrorsStateChanged(state: RecordState) {\n  state.notify('isValid');\n  state.notify('isError');\n  state.notify('adapterError');\n}\n","/**\n  @module @ember-data/model\n */\n\nimport { assert, warn } from '@ember/debug';\nimport EmberObject from '@ember/object';\nimport { dependentKeyCompat } from '@ember/object/compat';\nimport { tracked } from '@glimmer/tracking';\nimport Ember from 'ember';\n\nimport { importSync } from '@embroider/macros';\n\nimport { DEBUG } from '@ember-data/env';\nimport { HAS_DEBUG_PACKAGE } from '@ember-data/packages';\nimport { recordIdentifierFor, storeFor } from '@ember-data/store';\nimport { coerceId, peekCache } from '@ember-data/store/-private';\n\nimport Errors from './errors';\nimport { LegacySupport } from './legacy-relationships-support';\nimport notifyChanges from './notify-changes';\nimport RecordState, { peekTag, tagged } from './record-state';\n\nconst { changeProperties } = Ember;\nexport const LEGACY_SUPPORT = new Map();\n\nexport function lookupLegacySupport(record) {\n  const identifier = recordIdentifierFor(record);\n  let support = LEGACY_SUPPORT.get(identifier);\n\n  if (!support) {\n    assert(`Memory Leak Detected`, !record.isDestroyed && !record.isDestroying);\n    support = new LegacySupport(record);\n    LEGACY_SUPPORT.set(identifier, support);\n    LEGACY_SUPPORT.set(record, support);\n  }\n\n  return support;\n}\n\nfunction findPossibleInverses(type, inverseType, name, relationshipsSoFar) {\n  let possibleRelationships = relationshipsSoFar || [];\n\n  let relationshipMap = inverseType.relationships;\n  if (!relationshipMap) {\n    return possibleRelationships;\n  }\n\n  let relationshipsForType = relationshipMap.get(type.modelName);\n  let relationships = Array.isArray(relationshipsForType)\n    ? relationshipsForType.filter((relationship) => {\n        let optionsForRelationship = relationship.options;\n\n        if (!optionsForRelationship.inverse && optionsForRelationship.inverse !== null) {\n          return true;\n        }\n\n        return name === optionsForRelationship.inverse;\n      })\n    : null;\n\n  if (relationships) {\n    possibleRelationships.push.apply(possibleRelationships, relationships);\n  }\n\n  //Recurse to support polymorphism\n  if (type.superclass) {\n    findPossibleInverses(type.superclass, inverseType, name, possibleRelationships);\n  }\n\n  return possibleRelationships;\n}\n\n/*\n * This decorator allows us to lazily compute\n * an expensive getter on first-access and thereafter\n * never recompute it.\n */\nfunction computeOnce(target, key, desc) {\n  const cache = new WeakMap();\n  let getter = desc.get;\n  desc.get = function () {\n    let meta = cache.get(this);\n\n    if (!meta) {\n      meta = { hasComputed: false, value: undefined };\n      cache.set(this, meta);\n    }\n\n    if (!meta.hasComputed) {\n      meta.value = getter.call(this);\n      meta.hasComputed = true;\n    }\n\n    return meta.value;\n  };\n  return desc;\n}\n\n/**\n  Base class from which Models can be defined.\n\n  ```js\n  import Model, { attr } from '@ember-data/model';\n\n  export default class User extends Model {\n    @attr name;\n  }\n  ```\n\n  @class Model\n  @public\n  @extends Ember.EmberObject\n*/\nclass Model extends EmberObject {\n  ___private_notifications;\n\n  init(options = {}) {\n    if (DEBUG) {\n      if (!options._secretInit && !options._createProps) {\n        throw new Error(\n          'You should not call `create` on a model. Instead, call `store.createRecord` with the attributes you would like to set.'\n        );\n      }\n    }\n    const createProps = options._createProps;\n    const _secretInit = options._secretInit;\n    options._createProps = null;\n    options._secretInit = null;\n\n    let store = (this.store = _secretInit.store);\n    super.init(options);\n\n    let identity = _secretInit.identifier;\n    _secretInit.cb(this, _secretInit.cache, identity, _secretInit.store);\n\n    this.___recordState = DEBUG ? new RecordState(this) : null;\n\n    this.setProperties(createProps);\n\n    let notifications = store.notifications;\n    this.___private_notifications = notifications.subscribe(identity, (identifier, type, key) => {\n      notifyChanges(identifier, type, key, this, store);\n    });\n  }\n\n  destroy() {\n    const identifier = recordIdentifierFor(this);\n    this.___recordState?.destroy();\n    const store = storeFor(this);\n    store.notifications.unsubscribe(this.___private_notifications);\n    // Legacy behavior is to notify the relationships on destroy\n    // such that they \"clear\". It's uncertain this behavior would\n    // be good for a new model paradigm, likely cheaper and safer\n    // to simply not notify, for this reason the store does not itself\n    // notify individual changes once the delete has been signaled,\n    // this decision is left to model instances.\n\n    this.eachRelationship((key, meta) => {\n      if (meta.kind === 'belongsTo') {\n        this.notifyPropertyChange(key);\n      }\n    });\n    LEGACY_SUPPORT.get(this)?.destroy();\n    LEGACY_SUPPORT.delete(this);\n    LEGACY_SUPPORT.delete(identifier);\n\n    super.destroy();\n  }\n\n  /**\n    If this property is `true` the record is in the `empty`\n    state. Empty is the first state all records enter after they have\n    been created. Most records created by the store will quickly\n    transition to the `loading` state if data needs to be fetched from\n    the server or the `created` state if the record is created on the\n    client. A record can also enter the empty state if the adapter is\n    unable to locate the record.\n\n    @property isEmpty\n    @public\n    @type {Boolean}\n    @readOnly\n  */\n  @dependentKeyCompat\n  get isEmpty() {\n    return this.currentState.isEmpty;\n  }\n\n  /**\n    If this property is `true` the record is in the `loading` state. A\n    record enters this state when the store asks the adapter for its\n    data. It remains in this state until the adapter provides the\n    requested data.\n\n    @property isLoading\n    @public\n    @type {Boolean}\n    @readOnly\n  */\n  @dependentKeyCompat\n  get isLoading() {\n    return this.currentState.isLoading;\n  }\n\n  /**\n    If this property is `true` the record is in the `loaded` state. A\n    record enters this state when its data is populated. Most of a\n    record's lifecycle is spent inside substates of the `loaded`\n    state.\n\n    Example\n\n    ```javascript\n    let record = store.createRecord('model');\n    record.isLoaded; // true\n\n    store.findRecord('model', 1).then(function(model) {\n      model.isLoaded; // true\n    });\n    ```\n\n    @property isLoaded\n    @public\n    @type {Boolean}\n    @readOnly\n  */\n  @dependentKeyCompat\n  get isLoaded() {\n    return this.currentState.isLoaded;\n  }\n\n  /**\n    If this property is `true` the record is in the `dirty` state. The\n    record has local changes that have not yet been saved by the\n    adapter. This includes records that have been created (but not yet\n    saved) or deleted.\n\n    Example\n\n    ```javascript\n    let record = store.createRecord('model');\n    record.hasDirtyAttributes; // true\n\n    store.findRecord('model', 1).then(function(model) {\n      model.hasDirtyAttributes; // false\n      model.set('foo', 'some value');\n      model.hasDirtyAttributes; // true\n    });\n    ```\n\n    @since 1.13.0\n    @property hasDirtyAttributes\n    @public\n    @type {Boolean}\n    @readOnly\n  */\n  @dependentKeyCompat\n  get hasDirtyAttributes() {\n    return this.currentState.isDirty;\n  }\n\n  /**\n    If this property is `true` the record is in the `saving` state. A\n    record enters the saving state when `save` is called, but the\n    adapter has not yet acknowledged that the changes have been\n    persisted to the backend.\n\n    Example\n\n    ```javascript\n    let record = store.createRecord('model');\n    record.isSaving; // false\n    let promise = record.save();\n    record.isSaving; // true\n    promise.then(function() {\n      record.isSaving; // false\n    });\n    ```\n\n    @property isSaving\n    @public\n    @type {Boolean}\n    @readOnly\n  */\n  @dependentKeyCompat\n  get isSaving() {\n    return this.currentState.isSaving;\n  }\n\n  /**\n    If this property is `true` the record is in the `deleted` state\n    and has been marked for deletion. When `isDeleted` is true and\n    `hasDirtyAttributes` is true, the record is deleted locally but the deletion\n    was not yet persisted. When `isSaving` is true, the change is\n    in-flight. When both `hasDirtyAttributes` and `isSaving` are false, the\n    change has persisted.\n\n    Example\n\n    ```javascript\n    let record = store.createRecord('model');\n    record.isDeleted;    // false\n    record.deleteRecord();\n\n    // Locally deleted\n    record.isDeleted;           // true\n    record.hasDirtyAttributes;  // true\n    record.isSaving;            // false\n\n    // Persisting the deletion\n    let promise = record.save();\n    record.isDeleted;    // true\n    record.isSaving;     // true\n\n    // Deletion Persisted\n    promise.then(function() {\n      record.isDeleted;          // true\n      record.isSaving;           // false\n      record.hasDirtyAttributes; // false\n    });\n    ```\n\n    @property isDeleted\n    @public\n    @type {Boolean}\n    @readOnly\n  */\n  @dependentKeyCompat\n  get isDeleted() {\n    return this.currentState.isDeleted;\n  }\n\n  /**\n    If this property is `true` the record is in the `new` state. A\n    record will be in the `new` state when it has been created on the\n    client and the adapter has not yet report that it was successfully\n    saved.\n\n    Example\n\n    ```javascript\n    let record = store.createRecord('model');\n    record.isNew; // true\n\n    record.save().then(function(model) {\n      model.isNew; // false\n    });\n    ```\n\n    @property isNew\n    @public\n    @type {Boolean}\n    @readOnly\n  */\n  @dependentKeyCompat\n  get isNew() {\n    return this.currentState.isNew;\n  }\n\n  /**\n    If this property is `true` the record is in the `valid` state.\n\n    A record will be in the `valid` state when the adapter did not report any\n    server-side validation failures.\n\n    @property isValid\n    @public\n    @type {Boolean}\n    @readOnly\n  */\n  @dependentKeyCompat\n  get isValid() {\n    return this.currentState.isValid;\n  }\n\n  /**\n    If the record is in the dirty state this property will report what\n    kind of change has caused it to move into the dirty\n    state. Possible values are:\n\n    - `created` The record has been created by the client and not yet saved to the adapter.\n    - `updated` The record has been updated by the client and not yet saved to the adapter.\n    - `deleted` The record has been deleted by the client and not yet saved to the adapter.\n\n    Example\n\n    ```javascript\n    let record = store.createRecord('model');\n    record.dirtyType; // 'created'\n    ```\n\n    @property dirtyType\n    @public\n    @type {String}\n    @readOnly\n  */\n  @dependentKeyCompat\n  get dirtyType() {\n    return this.currentState.dirtyType;\n  }\n\n  /**\n    If `true` the adapter reported that it was unable to save local\n    changes to the backend for any reason other than a server-side\n    validation error.\n\n    Example\n\n    ```javascript\n    record.isError; // false\n    record.set('foo', 'valid value');\n    record.save().then(null, function() {\n      record.isError; // true\n    });\n    ```\n\n    @property isError\n    @public\n    @type {Boolean}\n    @readOnly\n  */\n  @dependentKeyCompat\n  get isError() {\n    return this.currentState.isError;\n  }\n  set isError(v) {\n    if (DEBUG) {\n      throw new Error(`isError is not directly settable`);\n    }\n  }\n\n  /**\n    If `true` the store is attempting to reload the record from the adapter.\n\n    Example\n\n    ```javascript\n    record.isReloading; // false\n    record.reload();\n    record.isReloading; // true\n    ```\n\n    @property isReloading\n    @public\n    @type {Boolean}\n    @readOnly\n  */\n  @tracked isReloading = false;\n\n  /**\n    All ember models have an id property. This is an identifier\n    managed by an external source. These are always coerced to be\n    strings before being used internally. Note when declaring the\n    attributes for a model it is an error to declare an id\n    attribute.\n\n    ```javascript\n    let record = store.createRecord('model');\n    record.id; // null\n\n    store.findRecord('model', 1).then(function(model) {\n      model.id; // '1'\n    });\n    ```\n\n    @property id\n    @public\n    @type {String}\n  */\n  @tagged\n  get id() {\n    // this guard exists, because some dev-only deprecation code\n    // (addListener via validatePropertyInjections) invokes toString before the\n    // object is real.\n    if (DEBUG) {\n      try {\n        return recordIdentifierFor(this).id;\n      } catch {\n        return void 0;\n      }\n    }\n    return recordIdentifierFor(this).id;\n  }\n  set id(id) {\n    const normalizedId = coerceId(id);\n    const identifier = recordIdentifierFor(this);\n    let didChange = normalizedId !== identifier.id;\n    assert(\n      `Cannot set ${identifier.type} record's id to ${id}, because id is already ${identifier.id}`,\n      !didChange || identifier.id === null\n    );\n\n    if (normalizedId !== null && didChange) {\n      this.store._instanceCache.setRecordId(identifier, normalizedId);\n      this.store.notifications.notify(identifier, 'identity');\n    }\n  }\n\n  toString() {\n    return `<model::${this.constructor.modelName}:${this.id}>`;\n  }\n\n  /**\n    @property currentState\n    @private\n    @type {Object}\n  */\n  // TODO we can probably make this a computeOnce\n  // we likely do not need to notify the currentState root anymore\n  @tagged\n  get currentState() {\n    // descriptors are called with the wrong `this` context during mergeMixins\n    // when using legacy/classic ember classes. Basically: lazy in prod and eager in dev.\n    // so we do this to try to steer folks to the nicer \"dont user currentState\"\n    // error.\n    if (!DEBUG) {\n      if (!this.___recordState) {\n        this.___recordState = new RecordState(this);\n      }\n    }\n    return this.___recordState;\n  }\n  set currentState(_v) {\n    throw new Error('cannot set currentState');\n  }\n\n  /**\n    The store service instance which created this record instance\n\n   @property store\n    @public\n   */\n\n  /**\n    When the record is in the `invalid` state this object will contain\n    any errors returned by the adapter. When present the errors hash\n    contains keys corresponding to the invalid property names\n    and values which are arrays of Javascript objects with two keys:\n\n    - `message` A string containing the error message from the backend\n    - `attribute` The name of the property associated with this error message\n\n    ```javascript\n    record.errors.length; // 0\n    record.set('foo', 'invalid value');\n    record.save().catch(function() {\n      record.errors.foo;\n      // [{message: 'foo should be a number.', attribute: 'foo'}]\n    });\n    ```\n\n    The `errors` property is useful for displaying error messages to\n    the user.\n\n    ```handlebars\n    <label>Username: <Input @value={{@model.username}} /> </label>\n    {{#each @model.errors.username as |error|}}\n      <div class=\"error\">\n        {{error.message}}\n      </div>\n    {{/each}}\n    <label>Email: <Input @value={{@model.email}} /> </label>\n    {{#each @model.errors.email as |error|}}\n      <div class=\"error\">\n        {{error.message}}\n      </div>\n    {{/each}}\n    ```\n\n\n    You can also access the special `messages` property on the error\n    object to get an array of all the error strings.\n\n    ```handlebars\n    {{#each @model.errors.messages as |message|}}\n      <div class=\"error\">\n        {{message}}\n      </div>\n    {{/each}}\n    ```\n\n    @property errors\n    @public\n    @type {Errors}\n  */\n  @computeOnce\n  get errors() {\n    let errors = Errors.create({ __record: this });\n    this.currentState.updateInvalidErrors(errors);\n    return errors;\n  }\n\n  /**\n    This property holds the `AdapterError` object with which\n    last adapter operation was rejected.\n\n    @property adapterError\n    @public\n    @type {AdapterError}\n  */\n  @dependentKeyCompat\n  get adapterError() {\n    return this.currentState.adapterError;\n  }\n  set adapterError(v) {\n    throw new Error(`adapterError is not directly settable`);\n  }\n\n  /**\n    Create a JSON representation of the record, using the serialization\n    strategy of the store's adapter.\n\n   `serialize` takes an optional hash as a parameter, currently\n    supported options are:\n\n   - `includeId`: `true` if the record's ID should be included in the\n      JSON representation.\n\n    @method serialize\n    @public\n    @param {Object} options\n    @return {Object} an object whose values are primitive JSON values only\n  */\n  serialize(options) {\n    return storeFor(this).serializeRecord(this, options);\n  }\n\n  /*\n    We hook the default implementation to ensure\n    our tagged properties are properly notified\n    as well. We still super for everything because\n    sync observers require a direct call occuring\n    to trigger their flush. We wouldn't need to\n    super in 4.0+ where sync observers are removed.\n   */\n  notifyPropertyChange(key) {\n    let tag = peekTag(this, key);\n    if (tag) {\n      tag.notify();\n    }\n    super.notifyPropertyChange(key);\n  }\n\n  /**\n    Marks the record as deleted but does not save it. You must call\n    `save` afterwards if you want to persist it. You might use this\n    method if you want to allow the user to still `rollbackAttributes()`\n    after a delete was made.\n\n    Example\n\n    ```app/controllers/model/delete.js\n    import Controller from '@ember/controller';\n    import { action } from '@ember/object';\n\n    export default class ModelDeleteController extends Controller {\n      @action\n      softDelete() {\n        this.model.deleteRecord();\n      }\n\n      @action\n      confirm() {\n        this.model.save();\n      }\n\n      @action\n      undo() {\n        this.model.rollbackAttributes();\n      }\n    }\n    ```\n\n    @method deleteRecord\n    @public\n  */\n  deleteRecord() {\n    // ensure we've populated currentState prior to deleting a new record\n    if (this.currentState) {\n      storeFor(this).deleteRecord(this);\n    }\n  }\n\n  /**\n    Same as `deleteRecord`, but saves the record immediately.\n\n    Example\n\n    ```app/controllers/model/delete.js\n    import Controller from '@ember/controller';\n    import { action } from '@ember/object';\n\n    export default class ModelDeleteController extends Controller {\n      @action\n      delete() {\n        this.model.destroyRecord().then(function() {\n          this.transitionToRoute('model.index');\n        });\n      }\n    }\n    ```\n\n    If you pass an object on the `adapterOptions` property of the options\n    argument it will be passed to your adapter via the snapshot\n\n    ```js\n    record.destroyRecord({ adapterOptions: { subscribe: false } });\n    ```\n\n    ```app/adapters/post.js\n    import MyCustomAdapter from './custom-adapter';\n\n    export default class PostAdapter extends MyCustomAdapter {\n      deleteRecord(store, type, snapshot) {\n        if (snapshot.adapterOptions.subscribe) {\n          // ...\n        }\n        // ...\n      }\n    }\n    ```\n\n    @method destroyRecord\n    @public\n    @param {Object} options\n    @return {Promise} a promise that will be resolved when the adapter returns\n    successfully or rejected if the adapter returns with an error.\n  */\n  destroyRecord(options) {\n    const { isNew } = this.currentState;\n    this.deleteRecord();\n    if (isNew) {\n      return Promise.resolve(this);\n    }\n    return this.save(options).then((_) => {\n      this.unloadRecord();\n      return this;\n    });\n  }\n\n  /**\n    Unloads the record from the store. This will not send a delete request\n    to your server, it just unloads the record from memory.\n\n    @method unloadRecord\n    @public\n  */\n  unloadRecord() {\n    if (this.currentState.isNew && (this.isDestroyed || this.isDestroying)) {\n      return;\n    }\n    storeFor(this).unloadRecord(this);\n  }\n\n  /**\n    @method _notifyProperties\n    @private\n  */\n  _notifyProperties(keys) {\n    // changeProperties defers notifications until after the delegate\n    // and protects with a try...finally block\n    // previously used begin...endPropertyChanges but this is private API\n    changeProperties(() => {\n      let key;\n      for (let i = 0, length = keys.length; i < length; i++) {\n        key = keys[i];\n        this.notifyPropertyChange(key);\n      }\n    });\n  }\n\n  /**\n    Returns an object, whose keys are changed properties, and value is\n    an [oldProp, newProp] array.\n\n    The array represents the diff of the canonical state with the local state\n    of the model. Note: if the model is created locally, the canonical state is\n    empty since the adapter hasn't acknowledged the attributes yet:\n\n    Example\n\n    ```app/models/mascot.js\n    import Model, { attr } from '@ember-data/model';\n\n    export default class MascotModel extends Model {\n      @attr('string') name;\n      @attr('boolean', {\n        defaultValue: false\n      })\n      isAdmin;\n    }\n    ```\n\n    ```javascript\n    let mascot = store.createRecord('mascot');\n\n    mascot.changedAttributes(); // {}\n\n    mascot.set('name', 'Tomster');\n    mascot.changedAttributes(); // { name: [undefined, 'Tomster'] }\n\n    mascot.set('isAdmin', true);\n    mascot.changedAttributes(); // { isAdmin: [undefined, true], name: [undefined, 'Tomster'] }\n\n    mascot.save().then(function() {\n      mascot.changedAttributes(); // {}\n\n      mascot.set('isAdmin', false);\n      mascot.changedAttributes(); // { isAdmin: [true, false] }\n    });\n    ```\n\n    @method changedAttributes\n    @public\n    @return {Object} an object, whose keys are changed properties,\n      and value is an [oldProp, newProp] array.\n  */\n  changedAttributes() {\n    return peekCache(this).changedAttrs(recordIdentifierFor(this));\n  }\n\n  /**\n    If the model `hasDirtyAttributes` this function will discard any unsaved\n    changes. If the model `isNew` it will be removed from the store.\n\n    Example\n\n    ```javascript\n    record.name; // 'Untitled Document'\n    record.set('name', 'Doc 1');\n    record.name; // 'Doc 1'\n    record.rollbackAttributes();\n    record.name; // 'Untitled Document'\n    ```\n\n    @since 1.13.0\n    @method rollbackAttributes\n    @public\n  */\n  rollbackAttributes() {\n    const { currentState } = this;\n    const { isNew } = currentState;\n\n    storeFor(this)._join(() => {\n      peekCache(this).rollbackAttrs(recordIdentifierFor(this));\n      this.errors.clear();\n      currentState.cleanErrorRequests();\n      if (isNew) {\n        this.unloadRecord();\n      }\n    });\n  }\n\n  /**\n    @method _createSnapshot\n    @private\n  */\n  // TODO @deprecate in favor of a public API or examples of how to test successfully\n  _createSnapshot() {\n    const store = storeFor(this);\n\n    if (!store._fetchManager) {\n      const FetchManager = importSync('@ember-data/legacy-compat/-private').FetchManager;\n      store._fetchManager = new FetchManager(store);\n    }\n\n    return store._fetchManager.createSnapshot(recordIdentifierFor(this));\n  }\n\n  /**\n    Save the record and persist any changes to the record to an\n    external source via the adapter.\n\n    Example\n\n    ```javascript\n    record.set('name', 'Tomster');\n    record.save().then(function() {\n      // Success callback\n    }, function() {\n      // Error callback\n    });\n    ```\n\n   If you pass an object using the `adapterOptions` property of the options\n   argument it will be passed to your adapter via the snapshot.\n\n    ```js\n    record.save({ adapterOptions: { subscribe: false } });\n    ```\n\n    ```app/adapters/post.js\n    import MyCustomAdapter from './custom-adapter';\n\n    export default class PostAdapter extends MyCustomAdapter {\n      updateRecord(store, type, snapshot) {\n        if (snapshot.adapterOptions.subscribe) {\n          // ...\n        }\n        // ...\n      }\n    }\n    ```\n\n    @method save\n    @public\n    @param {Object} options\n    @return {Promise} a promise that will be resolved when the adapter returns\n    successfully or rejected if the adapter returns with an error.\n  */\n  save(options) {\n    let promise;\n\n    if (this.currentState.isNew && this.currentState.isDeleted) {\n      promise = Promise.resolve(this);\n    } else {\n      this.errors.clear();\n      promise = storeFor(this).saveRecord(this, options);\n    }\n\n    return promise;\n  }\n\n  /**\n    Reload the record from the adapter.\n\n    This will only work if the record has already finished loading.\n\n    Example\n\n    ```app/controllers/model/view.js\n    import Controller from '@ember/controller';\n    import { action } from '@ember/object';\n\n    export default class ViewController extends Controller {\n      @action\n      reload() {\n        this.model.reload().then(function(model) {\n        // do something with the reloaded model\n        });\n      }\n    }\n    ```\n\n    @method reload\n    @public\n    @param {Object} options optional, may include `adapterOptions` hash which will be passed to adapter request\n\n   @return {Promise} a promise that will be resolved with the record when the\n    adapter returns successfully or rejected if the adapter returns\n    with an error.\n  */\n  reload(options = {}) {\n    options.isReloading = true;\n    options.reload = true;\n\n    const identifier = recordIdentifierFor(this);\n    assert(`You cannot reload a record without an ID`, identifier.id);\n\n    this.isReloading = true;\n    const promise = storeFor(this)\n      .request({\n        op: 'findRecord',\n        data: {\n          options,\n          record: identifier,\n        },\n        cacheOptions: { [Symbol.for('ember-data:skip-cache')]: true },\n      })\n      .then(() => this)\n      .finally(() => {\n        this.isReloading = false;\n      });\n\n    return promise;\n  }\n\n  attr() {\n    assert(\n      'The `attr` method is not available on Model, a Snapshot was probably expected. Are you passing a Model instead of a Snapshot to your serializer?',\n      false\n    );\n  }\n\n  /**\n    Get the reference for the specified belongsTo relationship.\n\n    Example\n\n    ```app/models/blog.js\n    import Model, { belongsTo } from '@ember-data/model';\n\n    export default class BlogModel extends Model {\n      @belongsTo('user', { async: true, inverse: null }) user;\n    }\n    ```\n\n    ```javascript\n    let blog = store.push({\n      data: {\n        type: 'blog',\n        id: 1,\n        relationships: {\n          user: {\n            data: { type: 'user', id: 1 }\n          }\n        }\n      }\n    });\n    let userRef = blog.belongsTo('user');\n\n    // check if the user relationship is loaded\n    let isLoaded = userRef.value() !== null;\n\n    // get the record of the reference (null if not yet available)\n    let user = userRef.value();\n\n    // get the identifier of the reference\n    if (userRef.remoteType() === \"id\") {\n      let id = userRef.id();\n    } else if (userRef.remoteType() === \"link\") {\n      let link = userRef.link();\n    }\n\n    // load user (via store.findRecord or store.findBelongsTo)\n    userRef.load().then(...)\n\n    // or trigger a reload\n    userRef.reload().then(...)\n\n    // provide data for reference\n    userRef.push({\n      type: 'user',\n      id: 1,\n      attributes: {\n        username: \"@user\"\n      }\n    }).then(function(user) {\n      userRef.value() === user;\n    });\n    ```\n\n    @method belongsTo\n    @public\n    @param {String} name of the relationship\n    @since 2.5.0\n    @return {BelongsToReference} reference for this relationship\n  */\n  belongsTo(name) {\n    return lookupLegacySupport(this).referenceFor('belongsTo', name);\n  }\n\n  /**\n    Get the reference for the specified hasMany relationship.\n\n    Example\n\n    ```app/models/blog.js\n    import Model, { hasMany } from '@ember-data/model';\n\n    export default class BlogModel extends Model {\n      @hasMany('comment', { async: true, inverse: null }) comments;\n    }\n\n    let blog = store.push({\n      data: {\n        type: 'blog',\n        id: 1,\n        relationships: {\n          comments: {\n            data: [\n              { type: 'comment', id: 1 },\n              { type: 'comment', id: 2 }\n            ]\n          }\n        }\n      }\n    });\n    let commentsRef = blog.hasMany('comments');\n\n    // check if the comments are loaded already\n    let isLoaded = commentsRef.value() !== null;\n\n    // get the records of the reference (null if not yet available)\n    let comments = commentsRef.value();\n\n    // get the identifier of the reference\n    if (commentsRef.remoteType() === \"ids\") {\n      let ids = commentsRef.ids();\n    } else if (commentsRef.remoteType() === \"link\") {\n      let link = commentsRef.link();\n    }\n\n    // load comments (via store.findMany or store.findHasMany)\n    commentsRef.load().then(...)\n\n    // or trigger a reload\n    commentsRef.reload().then(...)\n\n    // provide data for reference\n    commentsRef.push([{ type: 'comment', id: 1 }, { type: 'comment', id: 2 }]).then(function(comments) {\n      commentsRef.value() === comments;\n    });\n    ```\n\n    @method hasMany\n    @public\n    @param {String} name of the relationship\n    @since 2.5.0\n    @return {HasManyReference} reference for this relationship\n  */\n  hasMany(name) {\n    return lookupLegacySupport(this).referenceFor('hasMany', name);\n  }\n\n  /**\n   Given a callback, iterates over each of the relationships in the model,\n   invoking the callback with the name of each relationship and its relationship\n   descriptor.\n\n\n   The callback method you provide should have the following signature (all\n   parameters are optional):\n\n   ```javascript\n   function(name, descriptor);\n   ```\n\n   - `name` the name of the current property in the iteration\n   - `descriptor` the meta object that describes this relationship\n\n   The relationship descriptor argument is an object with the following properties.\n\n   - **key** <span class=\"type\">String</span> the name of this relationship on the Model\n   - **kind** <span class=\"type\">String</span> \"hasMany\" or \"belongsTo\"\n   - **options** <span class=\"type\">Object</span> the original options hash passed when the relationship was declared\n   - **parentType** <span class=\"type\">Model</span> the type of the Model that owns this relationship\n   - **type** <span class=\"type\">String</span> the type name of the related Model\n\n   Note that in addition to a callback, you can also pass an optional target\n   object that will be set as `this` on the context.\n\n   Example\n\n   ```app/serializers/application.js\n   import JSONSerializer from '@ember-data/serializer/json';\n\n   export default class ApplicationSerializer extends JSONSerializer {\n      serialize(record, options) {\n      let json = {};\n\n      record.eachRelationship(function(name, descriptor) {\n        if (descriptor.kind === 'hasMany') {\n          let serializedHasManyName = name.toUpperCase() + '_IDS';\n          json[serializedHasManyName] = record.get(name).map(r => r.id);\n        }\n      });\n\n      return json;\n    }\n  }\n   ```\n\n   @method eachRelationship\n    @public\n   @param {Function} callback the callback to invoke\n   @param {any} binding the value to which the callback's `this` should be bound\n   */\n  eachRelationship(callback, binding) {\n    this.constructor.eachRelationship(callback, binding);\n  }\n\n  relationshipFor(name) {\n    return this.constructor.relationshipsByName.get(name);\n  }\n\n  inverseFor(key) {\n    return this.constructor.inverseFor(key, storeFor(this));\n  }\n\n  eachAttribute(callback, binding) {\n    this.constructor.eachAttribute(callback, binding);\n  }\n\n  static isModel = true;\n\n  /**\n    Create should only ever be called by the store. To create an instance of a\n    `Model` in a dirty state use `store.createRecord`.\n\n   To create instances of `Model` in a clean state, use `store.push`\n\n    @method create\n    @private\n    @static\n  */\n\n  /**\n   Represents the model's class name as a string. This can be used to look up the model's class name through\n   `Store`'s modelFor method.\n\n   `modelName` is generated for you by Ember Data. It will be a lowercased, dasherized string.\n   For example:\n\n   ```javascript\n   store.modelFor('post').modelName; // 'post'\n   store.modelFor('blog-post').modelName; // 'blog-post'\n   ```\n\n   The most common place you'll want to access `modelName` is in your serializer's `payloadKeyFromModelName` method. For example, to change payload\n   keys to underscore (instead of dasherized), you might use the following code:\n\n   ```javascript\n   import RESTSerializer from '@ember-data/serializer/rest';\n   import { underscore } from '<app-name>/utils/string-utils';\n\n   export default const PostSerializer = RESTSerializer.extend({\n     payloadKeyFromModelName(modelName) {\n       return underscore(modelName);\n     }\n   });\n   ```\n   @property modelName\n    @public\n   @type String\n   @readonly\n   @static\n  */\n  static modelName = null;\n\n  /*\n   These class methods below provide relationship\n   introspection abilities about relationships.\n\n   A note about the computed properties contained here:\n\n   **These properties are effectively sealed once called for the first time.**\n   To avoid repeatedly doing expensive iteration over a model's fields, these\n   values are computed once and then cached for the remainder of the runtime of\n   your application.\n\n   If your application needs to modify a class after its initial definition\n   (for example, using `reopen()` to add additional attributes), make sure you\n   do it before using your model with the store, which uses these properties\n   extensively.\n   */\n\n  /**\n   For a given relationship name, returns the model type of the relationship.\n\n   For example, if you define a model like this:\n\n   ```app/models/post.js\n   import Model, { hasMany } from '@ember-data/model';\n\n   export default class PostModel extends Model {\n     @hasMany('comment') comments;\n   }\n   ```\n\n   Calling `store.modelFor('post').typeForRelationship('comments', store)` will return `Comment`.\n\n   @method typeForRelationship\n    @public\n   @static\n   @param {String} name the name of the relationship\n   @param {store} store an instance of Store\n   @return {Model} the type of the relationship, or undefined\n   */\n  static typeForRelationship(name, store) {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    let relationship = this.relationshipsByName.get(name);\n    return relationship && store.modelFor(relationship.type);\n  }\n\n  @computeOnce\n  static get inverseMap() {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n    return Object.create(null);\n  }\n\n  /**\n   Find the relationship which is the inverse of the one asked for.\n\n   For example, if you define models like this:\n\n   ```app/models/post.js\n   import Model, { hasMany } from '@ember-data/model';\n\n   export default class PostModel extends Model {\n      @hasMany('message') comments;\n    }\n   ```\n\n   ```app/models/message.js\n   import Model, { belongsTo } from '@ember-data/model';\n\n   export default class MessageModel extends Model {\n      @belongsTo('post') owner;\n    }\n   ```\n\n   ``` js\n   store.modelFor('post').inverseFor('comments', store) // { type: App.Message, name: 'owner', kind: 'belongsTo' }\n   store.modelFor('message').inverseFor('owner', store) // { type: App.Post, name: 'comments', kind: 'hasMany' }\n   ```\n\n   @method inverseFor\n    @public\n   @static\n   @param {String} name the name of the relationship\n   @param {Store} store\n   @return {Object} the inverse relationship, or null\n   */\n  static inverseFor(name, store) {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n    let inverseMap = this.inverseMap;\n    if (inverseMap[name]) {\n      return inverseMap[name];\n    } else {\n      let inverse = this._findInverseFor(name, store);\n      inverseMap[name] = inverse;\n      return inverse;\n    }\n  }\n\n  //Calculate the inverse, ignoring the cache\n  static _findInverseFor(name, store) {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    const relationship = this.relationshipsByName.get(name);\n    const { options } = relationship;\n    const isPolymorphic = options.polymorphic;\n\n    //If inverse is manually specified to be null, like  `comments: hasMany('message', { inverse: null })`\n    const isExplicitInverseNull = options.inverse === null;\n    const isAbstractType =\n      !isExplicitInverseNull && isPolymorphic && !store.getSchemaDefinitionService().doesTypeExist(relationship.type);\n\n    if (isExplicitInverseNull || isAbstractType) {\n      assert(\n        `No schema for the abstract type '${relationship.type}' for the polymorphic relationship '${name}' on '${this.modelName}' was provided by the SchemaDefinitionService.`,\n        !isPolymorphic || isExplicitInverseNull\n      );\n      return null;\n    }\n\n    let fieldOnInverse, inverseKind, inverseRelationship, inverseOptions;\n    let inverseSchema = this.typeForRelationship(name, store);\n\n    // if the type does not exist and we are not polymorphic\n    //If inverse is specified manually, return the inverse\n    if (options.inverse !== undefined) {\n      fieldOnInverse = options.inverse;\n      inverseRelationship = inverseSchema && inverseSchema.relationshipsByName.get(fieldOnInverse);\n\n      assert(\n        `We found no field named '${fieldOnInverse}' on the schema for '${inverseSchema.modelName}' to be the inverse of the '${name}' relationship on '${this.modelName}'. This is most likely due to a missing field on your model definition.`,\n        inverseRelationship\n      );\n\n      // TODO probably just return the whole inverse here\n      inverseKind = inverseRelationship.kind;\n      inverseOptions = inverseRelationship.options;\n    } else {\n      //No inverse was specified manually, we need to use a heuristic to guess one\n      if (relationship.type === relationship.parentModelName) {\n        warn(\n          `Detected a reflexive relationship named '${name}' on the schema for '${relationship.type}' without an inverse option. Look at https://guides.emberjs.com/current/models/relationships/#toc_reflexive-relations for how to explicitly specify inverses.`,\n          false,\n          {\n            id: 'ds.model.reflexive-relationship-without-inverse',\n          }\n        );\n      }\n\n      let possibleRelationships = findPossibleInverses(this, inverseSchema, name);\n\n      if (possibleRelationships.length === 0) {\n        return null;\n      }\n\n      if (DEBUG) {\n        let filteredRelationships = possibleRelationships.filter((possibleRelationship) => {\n          let optionsForRelationship = possibleRelationship.options;\n          return name === optionsForRelationship.inverse;\n        });\n\n        assert(\n          \"You defined the '\" +\n            name +\n            \"' relationship on \" +\n            this +\n            ', but you defined the inverse relationships of type ' +\n            inverseSchema.toString() +\n            ' multiple times. Look at https://guides.emberjs.com/current/models/relationships/#toc_explicit-inverses for how to explicitly specify inverses',\n          filteredRelationships.length < 2\n        );\n      }\n\n      let explicitRelationship = possibleRelationships.find((relationship) => relationship.options.inverse === name);\n      if (explicitRelationship) {\n        possibleRelationships = [explicitRelationship];\n      }\n\n      assert(\n        \"You defined the '\" +\n          name +\n          \"' relationship on \" +\n          this +\n          ', but multiple possible inverse relationships of type ' +\n          this +\n          ' were found on ' +\n          inverseSchema +\n          '. Look at https://guides.emberjs.com/current/models/relationships/#toc_explicit-inverses for how to explicitly specify inverses',\n        possibleRelationships.length === 1\n      );\n\n      fieldOnInverse = possibleRelationships[0].name;\n      inverseKind = possibleRelationships[0].kind;\n      inverseOptions = possibleRelationships[0].options;\n    }\n\n    // ensure inverse is properly configured\n    if (DEBUG) {\n      if (isPolymorphic) {\n        assert(\n          `Relationships that satisfy polymorphic relationships MUST define which abstract-type they are satisfying using 'as'. The field '${fieldOnInverse}' on type '${inverseSchema.modelName}' is misconfigured.`,\n          inverseOptions.as\n        );\n        assert(\n          `options.as should match the expected type of the polymorphic relationship. Expected field '${fieldOnInverse}' on type '${inverseSchema.modelName}' to specify '${relationship.type}' but found '${inverseOptions.as}'`,\n          !!inverseOptions.as && relationship.type === inverseOptions.as\n        );\n      }\n    }\n\n    // ensure we are properly configured\n    if (DEBUG) {\n      if (inverseOptions.polymorphic) {\n        assert(\n          `Relationships that satisfy polymorphic relationships MUST define which abstract-type they are satisfying using 'as'. The field '${name}' on type '${this.modelName}' is misconfigured.`,\n          options.as\n        );\n        assert(\n          `options.as should match the expected type of the polymorphic relationship. Expected field '${name}' on type '${this.modelName}' to specify '${inverseRelationship.type}' but found '${options.as}'`,\n          !!options.as && inverseRelationship.type === options.as\n        );\n      }\n    }\n\n    assert(\n      `The ${inverseSchema.modelName}:${fieldOnInverse} relationship declares 'inverse: null', but it was resolved as the inverse for ${this.modelName}:${name}.`,\n      inverseOptions.inverse !== null\n    );\n\n    return {\n      type: inverseSchema,\n      name: fieldOnInverse,\n      kind: inverseKind,\n      options: inverseOptions,\n    };\n  }\n\n  /**\n   The model's relationships as a map, keyed on the type of the\n   relationship. The value of each entry is an array containing a descriptor\n   for each relationship with that type, describing the name of the relationship\n   as well as the type.\n\n   For example, given the following model definition:\n\n   ```app/models/blog.js\n   import Model, { belongsTo, hasMany } from '@ember-data/model';\n\n   export default class BlogModel extends Model {\n      @hasMany('user') users;\n      @belongsTo('user') owner;\n      @hasMany('post') posts;\n    }\n   ```\n\n   This computed property would return a map describing these\n   relationships, like this:\n\n   ```javascript\n   import { get } from '@ember/object';\n   import Blog from 'app/models/blog';\n   import User from 'app/models/user';\n   import Post from 'app/models/post';\n\n   let relationships = Blog.relationships;\n   relationships.user;\n   //=> [ { name: 'users', kind: 'hasMany' },\n   //     { name: 'owner', kind: 'belongsTo' } ]\n   relationships.post;\n   //=> [ { name: 'posts', kind: 'hasMany' } ]\n   ```\n\n   @property relationships\n    @public\n   @static\n   @type Map\n   @readOnly\n   */\n\n  @computeOnce\n  static get relationships() {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    let map = new Map();\n    let relationshipsByName = this.relationshipsByName;\n\n    // Loop through each computed property on the class\n    relationshipsByName.forEach((desc) => {\n      let { type } = desc;\n\n      if (!map.has(type)) {\n        map.set(type, []);\n      }\n\n      map.get(type).push(desc);\n    });\n\n    return map;\n  }\n\n  /**\n   A hash containing lists of the model's relationships, grouped\n   by the relationship kind. For example, given a model with this\n   definition:\n\n   ```app/models/blog.js\n   import Model, { belongsTo, hasMany } from '@ember-data/model';\n\n   export default class BlogModel extends Model {\n      @hasMany('user') users;\n      @belongsTo('user') owner;\n\n      @hasMany('post') posts;\n    }\n   ```\n\n   This property would contain the following:\n\n   ```javascript\n   import { get } from '@ember/object';\n   import Blog from 'app/models/blog';\n\n   let relationshipNames = Blog.relationshipNames;\n   relationshipNames.hasMany;\n   //=> ['users', 'posts']\n   relationshipNames.belongsTo;\n   //=> ['owner']\n   ```\n\n   @property relationshipNames\n    @public\n   @static\n   @type Object\n   @readOnly\n   */\n  @computeOnce\n  static get relationshipNames() {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n    let names = {\n      hasMany: [],\n      belongsTo: [],\n    };\n\n    this.eachComputedProperty((name, meta) => {\n      if (meta.isRelationship) {\n        names[meta.kind].push(name);\n      }\n    });\n\n    return names;\n  }\n\n  /**\n   An array of types directly related to a model. Each type will be\n   included once, regardless of the number of relationships it has with\n   the model.\n\n   For example, given a model with this definition:\n\n   ```app/models/blog.js\n   import Model, { belongsTo, hasMany } from '@ember-data/model';\n\n   export default class BlogModel extends Model {\n      @hasMany('user') users;\n      @belongsTo('user') owner;\n\n      @hasMany('post') posts;\n    }\n   ```\n\n   This property would contain the following:\n\n   ```javascript\n   import { get } from '@ember/object';\n   import Blog from 'app/models/blog';\n\n   let relatedTypes = Blog.relatedTypes');\n   //=> ['user', 'post']\n   ```\n\n   @property relatedTypes\n    @public\n   @static\n   @type Ember.Array\n   @readOnly\n   */\n  @computeOnce\n  static get relatedTypes() {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    let types = [];\n\n    let rels = this.relationshipsObject;\n    let relationships = Object.keys(rels);\n\n    // create an array of the unique types involved\n    // in relationships\n    for (let i = 0; i < relationships.length; i++) {\n      let name = relationships[i];\n      let meta = rels[name];\n      let modelName = meta.type;\n\n      if (types.indexOf(modelName) === -1) {\n        types.push(modelName);\n      }\n    }\n\n    return types;\n  }\n\n  /**\n   A map whose keys are the relationships of a model and whose values are\n   relationship descriptors.\n\n   For example, given a model with this\n   definition:\n\n   ```app/models/blog.js\n   import Model, { belongsTo, hasMany } from '@ember-data/model';\n\n   export default class BlogModel extends Model {\n      @hasMany('user') users;\n      @belongsTo('user') owner;\n\n      @hasMany('post') posts;\n    }\n   ```\n\n   This property would contain the following:\n\n   ```javascript\n   import { get } from '@ember/object';\n   import Blog from 'app/models/blog';\n\n   let relationshipsByName = Blog.relationshipsByName;\n   relationshipsByName.users;\n   //=> { key: 'users', kind: 'hasMany', type: 'user', options: Object, isRelationship: true }\n   relationshipsByName.owner;\n   //=> { key: 'owner', kind: 'belongsTo', type: 'user', options: Object, isRelationship: true }\n   ```\n\n   @property relationshipsByName\n    @public\n   @static\n   @type Map\n   @readOnly\n   */\n  @computeOnce\n  static get relationshipsByName() {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n    let map = new Map();\n    let rels = this.relationshipsObject;\n    let relationships = Object.keys(rels);\n\n    for (let i = 0; i < relationships.length; i++) {\n      let key = relationships[i];\n      let value = rels[key];\n\n      map.set(value.name || value.key, value);\n    }\n\n    return map;\n  }\n\n  @computeOnce\n  static get relationshipsObject() {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    let relationships = Object.create(null);\n    let modelName = this.modelName;\n    this.eachComputedProperty((name, meta) => {\n      if (meta.isRelationship) {\n        meta.key = name;\n        meta.name = name;\n        meta.parentModelName = modelName;\n        relationships[name] = meta;\n\n        assert(\n          `You should not specify both options.as and options.inverse as null on ${modelName}.${meta.name}, as if there is no inverse field there is no abstract type to conform to. You may have intended for this relationship to be polymorphic, or you may have mistakenly set inverse to null.`,\n          !(meta.options.inverse === null && meta.options.as?.length > 0)\n        );\n      }\n    });\n    return relationships;\n  }\n\n  /**\n   A map whose keys are the fields of the model and whose values are strings\n   describing the kind of the field. A model's fields are the union of all of its\n   attributes and relationships.\n\n   For example:\n\n   ```app/models/blog.js\n   import Model, { attr, belongsTo, hasMany } from '@ember-data/model';\n\n   export default class BlogModel extends Model {\n      @hasMany('user') users;\n      @belongsTo('user') owner;\n\n      @hasMany('post') posts;\n\n      @attr('string') title;\n    }\n   ```\n\n   ```js\n   import { get } from '@ember/object';\n   import Blog from 'app/models/blog'\n\n   let fields = Blog.fields;\n   fields.forEach(function(kind, field) {\n      // do thing\n    });\n\n   // prints:\n   // users, hasMany\n   // owner, belongsTo\n   // posts, hasMany\n   // title, attribute\n   ```\n\n   @property fields\n    @public\n   @static\n   @type Map\n   @readOnly\n   */\n  @computeOnce\n  static get fields() {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n    let map = new Map();\n\n    this.eachComputedProperty((name, meta) => {\n      // TODO end reliance on these booleans and stop leaking them in the spec\n      if (meta.isRelationship) {\n        map.set(name, meta.kind);\n      } else if (meta.isAttribute) {\n        map.set(name, 'attribute');\n      }\n    });\n\n    return map;\n  }\n\n  /**\n   Given a callback, iterates over each of the relationships in the model,\n   invoking the callback with the name of each relationship and its relationship\n   descriptor.\n\n   @method eachRelationship\n    @public\n   @static\n   @param {Function} callback the callback to invoke\n   @param {any} binding the value to which the callback's `this` should be bound\n   */\n  static eachRelationship(callback, binding) {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    this.relationshipsByName.forEach((relationship, name) => {\n      callback.call(binding, name, relationship);\n    });\n  }\n\n  /**\n   Given a callback, iterates over each of the types related to a model,\n   invoking the callback with the related type's class. Each type will be\n   returned just once, regardless of how many different relationships it has\n   with a model.\n\n   @method eachRelatedType\n    @public\n   @static\n   @param {Function} callback the callback to invoke\n   @param {any} binding the value to which the callback's `this` should be bound\n   */\n  static eachRelatedType(callback, binding) {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    let relationshipTypes = this.relatedTypes;\n\n    for (let i = 0; i < relationshipTypes.length; i++) {\n      let type = relationshipTypes[i];\n      callback.call(binding, type);\n    }\n  }\n\n  static determineRelationshipType(knownSide, store) {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    let knownKey = knownSide.key;\n    let knownKind = knownSide.kind;\n    let inverse = this.inverseFor(knownKey, store);\n    // let key;\n    let otherKind;\n\n    if (!inverse) {\n      return knownKind === 'belongsTo' ? 'oneToNone' : 'manyToNone';\n    }\n\n    // key = inverse.name;\n    otherKind = inverse.kind;\n\n    if (otherKind === 'belongsTo') {\n      return knownKind === 'belongsTo' ? 'oneToOne' : 'manyToOne';\n    } else {\n      return knownKind === 'belongsTo' ? 'oneToMany' : 'manyToMany';\n    }\n  }\n\n  /**\n   A map whose keys are the attributes of the model (properties\n   described by attr) and whose values are the meta object for the\n   property.\n\n   Example\n\n   ```app/models/person.js\n   import Model, { attr } from '@ember-data/model';\n\n   export default class PersonModel extends Model {\n      @attr('string') firstName;\n      @attr('string') lastName;\n      @attr('date') birthday;\n    }\n   ```\n\n   ```javascript\n   import { get } from '@ember/object';\n   import Person from 'app/models/person'\n\n   let attributes = Person.attributes\n\n   attributes.forEach(function(meta, name) {\n      // do thing\n    });\n\n   // prints:\n   // firstName {type: \"string\", isAttribute: true, options: Object, parentType: function, name: \"firstName\"}\n   // lastName {type: \"string\", isAttribute: true, options: Object, parentType: function, name: \"lastName\"}\n   // birthday {type: \"date\", isAttribute: true, options: Object, parentType: function, name: \"birthday\"}\n   ```\n\n   @property attributes\n    @public\n   @static\n   @type {Map}\n   @readOnly\n   */\n  @computeOnce\n  static get attributes() {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    let map = new Map();\n\n    this.eachComputedProperty((name, meta) => {\n      if (meta.isAttribute) {\n        assert(\n          \"You may not set `id` as an attribute on your model. Please remove any lines that look like: `id: attr('<type>')` from \" +\n            this.toString(),\n          name !== 'id'\n        );\n\n        meta.name = name;\n        map.set(name, meta);\n      }\n    });\n\n    return map;\n  }\n\n  /**\n   A map whose keys are the attributes of the model (properties\n   described by attr) and whose values are type of transformation\n   applied to each attribute. This map does not include any\n   attributes that do not have an transformation type.\n\n   Example\n\n   ```app/models/person.js\n   import Model, { attr } from '@ember-data/model';\n\n   export default class PersonModel extends Model {\n      @attr firstName;\n      @attr('string') lastName;\n      @attr('date') birthday;\n    }\n   ```\n\n   ```javascript\n   import { get } from '@ember/object';\n   import Person from 'app/models/person';\n\n   let transformedAttributes = Person.transformedAttributes\n\n   transformedAttributes.forEach(function(field, type) {\n      // do thing\n    });\n\n   // prints:\n   // lastName string\n   // birthday date\n   ```\n\n   @property transformedAttributes\n    @public\n   @static\n   @type {Map}\n   @readOnly\n   */\n  @computeOnce\n  static get transformedAttributes() {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    let map = new Map();\n\n    this.eachAttribute((key, meta) => {\n      if (meta.type) {\n        map.set(key, meta.type);\n      }\n    });\n\n    return map;\n  }\n\n  /**\n   Iterates through the attributes of the model, calling the passed function on each\n   attribute.\n\n   The callback method you provide should have the following signature (all\n   parameters are optional):\n\n   ```javascript\n   function(name, meta);\n   ```\n\n   - `name` the name of the current property in the iteration\n   - `meta` the meta object for the attribute property in the iteration\n\n   Note that in addition to a callback, you can also pass an optional target\n   object that will be set as `this` on the context.\n\n   Example\n\n   ```javascript\n   import Model, { attr } from '@ember-data/model';\n\n   class PersonModel extends Model {\n      @attr('string') firstName;\n      @attr('string') lastName;\n      @attr('date') birthday;\n    }\n\n   PersonModel.eachAttribute(function(name, meta) {\n      // do thing\n    });\n\n   // prints:\n   // firstName {type: \"string\", isAttribute: true, options: Object, parentType: function, name: \"firstName\"}\n   // lastName {type: \"string\", isAttribute: true, options: Object, parentType: function, name: \"lastName\"}\n   // birthday {type: \"date\", isAttribute: true, options: Object, parentType: function, name: \"birthday\"}\n   ```\n\n   @method eachAttribute\n    @public\n   @param {Function} callback The callback to execute\n   @param {Object} [binding] the value to which the callback's `this` should be bound\n   @static\n   */\n  static eachAttribute(callback, binding) {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    this.attributes.forEach((meta, name) => {\n      callback.call(binding, name, meta);\n    });\n  }\n\n  /**\n   Iterates through the transformedAttributes of the model, calling\n   the passed function on each attribute. Note the callback will not be\n   called for any attributes that do not have an transformation type.\n\n   The callback method you provide should have the following signature (all\n   parameters are optional):\n\n   ```javascript\n   function(name, type);\n   ```\n\n   - `name` the name of the current property in the iteration\n   - `type` a string containing the name of the type of transformed\n   applied to the attribute\n\n   Note that in addition to a callback, you can also pass an optional target\n   object that will be set as `this` on the context.\n\n   Example\n\n   ```javascript\n   import Model, { attr } from '@ember-data/model';\n\n   let Person = Model.extend({\n      firstName: attr(),\n      lastName: attr('string'),\n      birthday: attr('date')\n    });\n\n   Person.eachTransformedAttribute(function(name, type) {\n      // do thing\n    });\n\n   // prints:\n   // lastName string\n   // birthday date\n   ```\n\n   @method eachTransformedAttribute\n    @public\n   @param {Function} callback The callback to execute\n   @param {Object} [binding] the value to which the callback's `this` should be bound\n   @static\n   */\n  static eachTransformedAttribute(callback, binding) {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    this.transformedAttributes.forEach((type, name) => {\n      callback.call(binding, name, type);\n    });\n  }\n\n  /**\n   Returns the name of the model class.\n\n   @method toString\n    @public\n   @static\n   */\n  static toString() {\n    assert(\n      `Accessing schema information on Models without looking up the model via the store is disallowed.`,\n      this.modelName\n    );\n\n    return `model:${this.modelName}`;\n  }\n}\n\n// this is required to prevent `init` from passing\n// the values initialized during create to `setUnknownProperty`\nModel.prototype._createProps = null;\nModel.prototype._secretInit = null;\n\nif (HAS_DEBUG_PACKAGE) {\n  /**\n   Provides info about the model for debugging purposes\n   by grouping the properties into more semantic groups.\n\n   Meant to be used by debugging tools such as the Chrome Ember Extension.\n\n   - Groups all attributes in \"Attributes\" group.\n   - Groups all belongsTo relationships in \"Belongs To\" group.\n   - Groups all hasMany relationships in \"Has Many\" group.\n   - Groups all flags in \"Flags\" group.\n   - Flags relationship CPs as expensive properties.\n\n   @method _debugInfo\n   @for Model\n   @private\n   */\n  Model.prototype._debugInfo = function () {\n    let relationships = {};\n    let expensiveProperties = [];\n\n    const identifier = recordIdentifierFor(this);\n    const schema = this.store.getSchemaDefinitionService();\n    const attrDefs = schema.attributesDefinitionFor(identifier);\n    const relDefs = schema.relationshipsDefinitionFor(identifier);\n\n    const attributes = Object.keys(attrDefs);\n    attributes.unshift('id');\n\n    let groups = [\n      {\n        name: 'Attributes',\n        properties: attributes,\n        expand: true,\n      },\n    ];\n\n    Object.keys(relDefs).forEach((name) => {\n      const relationship = relDefs[name];\n\n      let properties = relationships[relationship.kind];\n\n      if (properties === undefined) {\n        properties = relationships[relationship.kind] = [];\n        groups.push({\n          name: relationship.kind,\n          properties,\n          expand: true,\n        });\n      }\n      properties.push(name);\n      expensiveProperties.push(name);\n    });\n\n    groups.push({\n      name: 'Flags',\n      properties: ['isLoaded', 'hasDirtyAttributes', 'isSaving', 'isDeleted', 'isError', 'isNew', 'isValid'],\n    });\n\n    return {\n      propertyInfo: {\n        // include all other mixins / properties (not just the grouped ones)\n        includeOtherProperties: true,\n        groups: groups,\n        // don't pre-calculate unless cached\n        expensiveProperties: expensiveProperties,\n      },\n    };\n  };\n}\n\nif (DEBUG) {\n  let lookupDescriptor = function lookupDescriptor(obj, keyName) {\n    let current = obj;\n    do {\n      let descriptor = Object.getOwnPropertyDescriptor(current, keyName);\n      if (descriptor !== undefined) {\n        return descriptor;\n      }\n      current = Object.getPrototypeOf(current);\n    } while (current !== null);\n    return null;\n  };\n\n  Model.reopen({\n    init() {\n      this._super(...arguments);\n\n      let ourDescriptor = lookupDescriptor(Model.prototype, 'currentState');\n      let theirDescriptor = lookupDescriptor(this, 'currentState');\n      let realState = this.___recordState;\n      if (ourDescriptor.get !== theirDescriptor.get || realState !== this.currentState) {\n        throw new Error(\n          `'currentState' is a reserved property name on instances of classes extending Model. Please choose a different property name for ${this.constructor.toString()}`\n        );\n      }\n\n      const ID_DESCRIPTOR = lookupDescriptor(Model.prototype, 'id');\n      let idDesc = lookupDescriptor(this, 'id');\n\n      if (idDesc.get !== ID_DESCRIPTOR.get) {\n        throw new Error(\n          `You may not set 'id' as an attribute on your model. Please remove any lines that look like: \\`id: attr('<type>')\\` from ${this.constructor.toString()}`\n        );\n      }\n    },\n  });\n\n  Model.reopen = function deprecatedReopen() {\n    assert(`Model.reopen is deprecated. Use Foo extends Model to extend your class instead.`);\n  };\n\n  Model.reopenClass = function deprecatedReopenClass() {\n    assert(\n      `Model.reopenClass is deprecated. Use Foo extends Model to add static methods and properties to your class instead.`\n    );\n  };\n}\n\nexport default Model;\n"],"names":["isElementDescriptor","args","maybeTarget","maybeKey","maybeDesc","length","undefined","computedMacroWithOptionalParams","fn","normalizeModelName","type","macroCondition","getOwnConfig","deprecations","DEPRECATE_NON_STRICT_TYPES","result","dasherize","deprecate","id","until","for","since","available","enabled","_initializerDefineProperty","target","property","descriptor","context","Object","defineProperty","enumerable","configurable","writable","value","initializer","call","_applyDecoratedDescriptor","decorators","desc","keys","forEach","key","slice","reverse","reduce","decorator","ArrayProxyWithCustomOverrides","ArrayProxy","Errors","_dec","computed","_dec2","mapBy","_dec3","_dec4","not","_class","constructor","_descriptor","_descriptor2","errorsByAttributeName","Map","errorsFor","attribute","map","errors","get","A","set","content","unknownProperty","add","messages","_findOrCreateMessages","addObjects","__record","currentState","notify","notifyPropertyChange","messagesArray","Array","isArray","_messages","i","message","err","findBy","remove","isEmpty","rejectBy","setObjects","replace","delete","clear","attributes","_","push","has","prototype","getOwnPropertyDescriptor","RelatedCollection","RecordArray","options","isLoaded","isAsync","isPolymorphic","identifier","MUTATE","prop","_manager","mutate","op","record","field","index","prior","extractIdentifiersFromRecords","recordIdentifierFor","start","removeCount","adds","SOURCE","assert","tag","IDENTIFIER_ARRAY_TAG","shouldReset","notifyArray","reload","reloadHasMany","createRecord","hash","store","modelName","destroy","cache","_inverseIsAsync","DEPRECATED_CLASS_NAME","assertRecordPassedToHasMany","records","extractIdentifierFromRecord","recordOrPromiseRecord","PromiseObject","ObjectProxy","extend","PromiseProxyMixin","Extended","PromiseBelongsTo","legacySupport","_belongsToState","ref","referenceFor","meta","reloadBelongsTo","cached","PromiseManyArray","promise","_descriptor3","_descriptor4","_descriptor5","_update","isDestroyed","env","DEBUG","Ember","addMixin","mixin","DEPRECATE_COMPUTED_CHAINS","[]","cb","then","s","f","catch","finally","links","tapPromise","create","tracked","dependentKeyCompat","proxy","isPending","isSettled","isFulfilled","isRejected","Promise","resolve","error","assertPolymorphicType","parentIdentifier","parentDefinition","addedIdentifier","inverseIsImplicit","getSchemaDefinitionService","relationshipsDefinitionFor","inverseKey","as","isResourceIdentiferWithRelatedLinks","Boolean","related","BelongsToReference","graph","belongsToRelationship","definition","___identifier","___relatedToken","___token","notifications","subscribe","bucket","notifiedKey","_ref","unsubscribe","resource","_resource","data","identifierCache","getOrCreateRecordIdentifier","link","href","getRelationship","remoteType","jsonApiDoc","_join","peekRecord","load","support","LEGACY_SUPPORT","fetchSyncRel","areAllInverseRecordsLoaded","getBelongsTo","HasManyReference","hasManyRelationship","___relatedTokenMap","token","identifiers","resourceIdentifier","ids","objectOrPromise","payload","array","obj","relationshipMeta","_isLoaded","hasRelationshipDataProperty","state","hasReceivedData","relationship","getData","every","_instanceCache","recordIsLoaded","loaded","getManyArray","getHasMany","LegacySupport","storeFor","peekCache","packages","HAS_JSON_API_PACKAGE","graphFor","importSync","_manyArrayCache","_relationshipPromisesCache","_relationshipProxyCache","_pending","references","_syncArray","isDestroying","jsonApi","_getCurrentState","fastPush","mutation","_findBelongsTo","_findBelongsToByJsonApiResource","handleCompletedRelationshipRequest","e","loadingPromise","isBelongsTo","hasFailedLoadAttempt","shouldForceReload","_updatePromiseProxyFor","relatedIdentifier","isStableIdentifier","getRecord","toReturn","setDirtyBelongsTo","manyArray","doc","inverseIsAsync","manager","allowMutation","fetchAsyncHasMany","_findHasManyByJsonApiResource","anyUnloaded","kind","promiseProxy","name","reference","actualRelationshipKind","relationshipKind","adapter","adapterFor","isStale","hasDematerializedInverse","allInverseRecordsAreLoaded","shouldFindViaLink","findHasMany","inverseType","request","useLink","cacheOptions","Symbol","preferLocalCache","hasLocalPartialData","attemptLocalCache","hasData","future","localDataIsEmpty","resourceIsLocal","recordExt","isHasMany","_flush","_graph","relationshipData","unloaded","find","instanceCache","notifyChanges","notifyAttribute","eachAttribute","relationshipsByName","notifyRelationship","eachRelationship","hasPromise","async","currentValue","cacheFor","getAttr","SOURCE_POINTER_REGEXP","SOURCE_POINTER_PRIMARY_REGEXP","PRIMARY_ATTRIBUTE_KEY","isInvalidError","isAdapterError","code","Tag","base","arguments","_debug_base","_debug_prop","rev","isDirty","t","addToTransaction","consume","v","Tags","WeakMap","getTag","tags","peekTag","tagged","_target","getter","setter","RecordState","_class3","identity","pendingCount","fulfilledCount","rejectedCount","_errorRequests","_lastError","requests","getRequestStateService","handleRequest","req","isSaving","response","notifyErrorsStateChanged","subscribeForRecord","lastRequest","getLastRequestForRecord","handler","updateInvalidErrors","lid","getErrors","jsonApiErrors","source","pointer","keyMatch","match","search","errMsg","detail","title","cleanErrorRequests","isLoading","isNew","isSaved","rd","isDeleted","isDeletionCommitted","isValid","hasChangedAttrs","isError","errorReq","adapterError","isPreloaded","stateName","dirtyType","changeProperties","lookupLegacySupport","findPossibleInverses","relationshipsSoFar","possibleRelationships","relationshipMap","relationships","relationshipsForType","filter","optionsForRelationship","inverse","apply","superclass","computeOnce","hasComputed","Model","_class2","EmberObject","___private_notifications","init","_secretInit","_createProps","Error","createProps","___recordState","setProperties","hasDirtyAttributes","normalizedId","coerceId","didChange","setRecordId","toString","_v","serialize","serializeRecord","deleteRecord","destroyRecord","save","unloadRecord","_notifyProperties","changedAttributes","changedAttrs","rollbackAttributes","rollbackAttrs","_createSnapshot","_fetchManager","FetchManager","createSnapshot","saveRecord","isReloading","attr","belongsTo","hasMany","callback","binding","relationshipFor","inverseFor","typeForRelationship","modelFor","inverseMap","_findInverseFor","polymorphic","isExplicitInverseNull","isAbstractType","doesTypeExist","fieldOnInverse","inverseKind","inverseRelationship","inverseOptions","inverseSchema","parentModelName","warn","filteredRelationships","possibleRelationship","explicitRelationship","relationshipNames","names","eachComputedProperty","isRelationship","relatedTypes","types","rels","relationshipsObject","indexOf","fields","isAttribute","eachRelatedType","relationshipTypes","determineRelationshipType","knownSide","knownKey","knownKind","otherKind","transformedAttributes","eachTransformedAttribute","isModel","includeDataAdapter","_debugInfo","expensiveProperties","schema","attrDefs","attributesDefinitionFor","relDefs","unshift","groups","properties","expand","propertyInfo","includeOtherProperties","lookupDescriptor","keyName","current","getPrototypeOf","reopen","_super","ourDescriptor","theirDescriptor","realState","ID_DESCRIPTOR","idDesc","deprecatedReopen","reopenClass","deprecatedReopenClass"],"mappings":"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AAsB,QAAA,CAAA;;ACvaD;AACA;AACA;AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,MAAM4C,iBAAiB,SAASC,WAAW,CAAC;AAEzD;AACF;AACA;AACA;AACA;;AAIE;AACF;AACA;AACA;AACA;;AAIE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAUE;AACF;AACA;AACA;AACA;AACA;;AAIE;;EAMA5C,WAAWA,CAAC6C,OAA4B,EAAE;IACxC,KAAK,CAACA,OAAkD,CAAC,CAAA;AACzD,IAAA,IAAI,CAACC,QAAQ,GAAGD,OAAO,CAACC,QAAQ,IAAI,KAAK,CAAA;AACzC,IAAA,IAAI,CAACC,OAAO,GAAGF,OAAO,CAACE,OAAO,IAAI,KAAK,CAAA;AACvC,IAAA,IAAI,CAACC,aAAa,GAAGH,OAAO,CAACG,aAAa,IAAI,KAAK,CAAA;AACnD,IAAA,IAAI,CAACC,UAAU,GAAGJ,OAAO,CAACI,UAAU,CAAA;AACpC,IAAA,IAAI,CAACjE,GAAG,GAAG6D,OAAO,CAAC7D,GAAG,CAAA;AACxB,GAAA;AAEA,EAAA,CAACkE,MAAM,CAAEC,CAAAA,IAAY,EAAE5G,IAAe,EAAEc,MAAgB,EAAE;AACxD,IAAA,QAAQ8F,IAAI;AACV,MAAA,KAAK,UAAU;AAAE,QAAA;AACf,UAAA,IAAI,CAACC,QAAQ,CAACC,MAAM,CAAC;AACnBC,YAAAA,EAAE,EAAE,uBAAuB;YAC3BC,MAAM,EAAE,IAAI,CAACN,UAAU;YACvBO,KAAK,EAAE,IAAI,CAACxE,GAAG;AACfR,YAAAA,KAAK,EAAE,EAAA;AACT,WAAC,CAAC,C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BAAqB,CACnB,IAAI,CAACc,qBAAqB,CAAC/F,UAAU,EACrC,IAAI,CAAC+F,qBAAqB,CAACC,UAAU,EACrCrF,mBAAmB,CAACL,MAAM,CAAC,EAC3B,IAAI,CAACmB,KACP,CAAC,CAAA;AACH,KAAA;IAEA,MAAM;AAAEzB,MAAAA,UAAAA;KAAY,GAAG,IAAI,CAAC+F,qBAAqB,CAAA;AACjD,IAAA,IAAI,CAACtE,KAAK,CAAC2F,KAAK,CAAC,MAAM;AACrB,MAAA,IAAI,CAACtB,KAAK,CAACxG,IAAI,CAAC;AACde,QAAAA,EAAE,EAAE,sBAAsB;AAC1BC,QAAAA,MAAM,EAAEN,UAAU;QAClBO,KAAK,EAAE,IAAI,CAACxE,GAAG;QACfR,KAAK,EAAEoF,mBAAmB,CAACL,MAAM,CAAA;AACnC,OAAC,CAAC,CAAA;AACJ,KAAC,CAAC,CAAA;AAEF,IAAA,OAAOwE,OAAO,CAACC,OAAO,CAACzE,MAAM,CAAC,CAAA;AAChC,GAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAQE/E,EAAAA,KAAKA,GAA0B;AAC7B,IAAA,IAAImL,QAAQ,GAAG,IAAI,CAACC,SAAS,EAAE,CAAA;AAC/B,IAAA,OAAOD,QAAQ,IAAIA,QAAQ,CAACE,IAAI,GAAG,IAAI,CAACnF,KAAK,CAAC4F,UAAU,CAACX,QAAQ,CAACE,IAAI,CAAC,GAAG,IAAI,CAAA;AAChF,GAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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GAAG,CAC/F,IAAI,CAACyI,aACP,CAAE,CAAA;AAEF,IAAA,MAAMgD,MAAM,GAAG,IAAI,CAACT,SAAS,EAAE,CAAA;IAE/B,IAAI,CAACS,MAAM,EAAE;AACX;AACA;AACA,MAAA,IAAI,CAACzC,IAAI,CAAA;AACT,MAAA,OAAO,IAAI,CAAA;AACb,KAAA;AAEA,IAAA,OAAOe,OAAO,CAAC2B,YAAY,CAAC,IAAI,CAACnN,GAAG,CAAC,CAAA;AACvC,GAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAYE,MAAMuL,IAAIA,CAAC1H,OAAqB,EAAsB;IACpD,MAAM2H,OAAsB,GAAIC,cAAc,CAAgDhK,GAAG,CAC/F,IAAI,CAACyI,aACP,CAAE,CAAA;IACF,MAAMwB,YAAY,GAChB,CAAC,IAAI,CAACI,mBAAmB,CAAC7B,UAAU,CAAClG,OAAO,IAAI,CAAC4H,0BAA0B,CAAC,IAAI,CAACjG,KAAK,EAAE,IAAI,CAACkF,SAAS,EAAE,CAAC,CAAA;IAC3G,OAAOc,YAAY,GACdF,OAAO,CAACjG,aAAa,CAAC,IAAI,CAACvF,GAAG,EAAE6D,OAAO,CAAC,GACxC2H,OAAO,CAAC4B,UAAU,CAAC,IAAI,CAACpN,GAAG,EAAE6D,OAAO,CAAoC,CAAC;AAChF,GAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAWEyB,MAAMA,CAACzB,OAAqB,EAAE;IAC5B,MAAM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,CAAA;AAC9D;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAA,IAAI,CAAChG,gBAAgB,CAAC,CAACnS,GAAG,EAAE8G,IAAI,KAAK;AACnC,MAAA,IAAIA,IAAI,CAAC+I,IAAI,KAAK,WAAW,EAAE;AAC7B,QAAA,IAAI,CAACxN,oBAAoB,CAACrC,GAAG,CAAC,CAAA;AAChC,OAAA;AACF,KAAC,CAAC,CAAA;IACFyL,cAAc,CAAChK,GAAG,CAAC,IAAI,CAAC,EAAEmE,OAAO,EAAE,CAAA;AACnC6F,IAAAA,cAAc,CAACtI,MAAM,CAAC,IAAI,CAAC,CAAA;AAC3BsI,IAAAA,cAAc,CAACtI,MAAM,CAACc,UAAU,CAAC,CAAA;IAEjC,KAAK,CAAC2B,OAAO,EAAE,CAAA;AACjB,GAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAEE,IACI7C,OAAOA,GAAG;AACZ,IAAA,OAAO,IAAI,CAACZ,YAAY,CAACY,OAAO,CAAA;AAClC,GAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAEE,IACIoT,SAASA,GAAG;AACd,IAAA,OAAO,IAAI,CAAChU,YAAY,CAACgU,SAAS,CAAA;AACpC,GAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAKE,IACIrS,QAAQA,GAAG;AACb,IAAA,OAAO,IAAI,CAAC3B,YAAY,CAAC2B,QAAQ,CAAA;AACnC,GAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAKE,IACI6U,kBAAkBA,GAAG;AACvB,IAAA,OAAO,IAAI,CAACxW,YAAY,CAACkR,OAAO,CAAA;AAClC,GAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAIE,IACI0B,QAAQA,GAAG;AACb,IAAA,OAAO,IAAI,CAAC5S,YAAY,CAAC4S,QAAQ,CAAA;AACnC,GAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAOE,IACIwB,SAASA,GAAG;AACd,IAAA,OAAO,IAAI,CAACpU,YAAY,CAACoU,SAAS,CAAA;AACpC,GAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAKE,IACIH,KAAKA,GAAG;AACV,IAAA,OAAO,IAAI,CAACjU,YAAY,CAACiU,KAAK,CAAA;AAChC,GAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAGE,IACIK,OAAOA,GAAG;AACZ,IAAA,OAAO,IAAI,CAACtU,YAAY,CAACsU,OAAO,CAAA;AAClC,GAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAKE,IACIO,SAASA,GAAG;AACd,IAAA,OAAO,IAAI,CAAC7U,YAAY,CAAC6U,SAAS,CAAA;AACpC,GAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAIE,IACIL,OAAOA,GAAG;AACZ,IAAA,OAAO,IAAI,CAACxU,YAAY,CAACwU,OAAO,CAAA;AAClC,GAAA;EACA,IAAIA,OAAOA,CAAClD,CAAC,EAAE;AACb,IAAA,IAAAxV,cAAA,CAAAC,YAAA,GAAAsJ,GAAA,CAAAC,KAAA,CAAW,EAAA;AACT,MAAA,MAAM,IAAI8Q,KAAK,CAAE,CAAA,gCAAA,CAAiC,CAAC,CAAA;AACrD,KAAA;AACF,GAAA;AAoBA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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EA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAYEsK,OAAOA,CAACtK,IAAI,EAAE;IACZ,OAAOmH,mBAAmB,CAAC,IAAI,CAAC,CAACrQ,YAAY,CAAC,SAAS,EAAEkJ,IAAI,CAAC,CAAA;AAChE,GAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAcEoC,EAAAA,gBAAgBA,CAACmI,QAAQ,EAAEC,OAAO,EAAE;IAClC,IAAI,CAACvZ,WAAW,CAACmR,gBAAgB,CAACmI,QAAQ,EAAEC,OAAO,CAAC,CAAA;AACtD,GAAA;EAEAC,eAAeA,CAACzK,IAAI,EAAE;IACpB,OAAO,IAAI,CAAC/O,WAAW,CAACiR,mBAAmB,CAACxQ,GAAG,CAACsO,IAAI,CAAC,CAAA;AACvD,GAAA;EAEA0K,UAAUA,CAACza,GAAG,EAAE;AACd,IAAA,OAAO,IAAI,CAACgB,WAAW,CAACyZ,UAAU,CAACza,GAAG,EAAEsN,UAAQ,CAAC,IAAI,CAAC,CAAC,CAAA;AACzD,GAAA;AAEA0E,EAAAA,aAAaA,CAACsI,QAAQ,EAAEC,OAAO,EAAE;IAC/B,IAAI,CAACvZ,WAAW,CAACgR,aAAa,CAACsI,QAAQ,EAAEC,OAAO,CAAC,CAAA;AACnD,GAAA;AAgDA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","x_google_ignoreList":[1,2]}