{"version":3,"file":"page-title.js","sources":["../../src/services/page-title.js"],"sourcesContent":["import { getOwner } from '@ember/application';\nimport { scheduleOnce } from '@ember/runloop';\nimport Service, { inject as service } from '@ember/service';\nimport { isEmpty } from '@ember/utils';\nimport { assert } from '@ember/debug';\n\nlet isFastBoot = typeof FastBoot !== 'undefined';\n\nconst RouterEvent = {\n  ROUTE_DID_CHANGE: 'routeDidChange',\n};\n\n/**\n  @class page-title\n  @extends Ember.Service\n */\nexport default class PageTitleService extends Service {\n  @service('router')\n  router;\n\n  // in fastboot context \"document\" is instance of\n  // ember-fastboot/simple-dom document\n  @service('-document')\n  document;\n\n  tokens = [];\n\n  _defaultConfig = {\n    // The default separator to use between tokens.\n    separator: ' | ',\n\n    // The default prepend value to use.\n    prepend: true,\n\n    // The default replace value to use.\n    replace: null,\n  };\n\n  constructor() {\n    super(...arguments);\n    this._validateExistingTitleElement();\n\n    let config = getOwner(this).resolveRegistration('config:environment');\n    if (config.pageTitle) {\n      ['separator', 'prepend', 'replace'].forEach((key) => {\n        if (!isEmpty(config.pageTitle[key])) {\n          this._defaultConfig[key] = config.pageTitle[key];\n        }\n      });\n    }\n    this.router.on(RouterEvent.ROUTE_DID_CHANGE, this.scheduleTitleUpdate);\n  }\n\n  applyTokenDefaults(token) {\n    let defaultSeparator = this._defaultConfig.separator;\n    let defaultPrepend = this._defaultConfig.prepend;\n    let defaultReplace = this._defaultConfig.replace;\n\n    if (token.separator == null) {\n      token.separator = defaultSeparator;\n    }\n\n    if (token.prepend == null && defaultPrepend != null) {\n      token.prepend = defaultPrepend;\n    }\n\n    if (token.replace == null && defaultReplace != null) {\n      token.replace = defaultReplace;\n    }\n  }\n\n  inheritFromPrevious(token) {\n    let previous = token.previous;\n    if (previous) {\n      if (token.separator == null) {\n        token.separator = previous.separator;\n      }\n\n      if (token.prepend == null) {\n        token.prepend = previous.prepend;\n      }\n    }\n  }\n\n  push(token) {\n    let tokenForId = this._findTokenById(token.id);\n    if (tokenForId) {\n      let index = this.tokens.indexOf(tokenForId);\n      let tokens = [...this.tokens];\n      let previous = tokenForId.previous;\n      token.previous = previous;\n      token.next = tokenForId.next;\n      this.inheritFromPrevious(token);\n      this.applyTokenDefaults(token);\n\n      tokens.splice(index, 1, token);\n      this.tokens = tokens;\n      return;\n    }\n\n    let previous = this.tokens.slice(-1)[0];\n    if (previous) {\n      token.previous = previous;\n      previous.next = token;\n      this.inheritFromPrevious(token);\n    }\n\n    this.applyTokenDefaults(token);\n    this.tokens = [...this.tokens, token];\n  }\n\n  remove(id) {\n    let token = this._findTokenById(id);\n    let { next, previous } = token;\n    if (next) {\n      next.previous = previous;\n    }\n\n    if (previous) {\n      previous.next = next;\n    }\n\n    token.previous = token.next = null;\n\n    let tokens = [...this.tokens];\n    tokens.splice(tokens.indexOf(token), 1);\n    this.tokens = tokens;\n  }\n\n  get visibleTokens() {\n    let tokens = this.tokens;\n    let i = tokens ? tokens.length : 0;\n    let visible = [];\n    while (i--) {\n      let token = tokens[i];\n      if (token.replace) {\n        visible.unshift(token);\n        break;\n      } else {\n        visible.unshift(token);\n      }\n    }\n    return visible;\n  }\n\n  get sortedTokens() {\n    let visible = this.visibleTokens;\n    let appending = true;\n    let group = [];\n    let groups = [group];\n    let frontGroups = [];\n    visible.forEach((token) => {\n      if (token.front) {\n        frontGroups.unshift(token);\n      } else if (token.prepend) {\n        if (appending) {\n          appending = false;\n          group = [];\n          groups.push(group);\n        }\n        let lastToken = group[0];\n        if (lastToken) {\n          token = { ...token };\n          token.separator = lastToken.separator;\n        }\n        group.unshift(token);\n      } else {\n        if (!appending) {\n          appending = true;\n          group = [];\n          groups.push(group);\n        }\n        group.push(token);\n      }\n    });\n\n    return frontGroups.concat(groups.reduce((E, group) => E.concat(group), []));\n  }\n\n  scheduleTitleUpdate = () => {\n    scheduleOnce('afterRender', this, this._updateTitle);\n  };\n\n  toString() {\n    let tokens = this.sortedTokens;\n    let title = [];\n    for (let i = 0, len = tokens.length; i < len; i++) {\n      let token = tokens[i];\n      if (token.title) {\n        title.push(token.title);\n        if (i + 1 < len) {\n          title.push(token.separator);\n        }\n      }\n    }\n    return title.join('');\n  }\n\n  willDestroy() {\n    super.willDestroy();\n    this.router.off(RouterEvent.ROUTE_DID_CHANGE, this.scheduleTitleUpdate);\n  }\n\n  _updateTitle() {\n    const toBeTitle = this.toString();\n\n    if (isFastBoot) {\n      this.updateFastbootTitle(toBeTitle);\n    } else {\n      /**\n       * When rendering app with \"?fastboot=false\" (http://ember-fastboot.com/docs/user-guide#disabling-fastboot)\n       * We will not have <title> element present in DOM.\n       *\n       * But this is fine as by HTML spec,\n       * one is created upon assigning \"document.title\" value;\n       *\n       * https://html.spec.whatwg.org/multipage/dom.html#dom-tree-accessors\n       */\n      this.document.title = toBeTitle;\n    }\n\n    this.titleDidUpdate(toBeTitle);\n  }\n\n  /**\n   * Validate if there's more than one title element present.\n   *\n   * Example: ember-cli-head can cause conflicting updates.\n   * @private\n   */\n  _validateExistingTitleElement() {\n    if (isFastBoot) {\n      return;\n    }\n    assert(\n      '[ember-page-title]: Multiple title elements found. Check for other addons like ember-cli-head updating <title> as well.',\n      document.head.querySelectorAll('title').length <= 1\n    );\n  }\n\n  /**\n   * Find token by id\n   *\n   * @param {String} id\n   * @private\n   */\n  _findTokenById(id) {\n    return this.tokens.find((token) => token.id === id);\n  }\n\n  updateFastbootTitle(toBeTitle) {\n    if (!isFastBoot) {\n      return;\n    }\n    const headElement = this.document.head;\n    const headChildNodes = headElement.childNodes;\n\n    // Remove existing title elements from previous render cycle\n    for (let i = 0; i < headChildNodes.length; i++) {\n      let node = headChildNodes[i];\n      if (node.nodeName.toLowerCase() === 'title') {\n        headElement.removeChild(node);\n      }\n    }\n\n    // Add title element with latest value\n    let titleEl = this.document.createElement('title');\n    let titleContents = this.document.createTextNode(toBeTitle);\n    titleEl.appendChild(titleContents);\n    headElement.appendChild(titleEl);\n  }\n\n  titleDidUpdate(/* title */) {}\n}\n"],"names":["isFastBoot","FastBoot","RouterEvent","ROUTE_DID_CHANGE","PageTitleService","_dec","service","_dec2","_class","Service","constructor","arguments","_initializerDefineProperty","_descriptor","_descriptor2","_defineProperty","separator","prepend","replace","scheduleOnce","_updateTitle","_validateExistingTitleElement","config","getOwner","resolveRegistration","pageTitle","forEach","key","isEmpty","_defaultConfig","router","on","scheduleTitleUpdate","applyTokenDefaults","token","defaultSeparator","defaultPrepend","defaultReplace","inheritFromPrevious","previous","push","tokenForId","_findTokenById","id","index","tokens","indexOf","next","splice","slice","remove","visibleTokens","i","length","visible","unshift","sortedTokens","appending","group","groups","frontGroups","front","lastToken","concat","reduce","E","toString","title","len","join","willDestroy","off","toBeTitle","updateFastbootTitle","document","titleDidUpdate","assert","head","querySelectorAll","find","headElement","headChildNodes","childNodes","node","nodeName","toLowerCase","removeChild","titleEl","createElement","titleContents","createTextNode","appendChild","_applyDecoratedDescriptor","prototype","configurable","enumerable","writable","initializer"],"mappings":"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"}